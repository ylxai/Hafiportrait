# üéØ HafiPortrait Photography Development Guidelines

## üö® CRITICAL FOCUS AREAS

### **TELITI & DETAIL-ORIENTED**
- **ALWAYS verify file sizes** - 576KB ‚â† premium quality for DSLR photos
- **Check database consistency** - Don't trust labels, verify actual data
- **Test thoroughly** - No assumptions, always validate with real data
- **Question everything** - If something seems off, investigate deeper

### **QUALITY INTEGRITY**
- **NO FALSE PROMISES** - Never mislead users about photo quality
- **Honest communication** - Clear about compression levels and limitations
- **Original preservation** - Ensure true original quality is accessible
- **Mobile-first** - Photography business needs mobile-optimized workflow

### **CREATIVE PROBLEM SOLVING**
- **Think outside the box** - Find innovative solutions for complex issues
- **User experience first** - Prioritize photographer and client needs
- **Performance optimization** - Balance quality with speed
- **Scalable solutions** - Design for growth and future needs

## üõ†Ô∏è TECHNICAL STANDARDS

### **Environment Setup**
- **Development**: http://147.251.255.227:3002 (PM2: hafiportrait-dev)
- **Production**: https://hafiportrait.photography:3000 (PM2: hafiportrait-app)
- **Package Manager**: pnpm 10.14.0
- **Process Manager**: PM2
- **Node.js**: v22.18.0

### **Database Integrity**
- **Supabase** - Always verify data consistency
- **No misleading labels** - Fix "premium" vs actual file size mismatches
- **Backup verification** - Ensure storage_file_id populated for new uploads
- **Quality metadata** - Accurate compression and size information

### **Storage Architecture**
- **Cloudflare R2** - Primary storage (compressed for web)
- **Google Drive** - Original backup (100% quality preservation)
- **Smart routing** - Based on storage_file_id availability
- **Cleanup system** - Proper deletion from all storage tiers

## üì± MOBILE-FIRST PHOTOGRAPHY WORKFLOW

### **UI/UX Principles**
- **Touch-friendly** - Minimum 44px touch targets
- **Visual clarity** - Clear quality indicators (üíØ vs üì∑ vs ‚≠ê)
- **Honest labeling** - No confusion about quality levels
- **Professional appearance** - Suitable for photography business

### **Quality Communication**
```
üíØ Original 100% - From Google Drive backup (3-8MB)
‚≠ê High Quality - Premium compressed (1-2MB)
üì∑ Standard - Web optimized (500KB-1MB)
```

### **Download Logic**
- **Original available**: Route to `/api/photos/[id]/original`
- **No backup**: Route to main URL with honest quality indication
- **File size display**: Always show actual file size to user
- **Mobile tooltips**: Clear explanation of quality levels

## üîç DEBUGGING & VERIFICATION

### **Always Check**
1. **PM2 status**: `pm2 list | grep hafiportrait`
2. **File sizes**: Verify against expected DSLR photo sizes
3. **Database consistency**: storage_file_id vs compression_used
4. **Download endpoints**: Test both original and standard
5. **Mobile responsiveness**: Test on actual mobile browsers

### **Red Flags**
- File size <1MB marked as "premium"
- storage_file_id null but claiming original quality
- Quality indicators not matching actual file properties
- Mobile UI elements overlapping or too small
- False promises about photo quality

## üé® CREATIVE SOLUTIONS ENCOURAGED

### **Innovation Areas**
- **Smart quality detection** - Auto-detect actual quality from file analysis
- **Progressive enhancement** - Graceful degradation for legacy photos
- **User education** - Creative ways to explain quality differences
- **Performance optimization** - Innovative caching and delivery strategies
- **Backup automation** - Creative solutions for retroactive original backup

### **Problem-Solving Approach**
1. **Understand the root cause** - Don't just fix symptoms
2. **Consider user impact** - How does this affect photographers and clients?
3. **Think long-term** - Will this solution scale and remain maintainable?
4. **Be creative** - Standard solutions might not fit photography workflows
5. **Test thoroughly** - Verify solutions work in real-world scenarios

## üìã CURRENT CRITICAL ISSUES

### **Database Inconsistency**
- Photos marked "premium" but only 576KB file size
- storage_file_id null for all existing photos
- Misleading quality expectations for users

### **Backup System**
- Google Drive backup not working for existing photos
- Need verification for new upload system
- Original quality preservation critical for photography business

### **UI/UX Honesty**
- Quality indicators must reflect actual file properties
- No false promises about photo quality
- Mobile-optimized professional interface

## üöÄ SUCCESS CRITERIA

### **Quality Integrity**
- All quality indicators accurately reflect actual file properties
- Users understand exactly what quality they're getting
- Original photos accessible when available
- No misleading information anywhere in the system

### **Professional Workflow**
- Mobile-first design suitable for photography business
- Fast, reliable download of appropriate quality levels
- Clear communication about file sizes and quality
- Backup system preserving original quality for new uploads

### **Technical Excellence**
- Database consistency maintained
- Proper error handling and fallbacks
- Performance optimized for mobile
- Scalable architecture for business growth

---

**REMEMBER: Photography is about preserving memories. Quality and honesty are non-negotiable.**