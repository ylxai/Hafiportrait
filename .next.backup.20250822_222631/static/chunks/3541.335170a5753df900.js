"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3541],{1919:function(e,a,t){t.d(a,{Z:function(){return s}});let s=(0,t(5931).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},8348:function(e,a,t){t.d(a,{Z:function(){return s}});let s=(0,t(5931).Z)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]])},7052:function(e,a,t){t.r(a),t.d(a,{default:function(){return M}});var s=t(881),n=t(4149),l=t(8435),i=t(3575),d=t(5949),c=t(3939),r=t(6222),o=t(2571),m=t(8526),u=t(5546),x=t(6542),h=t(7791),p=t(2828),g=t(5409),f=t(5931);let b=(0,f.Z)("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var j=t(8348),v=t(7244),N=t(6168),w=t(4120),k=t(7324),D=t(9581),E=t(6077),y=t(511);let S=(0,f.Z)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);var C=t(681);let F=(0,f.Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var R=t(8544);function I(){var e;let{isConnected:a,dslrStatus:t,cameraStatus:l,uploadProgress:f,refreshStatus:I,provider:M,transport:U,connectionMode:O}=(0,x.Uj)(),{provider:L,isSocketIO:P,isWebSocket:Z,features:z}=(0,x.kd)(),[A,_]=(0,n.useState)({isConnected:!1,isProcessing:!1,totalUploaded:0,failedUploads:0,lastUpload:null,watchFolder:"win32"===R.platform?"C:/DCIM/100NIKON":"/media/DCIM/100NIKON",eventId:"",uploaderName:"Official Photographer",queueSize:0,uploadSpeed:0,serviceRunning:!1,lastHeartbeat:null,cameraModel:"Auto-detect",autoDetect:!0,backupEnabled:!0,notificationsEnabled:!0,watermarkEnabled:!1}),[T,H]=(0,n.useState)([]),[q,K]=(0,n.useState)({autoUpload:!0,eventId:"",uploaderName:"Official Photographer",watchFolder:"C:/DCIM/100NIKON"}),[J,Y]=(0,n.useState)({autoUpload:!0,watchFolder:"C:/DCIM/100NIKON",cameraModel:"NIKON_D7100",autoDetect:!0,backupEnabled:!0,notificationsEnabled:!0,watermarkEnabled:!1,connectionCheck:3e4}),[B,W]=(0,n.useState)(!1),[V,G]=(0,n.useState)([]),[Q,$]=(0,n.useState)(!1),[X,ee]=(0,n.useState)(!0),ea=async(e,a)=>{if(Y(t=>({...t,[e]:a})),W(!0),"autoUpload"===e)try{let e=a?"start":"stop",t=await fetch("/api/dslr/control",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:e})});if(t.ok){let a=await t.json();_(e=>({...e,serviceRunning:a.state.isRunning,isProcessing:!!a.state.isRunning&&e.isProcessing})),K(e=>({...e,autoUpload:a.state.isRunning})),window.dispatchEvent(new CustomEvent("admin-notification",{detail:{type:"success",message:"DSLR service ".concat(e,"ed successfully")}}))}}catch(e){console.error("Error toggling DSLR service:",e),Y(e=>({...e,autoUpload:!a}))}},et=async()=>{try{if((await fetch("/api/dslr/status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update_settings",settings:{watchFolder:J.watchFolder,cameraModel:J.cameraModel,autoDetect:J.autoDetect,backupEnabled:J.backupEnabled,notificationsEnabled:J.notificationsEnabled,watermarkEnabled:J.watermarkEnabled}})})).ok)localStorage.setItem("dslr-settings",JSON.stringify(J)),W(!1),_(e=>({...e,watchFolder:J.watchFolder,cameraModel:J.cameraModel,autoDetect:J.autoDetect,backupEnabled:J.backupEnabled,notificationsEnabled:J.notificationsEnabled,watermarkEnabled:J.watermarkEnabled})),window.dispatchEvent(new CustomEvent("admin-notification",{detail:{type:"success",message:"DSLR configuration saved successfully"}})),console.log("✅ DSLR settings saved successfully");else throw Error("Failed to save to API")}catch(e){console.error("Failed to save DSLR settings:",e),localStorage.setItem("dslr-settings",JSON.stringify(J)),W(!1),window.dispatchEvent(new CustomEvent("admin-notification",{detail:{type:"warning",message:"Settings saved locally only (API unavailable)"}}))}};(0,n.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/admin/events");if(e.ok){let a=await e.json();G(a)}}catch(e){console.error("Failed to fetch events:",e)}};(async()=>{try{let e=await fetch("/api/dslr/status");if(e.ok){let a=await e.json();Y(e=>({...e,autoUpload:a.serviceRunning||!1,watchFolder:a.watchFolder||e.watchFolder,cameraModel:a.cameraModel||e.cameraModel,autoDetect:void 0!==a.autoDetect?a.autoDetect:e.autoDetect,backupEnabled:void 0!==a.backupEnabled?a.backupEnabled:e.backupEnabled,notificationsEnabled:void 0!==a.notificationsEnabled?a.notificationsEnabled:e.notificationsEnabled,watermarkEnabled:void 0!==a.watermarkEnabled?a.watermarkEnabled:e.watermarkEnabled})),K(e=>({...e,autoUpload:a.serviceRunning||!1,eventId:a.eventId||e.eventId,uploaderName:a.uploaderName||e.uploaderName,watchFolder:a.watchFolder||e.watchFolder}))}let a=localStorage.getItem("dslr-settings");if(a){let e=JSON.parse(a);Y(a=>({...a,...e}))}}catch(a){console.error("Failed to load DSLR settings:",a);let e=localStorage.getItem("dslr-settings");if(e){let a=JSON.parse(e);Y(e=>({...e,...a}))}}})(),e()},[A.isProcessing,A.queueSize]),(0,n.useEffect)(()=>{X&&t&&(console.log("\uD83D\uDD04 Updating DSLR stats from WebSocket:",t),_(e=>({...e,isConnected:t.isConnected||!1,isProcessing:t.isProcessing||!1,totalUploaded:t.totalUploaded||e.totalUploaded,failedUploads:t.failedUploads||e.failedUploads,lastUpload:t.lastUpload||e.lastUpload,watchFolder:t.watchFolder||e.watchFolder,eventId:t.eventId||e.eventId,uploaderName:t.uploaderName||e.uploaderName,queueSize:t.queueSize||0,uploadSpeed:t.uploadSpeed||0,serviceRunning:t.serviceRunning||!1,lastHeartbeat:t.lastHeartbeat||e.lastHeartbeat,cameraModel:t.cameraModel||e.cameraModel,autoDetect:void 0!==t.autoDetect?t.autoDetect:e.autoDetect,backupEnabled:void 0!==t.backupEnabled?t.backupEnabled:e.backupEnabled,notificationsEnabled:void 0!==t.notificationsEnabled?t.notificationsEnabled:e.notificationsEnabled,watermarkEnabled:void 0!==t.watermarkEnabled?t.watermarkEnabled:e.watermarkEnabled})),K(e=>({...e,autoUpload:t.serviceRunning||!1,eventId:t.eventId||e.eventId,uploaderName:t.uploaderName||e.uploaderName,watchFolder:t.watchFolder||e.watchFolder})),Y(e=>({...e,autoUpload:t.serviceRunning||!1,watchFolder:t.watchFolder||e.watchFolder,cameraModel:t.cameraModel||e.cameraModel,autoDetect:void 0!==t.autoDetect?t.autoDetect:e.autoDetect,backupEnabled:void 0!==t.backupEnabled?t.backupEnabled:e.backupEnabled,notificationsEnabled:void 0!==t.notificationsEnabled?t.notificationsEnabled:e.notificationsEnabled,watermarkEnabled:void 0!==t.watermarkEnabled?t.watermarkEnabled:e.watermarkEnabled})))},[t,X]),(0,n.useEffect)(()=>{if(f&&(console.log("\uD83D\uDCE4 Upload progress update:",f),"completed"===f.status)){let e={id:"upload_".concat(Date.now()),fileName:f.fileName||"New Photo",uploadTime:f.timestamp||new Date().toISOString(),fileSize:f.fileSize||0,status:"success",photoUrl:f.photoUrl};H(a=>[e,...a.slice(0,9)])}},[f]),(0,n.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/dslr/status");if(e.ok){let t=await e.json();X&&a||(_(e=>({...e,isConnected:t.isConnected||!1,isProcessing:t.isProcessing||!1,totalUploaded:t.totalUploaded||0,failedUploads:t.failedUploads||0,lastUpload:t.lastUpload||null,watchFolder:t.watchFolder||e.watchFolder,eventId:t.eventId||e.eventId,uploaderName:t.uploaderName||e.uploaderName,queueSize:t.queueSize||0,uploadSpeed:t.uploadSpeed||0,serviceRunning:t.serviceRunning||!1,lastHeartbeat:t.lastHeartbeat||null,cameraModel:t.cameraModel||e.cameraModel,autoDetect:void 0!==t.autoDetect?t.autoDetect:e.autoDetect,backupEnabled:void 0!==t.backupEnabled?t.backupEnabled:e.backupEnabled,notificationsEnabled:void 0!==t.notificationsEnabled?t.notificationsEnabled:e.notificationsEnabled,watermarkEnabled:void 0!==t.watermarkEnabled?t.watermarkEnabled:e.watermarkEnabled})),K(e=>({...e,autoUpload:t.serviceRunning||!1,eventId:t.eventId||e.eventId,uploaderName:t.uploaderName||e.uploaderName,watchFolder:t.watchFolder||e.watchFolder})),Y(e=>({...e,autoUpload:t.serviceRunning||!1,watchFolder:t.watchFolder||e.watchFolder,cameraModel:t.cameraModel||e.cameraModel,autoDetect:void 0!==t.autoDetect?t.autoDetect:e.autoDetect,backupEnabled:void 0!==t.backupEnabled?t.backupEnabled:e.backupEnabled,notificationsEnabled:void 0!==t.notificationsEnabled?t.notificationsEnabled:e.notificationsEnabled,watermarkEnabled:void 0!==t.watermarkEnabled?t.watermarkEnabled:e.watermarkEnabled})))}}catch(e){console.error("Failed to fetch DSLR status:",e),_(e=>({...e,isConnected:!1,isProcessing:!1,uploadSpeed:0}))}};e();let t=X&&a?A.isProcessing||A.queueSize>0?2e4:6e4:A.isProcessing||A.queueSize>0?5e3:15e3,s=setInterval(()=>{X&&a||e()},t);return console.log("\uD83D\uDCCA DSLR Monitor polling: ".concat(t,"ms (Processing: ").concat(A.isProcessing,", Queue: ").concat(A.queueSize,")")),()=>clearInterval(s)},[X,a,A.isProcessing,A.queueSize]);let es=async()=>{try{let e=A.isProcessing?"pause":"resume",a=await fetch("/api/dslr/status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:e})});if(a.ok){let t=await a.json();_(e=>({...e,isProcessing:t.isProcessing})),window.dispatchEvent(new CustomEvent("admin-notification",{detail:{type:"success",message:"DSLR service ".concat(e,"d successfully")}}))}else console.error("Failed to toggle DSLR service")}catch(e){console.error("Error toggling DSLR service:",e)}},en=async()=>{try{let e=A.serviceRunning?"stop":"start",a=await fetch("/api/dslr/control",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:e})});if(a.ok){let e=await a.json();_(a=>({...a,serviceRunning:e.state.isRunning,isProcessing:!!e.state.isRunning&&a.isProcessing})),window.dispatchEvent(new CustomEvent("admin-notification",{detail:{type:"success",message:e.message}}))}else console.error("Failed to toggle DSLR service")}catch(e){console.error("Error toggling DSLR service:",e)}},el=async()=>{if($(!0),X&&a)I();else try{let e=await fetch("/api/dslr/status");if(e.ok){let a=await e.json();_(e=>({...e,...a}))}}catch(e){console.error("Failed to refresh DSLR status:",e)}setTimeout(()=>$(!1),500)},ei=async()=>{try{(_(e=>({...e,eventId:q.eventId,uploaderName:q.uploaderName,watchFolder:q.watchFolder})),(await fetch("/api/dslr/status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update_settings",settings:{eventId:q.eventId,uploaderName:q.uploaderName,watchFolder:q.watchFolder}})})).ok)?(console.log("✅ DSLR settings updated successfully"),window.dispatchEvent(new CustomEvent("admin-notification",{detail:{type:"success",message:"DSLR settings updated - Event ID: ".concat(q.eventId)}}))):console.error("❌ Failed to update DSLR settings")}catch(e){console.error("❌ Error updating DSLR settings:",e)}},ed=e=>(e/1048576).toFixed(1)+" MB",ec=e=>new Date(e).toLocaleTimeString();return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(i.Zb,{children:(0,s.jsx)(i.Ol,{children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)(i.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(h.Z,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"truncate",children:"DSLR Monitor"}),X&&a&&(0,s.jsxs)(c.C,{variant:"outline",className:"text-xs bg-green-50 text-green-700 border-green-200",children:[(0,s.jsx)(p.Z,{className:"h-3 w-3 mr-1"}),P?"Socket.IO":"WebSocket"]})]}),(0,s.jsxs)(i.SZ,{className:"mt-1 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"Monitor upload otomatis dari Nikon D7100"}),(0,s.jsxs)(c.C,{variant:a?"default":"secondary",className:"text-xs",children:[(0,s.jsx)(g.Z,{className:"h-3 w-3 mr-1"}),a?"Real-time Connected":"API Polling Mode"]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 flex-shrink-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 p-2 border rounded-lg bg-gray-50",children:[(0,s.jsx)(m.r,{checked:X,onCheckedChange:ee}),(0,s.jsx)("span",{className:"text-xs font-medium",children:"Real-time"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c.C,{variant:A.serviceRunning?"default":"destructive",className:"text-xs",children:A.serviceRunning?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.Z,{className:"h-3 w-3 mr-1"}),"Service Running"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b,{className:"h-3 w-3 mr-1"}),"Service Stopped"]})}),A.serviceRunning&&(0,s.jsx)(c.C,{variant:A.isConnected?"default":"secondary",className:"text-xs",children:A.isConnected?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.Z,{className:"h-3 w-3 mr-1"}),"Camera Connected"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.Z,{className:"h-3 w-3 mr-1"}),"Camera Disconnected"]})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(d.z,{variant:"outline",size:"sm",onClick:el,disabled:Q,children:[(0,s.jsx)(j.Z,{className:"h-4 w-4 mr-1 ".concat(Q?"animate-spin":"")}),(0,s.jsx)("span",{className:"hidden xs:inline",children:"Refresh"})]}),(0,s.jsx)(d.z,{variant:A.isProcessing?"destructive":"default",size:"sm",onClick:es,disabled:!A.serviceRunning,children:A.isProcessing?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.Z,{className:"h-4 w-4 mr-1"}),(0,s.jsx)("span",{className:"hidden xs:inline",children:"Pause"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(N.Z,{className:"h-4 w-4 mr-1"}),(0,s.jsx)("span",{className:"hidden xs:inline",children:"Resume"})]})}),(0,s.jsx)(d.z,{variant:A.serviceRunning?"destructive":"default",size:"sm",onClick:en,children:A.serviceRunning?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(w.Z,{className:"h-4 w-4 mr-1"}),(0,s.jsx)("span",{className:"hidden xs:inline",children:"Stop Service"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(k.Z,{className:"h-4 w-4 mr-1"}),(0,s.jsx)("span",{className:"hidden xs:inline",children:"Start Service"})]})})]})]})]})})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)(i.Zb,{children:[(0,s.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(i.ll,{className:"text-sm font-medium",children:"Total Uploaded"}),(0,s.jsx)(D.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(i.aY,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:A.totalUploaded}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[A.failedUploads," failed"]})]})]}),(0,s.jsxs)(i.Zb,{children:[(0,s.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(i.ll,{className:"text-sm font-medium",children:"Upload Speed"}),(0,s.jsx)(E.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(i.aY,{children:[(0,s.jsxs)("div",{className:"text-2xl font-bold",children:[A.uploadSpeed.toFixed(1)," MB/s"]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[A.queueSize," in queue"]})]})]}),(0,s.jsxs)(i.Zb,{children:[(0,s.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(i.ll,{className:"text-sm font-medium",children:"Last Upload"}),(0,s.jsx)(y.Z,{className:"h-4 w-4 text-muted-foreground",alt:""})]}),(0,s.jsxs)(i.aY,{children:[(0,s.jsx)("div",{className:"text-sm font-bold",children:A.lastUpload?ec(A.lastUpload):"Never"}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Event: ",A.eventId||"Not set"]})]})]}),(0,s.jsxs)(i.Zb,{children:[(0,s.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(i.ll,{className:"text-sm font-medium",children:"Watch Folder"}),(0,s.jsx)(S,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(i.aY,{children:[(0,s.jsx)("div",{className:"text-xs font-mono break-all",children:A.watchFolder}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Monitoring active"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[(0,s.jsxs)(i.Zb,{children:[(0,s.jsx)(i.Ol,{children:(0,s.jsxs)(i.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(C.Z,{className:"h-5 w-5"}),"DSLR Settings"]})}),(0,s.jsxs)(i.aY,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(o._,{htmlFor:"auto-upload",children:"Auto Upload"}),(0,s.jsx)(m.r,{id:"auto-upload",checked:q.autoUpload,onCheckedChange:async e=>{K(a=>({...a,autoUpload:e})),Y(a=>({...a,autoUpload:e}));try{let a=await fetch("/api/dslr/control",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:e?"start":"stop"})});if(a.ok){let t=await a.json();_(e=>({...e,serviceRunning:t.state.isRunning,isProcessing:!!t.state.isRunning&&e.isProcessing})),window.dispatchEvent(new CustomEvent("admin-notification",{detail:{type:"success",message:"Auto upload ".concat(e?"enabled":"disabled")}}))}}catch(e){console.error("Error toggling auto upload:",e)}}})]}),(0,s.jsx)(u.Z,{}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o._,{htmlFor:"event-id",children:"Active Event"}),(0,s.jsxs)("select",{id:"event-id",className:"w-full px-3 py-2 border border-input rounded-md text-sm",value:q.eventId,onChange:e=>K(a=>({...a,eventId:e.target.value})),children:[(0,s.jsx)("option",{value:"",children:"Select Event"}),V.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," - ",new Date(e.date).toLocaleDateString()]},e.id))]}),q.eventId&&(0,s.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:["Selected: ",(null===(e=V.find(e=>e.id===q.eventId))||void 0===e?void 0:e.name)||q.eventId]})]}),(0,s.jsxs)("div",{className:"mobile-form-group",children:[(0,s.jsx)("label",{htmlFor:"uploader-name",className:"mobile-label",children:"Photographer Name"}),(0,s.jsx)("input",{id:"uploader-name",className:"mobile-input",value:q.uploaderName,onChange:e=>K(a=>({...a,uploaderName:e.target.value})),placeholder:"Official Photographer"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o._,{htmlFor:"watch-folder",children:"Watch Folder"}),(0,s.jsx)(r.I,{id:"watch-folder",value:q.watchFolder,onChange:e=>K(a=>({...a,watchFolder:e.target.value})),placeholder:"C:/DCIM/100NIKON"})]}),(0,s.jsx)(d.z,{onClick:ei,className:"w-full",children:"Update Settings"})]})]}),(0,s.jsxs)(i.Zb,{children:[(0,s.jsxs)(i.Ol,{children:[(0,s.jsx)(i.ll,{children:"Recent Uploads"}),(0,s.jsx)(i.SZ,{children:"Latest photos uploaded from DSLR"})]}),(0,s.jsx)(i.aY,{children:(0,s.jsx)("div",{className:"space-y-4",children:0===T.length?(0,s.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,s.jsx)(h.Z,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),(0,s.jsx)("p",{children:"No recent uploads"}),(0,s.jsx)("p",{className:"text-sm",children:"Photos will appear here when uploaded"})]}):T.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:["success"===e.status&&(0,s.jsx)(k.Z,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),"failed"===e.status&&(0,s.jsx)(w.Z,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),"uploading"===e.status&&(0,s.jsx)(E.Z,{className:"h-4 w-4 text-yellow-500 animate-spin flex-shrink-0"}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("p",{className:"font-medium text-sm truncate",children:e.fileName}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[ed(e.fileSize)," • ",ec(e.uploadTime)]})]})]}),(0,s.jsx)(c.C,{variant:"success"===e.status?"default":"failed"===e.status?"destructive":"secondary",className:"text-xs flex-shrink-0",children:e.status})]},e.id))})})]})]}),(0,s.jsxs)(i.Zb,{children:[(0,s.jsx)(i.Ol,{children:(0,s.jsx)(i.ll,{children:"System Status"})}),(0,s.jsx)(i.aY,{children:(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"text-center p-4 rounded-lg hover:bg-muted/50 transition-colors",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full mb-2 transition-colors ".concat(A.serviceRunning?"bg-green-100 text-green-600":"bg-red-100 text-red-600"),children:(0,s.jsx)(C.Z,{className:"h-5 w-5"})}),(0,s.jsx)("p",{className:"text-sm font-medium",children:"DSLR Service"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:A.serviceRunning?"Running":"Stopped"}),A.lastHeartbeat&&(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Last: ",new Date(A.lastHeartbeat).toLocaleTimeString()]})]}),(0,s.jsxs)("div",{className:"text-center p-4 rounded-lg hover:bg-muted/50 transition-colors",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full mb-2 transition-colors ".concat(A.isConnected?"bg-green-100 text-green-600":"bg-gray-100 text-gray-600"),children:(0,s.jsx)(h.Z,{className:"h-5 w-5"})}),(0,s.jsx)("p",{className:"text-sm font-medium",children:"Camera"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:A.isConnected?"Connected":"Disconnected"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:A.cameraModel})]}),(0,s.jsxs)("div",{className:"text-center p-4 rounded-lg hover:bg-muted/50 transition-colors",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full mb-2 transition-colors ".concat(A.isProcessing?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"),children:(0,s.jsx)(D.Z,{className:"h-5 w-5"})}),(0,s.jsx)("p",{className:"text-sm font-medium",children:"Upload Service"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:A.isProcessing?"Active":"Paused"}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[A.uploadSpeed.toFixed(1)," MB/s"]})]}),(0,s.jsxs)("div",{className:"text-center p-4 rounded-lg hover:bg-muted/50 transition-colors",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full mb-2 transition-colors ".concat(A.backupEnabled?"bg-green-100 text-green-600":"bg-gray-100 text-gray-600"),children:(0,s.jsx)(S,{className:"h-5 w-5"})}),(0,s.jsx)("p",{className:"text-sm font-medium",children:"Local Backup"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:A.backupEnabled?"Enabled":"Disabled"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:A.watchFolder.split("/").pop()})]})]})})]}),(0,s.jsxs)("div",{className:"mobile-card",children:[(0,s.jsx)("div",{className:"mobile-card-header",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("h3",{className:"mobile-card-title flex items-center gap-2",children:[(0,s.jsx)(C.Z,{className:"h-5 w-5"}),"DSLR Configuration"]}),B&&(0,s.jsx)(c.C,{variant:"secondary",className:"text-xs",children:"Unsaved Changes"})]})}),(0,s.jsxs)("div",{className:"mobile-card-content space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:"Auto Upload"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Automatically upload photos from DSLR to system"})]}),(0,s.jsx)(m.r,{checked:J.autoUpload,onCheckedChange:e=>ea("autoUpload",e)})]}),J.autoUpload&&(0,s.jsxs)("div",{className:"space-y-4 pl-4 border-l-4 border-blue-200",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o._,{htmlFor:"camera-model",children:"Camera Model"}),(0,s.jsxs)("select",{id:"camera-model",value:J.cameraModel,onChange:e=>ea("cameraModel",e.target.value),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"NIKON_D7100",children:"\uD83D\uDCF7 Nikon D7100"}),(0,s.jsx)("option",{value:"NIKON_D850",children:"\uD83D\uDCF7 Nikon D850"}),(0,s.jsx)("option",{value:"CANON_EOS_5D",children:"\uD83D\uDCF7 Canon EOS 5D"}),(0,s.jsx)("option",{value:"CANON_EOS_R5",children:"\uD83D\uDCF7 Canon EOS R5"}),(0,s.jsx)("option",{value:"SONY_A7III",children:"\uD83D\uDCF7 Sony A7 III"}),(0,s.jsx)("option",{value:"SONY_A7R4",children:"\uD83D\uDCF7 Sony A7R IV"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o._,{htmlFor:"watch-folder",children:"Watch Folder"}),(0,s.jsx)(r.I,{id:"watch-folder",type:"text",value:J.watchFolder,onChange:e=>ea("watchFolder",e.target.value),placeholder:"C:/DCIM/100NIKON",className:"focus:ring-2 focus:ring-blue-500"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-sm",children:"Auto Detect Camera"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Automatically detect camera folder"})]}),(0,s.jsx)(m.r,{checked:J.autoDetect,onCheckedChange:e=>ea("autoDetect",e)})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-sm",children:"Local Backup"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Backup photos to local storage"})]}),(0,s.jsx)(m.r,{checked:J.backupEnabled,onCheckedChange:e=>ea("backupEnabled",e)})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-sm",children:"Notifications"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Upload and camera status notifications"})]}),(0,s.jsx)(m.r,{checked:J.notificationsEnabled,onCheckedChange:e=>ea("notificationsEnabled",e)})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-sm",children:"Watermark"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Automatic watermark for DSLR photos"})]}),(0,s.jsx)(m.r,{checked:J.watermarkEnabled,onCheckedChange:e=>ea("watermarkEnabled",e)})]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t",children:[(0,s.jsxs)(d.z,{onClick:et,className:"bg-blue-600 hover:bg-blue-700 text-white",disabled:!B,children:[(0,s.jsx)(F,{className:"w-4 h-4 mr-2"}),"Save Settings",B&&(0,s.jsx)("span",{className:"ml-2 w-2 h-2 bg-red-500 rounded-full"})]}),(0,s.jsxs)(d.z,{variant:"outline",onClick:()=>{confirm("Reset all DSLR settings to default?")&&(Y({autoUpload:!0,watchFolder:"C:/DCIM/100NIKON",cameraModel:"NIKON_D7100",autoDetect:!0,backupEnabled:!0,notificationsEnabled:!0,watermarkEnabled:!1,connectionCheck:3e4}),W(!1))},children:[(0,s.jsx)(j.Z,{className:"w-4 h-4 mr-2"}),"Reset to Default"]})]}),(0,s.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"\uD83D\uDCF7 Real-time Status:"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"font-medium ".concat(A.serviceRunning?"text-green-600":"text-red-600"),children:A.serviceRunning?"✅ Running":"❌ Stopped"}),(0,s.jsx)("div",{className:"text-blue-800",children:"DSLR Service"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"font-medium ".concat(A.backupEnabled?"text-green-600":"text-gray-600"),children:A.backupEnabled?"\uD83D\uDCBE Active":"❌ Disabled"}),(0,s.jsx)("div",{className:"text-blue-800",children:"Local Backup"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"font-medium ".concat(A.notificationsEnabled?"text-purple-600":"text-gray-600"),children:A.notificationsEnabled?"\uD83D\uDD14 Enabled":"\uD83D\uDD15 Disabled"}),(0,s.jsx)("div",{className:"text-blue-800",children:"Notifications"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"font-medium ".concat(A.watermarkEnabled?"text-blue-600":"text-gray-600"),children:A.watermarkEnabled?"\uD83C\uDFF7️ Active":"❌ Disabled"}),(0,s.jsx)("div",{className:"text-blue-800",children:"Watermark"})]})]}),(0,s.jsxs)("div",{className:"mt-4 pt-4 border-t border-blue-200",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-blue-900",children:"Camera Model:"}),(0,s.jsx)("div",{className:"text-blue-700",children:A.cameraModel})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-blue-900",children:"Watch Folder:"}),(0,s.jsx)("div",{className:"text-blue-700 font-mono text-xs break-all",children:A.watchFolder})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-blue-900",children:"Active Event:"}),(0,s.jsx)("div",{className:"text-blue-700",children:A.eventId||"Not set"})]})]}),A.lastHeartbeat&&(0,s.jsxs)("div",{className:"mt-2 text-xs text-blue-600",children:["Last heartbeat: ",new Date(A.lastHeartbeat).toLocaleString()]}),!A.serviceRunning&&(0,s.jsx)("div",{className:"mt-2 p-2 bg-yellow-100 border border-yellow-300 rounded text-xs text-yellow-800",children:"⚠️ DSLR Service is not running. Start the service to see real-time data."})]})]})]})]})]})}function M(){return(0,s.jsx)(l.$G,{componentName:"DSLR Monitor",onError:(e,a)=>{console.error("DSLR Monitor Error:",{error:e.message,stack:e.stack,componentStack:a.componentStack,timestamp:new Date().toISOString()})},resetKeys:[],children:(0,s.jsx)(I,{})})}}}]);