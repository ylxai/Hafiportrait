(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{4339:function(e,s,a){Promise.resolve().then(a.bind(a,6652))},6652:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return eW}});var t=a(881),l=a(4149),i=a(8731),n=a(1084),r=a(9477),c=a(3433),d=a(7525),o=a(979),m=a(2502),u=a(8869),x=a(5441),h=a(2069),g=a(511),p=a(5876),j=a(7208),v=a(3377),f=a(681),b=a(7065),N=a(5313),w=a(9025),y=a(6002),k=a(3381),Z=a(4219),C=a(8664),E=a(6756),S=a(5949),D=a(6222),A=a(3939);function T(e){let{children:s,activeSection:a,onSectionChange:i,user:n,onLogout:r,stats:c}=e,[d,o]=(0,l.useState)(!1),[T,P]=(0,l.useState)(["dashboard"]),[z,F]=(0,l.useState)(""),_=[{id:"dashboard",label:"Dashboard",icon:m.Z,action:()=>i("dashboard")},{id:"events",label:"Event Management",icon:u.Z,badge:(null==c?void 0:c.totalEvents)||0,children:[{id:"events-list",label:"Daftar Event",icon:u.Z,action:()=>i("events-list")},{id:"events-create",label:"Buat Event Baru",icon:x.Z,action:()=>i("events-create")},{id:"events-status",label:"Status Manager",icon:h.Z,action:()=>i("events-status")}]},{id:"media",label:"Media & Gallery",icon:g.Z,badge:(null==c?void 0:c.totalPhotos)||0,children:[{id:"media-homepage",label:"Galeri Homepage",icon:g.Z,action:()=>i("media-homepage")},{id:"media-slideshow",label:"Hero Slideshow",icon:h.Z,action:()=>i("media-slideshow")},{id:"media-events",label:"Foto Event",icon:u.Z,action:()=>i("media-events")}]},{id:"system",label:"System & Monitoring",icon:h.Z,children:[{id:"system-monitor",label:"System Monitor",icon:h.Z,action:()=>i("system-monitor")},{id:"system-alerts",label:"Alert Dashboard",icon:p.Z,action:()=>i("system-alerts")},{id:"system-advanced",label:"Advanced Monitoring",icon:j.Z,action:()=>i("system-advanced")},{id:"system-dslr",label:"DSLR Monitor",icon:h.Z,action:()=>i("system-dslr")},{id:"system-backup",label:"Backup Status",icon:h.Z,action:()=>i("system-backup")},{id:"system-notifications",label:"Notifications",icon:v.Z,action:()=>i("system-notifications")}]},{id:"settings",label:"Settings",icon:f.Z,children:[{id:"settings-theme",label:"Tema & Tampilan",icon:f.Z,action:()=>i("settings-theme")},{id:"settings-profile",label:"Profile",icon:b.Z,action:()=>i("settings-profile")}]}],L=e=>{P(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},B=_.filter(e=>{var s;return e.label.toLowerCase().includes(z.toLowerCase())||(null===(s=e.children)||void 0===s?void 0:s.some(e=>e.label.toLowerCase().includes(z.toLowerCase())))});return(0,l.useEffect)(()=>{o(!1)},[a]),(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,t.jsxs)("div",{className:(0,E.cn)("fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0",d?"translate-x-0":"-translate-x-full"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-white font-bold text-sm",children:"HP"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xs md:text-sm font-semibold text-gray-900",children:"HafiPortrait"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Admin Panel"})]})]}),(0,t.jsx)(S.z,{variant:"ghost",size:"sm",onClick:()=>o(!1),className:"lg:hidden",children:(0,t.jsx)(N.Z,{className:"h-4 w-4"})})]}),(0,t.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(w.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,t.jsx)(D.I,{placeholder:"Cari menu...",value:z,onChange:e=>F(e.target.value),className:"pl-10 text-sm"})]})}),(0,t.jsx)("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:B.map(e=>(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:(0,E.cn)("flex items-center justify-between w-full px-3 py-2 text-sm rounded-lg transition-colors cursor-pointer",a.startsWith(e.id)?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-700 hover:bg-gray-100"),onClick:()=>{e.children?L(e.id):e.action&&e.action()},children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(e.icon,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"font-medium",children:e.label}),void 0!==e.badge&&e.badge>0&&(0,t.jsx)(A.C,{variant:"secondary",className:"text-xs",children:e.badge})]}),e.children&&(0,t.jsx)("div",{className:"flex-shrink-0",children:T.includes(e.id)?(0,t.jsx)(y.Z,{className:"h-4 w-4"}):(0,t.jsx)(k.Z,{className:"h-4 w-4"})})]}),e.children&&T.includes(e.id)&&(0,t.jsx)("div",{className:"ml-4 mt-2 space-y-1",children:e.children.map(e=>(0,t.jsxs)("div",{className:(0,E.cn)("flex items-center space-x-3 px-3 py-2 text-sm rounded-lg transition-colors cursor-pointer",a===e.id?"bg-blue-100 text-blue-800 border-l-2 border-blue-500":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),onClick:()=>{var s;return null===(s=e.action)||void 0===s?void 0:s.call(e)},children:[(0,t.jsx)(e.icon,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:e.label})]},e.id))})]},e.id))}),(0,t.jsxs)("div",{className:"border-t border-gray-200 p-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-green-400 to-blue-500 rounded-full flex items-center justify-center",children:(0,t.jsx)(b.Z,{className:"h-4 w-4 text-white"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:(null==n?void 0:n.full_name)||"Admin"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 truncate",children:(null==n?void 0:n.email)||"admin@hafiportrait.com"})]})]}),(0,t.jsxs)(S.z,{variant:"outline",size:"sm",onClick:r,className:"w-full justify-start",children:[(0,t.jsx)(Z.Z,{className:"h-4 w-4 mr-2"}),"Keluar"]})]})]}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col lg:ml-0",children:[(0,t.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200 lg:hidden",children:(0,t.jsxs)("div",{className:"flex items-center justify-between h-16 px-4",children:[(0,t.jsx)(S.z,{variant:"ghost",size:"sm",onClick:()=>o(!0),children:(0,t.jsx)(C.Z,{className:"h-5 w-5"})}),(0,t.jsx)("h1",{className:"text-base md:text-lg font-semibold text-gray-900",children:"Admin Dashboard"}),(0,t.jsx)("div",{className:"w-10"})," "]})}),(0,t.jsx)("main",{className:"flex-1 overflow-y-auto",children:(0,t.jsx)("div",{className:"p-4 lg:p-6",children:s})})]}),d&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>o(!1)})]})}var P=a(3575),z=a(2571),F=a(7791),_=a(151),L=a(313),B=a(1515),I=a(4581);function O(e){let{children:s,columns:a={mobile:1,tablet:2,desktop:3},gap:l="md",className:i}=e;return(0,t.jsx)("div",{className:(0,E.cn)("grid",{sm:"gap-2",md:"gap-4",lg:"gap-6"}[l],"grid-cols-".concat(a.mobile||1),"sm:grid-cols-".concat(a.tablet||2),"lg:grid-cols-".concat(a.desktop||3),i),children:s})}function q(e){let{title:s,subtitle:a,value:l,icon:i,children:n,onClick:r,className:c}=e,d=r?"button":"div";return(0,t.jsxs)(d,{onClick:r,className:(0,E.cn)("bg-white rounded-lg border border-gray-200 p-4","transition-all duration-200",r&&["cursor-pointer touch-manipulation","hover:border-gray-300 hover:shadow-md","active:scale-[0.98] active:shadow-sm"],c),children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex-1 text-left",children:[(0,t.jsx)("h3",{className:"font-medium text-gray-900 text-sm sm:text-base",children:s}),a&&(0,t.jsx)("p",{className:"text-xs sm:text-sm text-gray-500 mt-1",children:a}),void 0!==l&&(0,t.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 mt-2",children:l})]}),i&&(0,t.jsx)("div",{className:"flex-shrink-0 text-gray-400",children:i})]}),n&&(0,t.jsx)("div",{className:"mt-4",children:n})]})}var U=a(9581);function M(e){let{onCreateEvent:s,onUploadPhoto:a,onViewAnalytics:l,onSystemCheck:i}=e,n=[{label:"Buat Event",icon:x.Z,color:"bg-blue-500 hover:bg-blue-600",action:s},{label:"Upload Foto",icon:U.Z,color:"bg-green-500 hover:bg-green-600",action:a},{label:"Analytics",icon:j.Z,color:"bg-purple-500 hover:bg-purple-600",action:l},{label:"System Check",icon:h.Z,color:"bg-orange-500 hover:bg-orange-600",action:i}];return(0,t.jsx)(P.Zb,{children:(0,t.jsxs)(P.aY,{className:"p-4",children:[(0,t.jsx)("h3",{className:"font-semibold mb-4",children:"Quick Actions"}),(0,t.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:n.map((e,s)=>(0,t.jsxs)(S.z,{onClick:e.action,className:"".concat(e.color," text-white h-16 flex flex-col items-center justify-center space-y-1 text-center"),children:[(0,t.jsx)(e.icon,{className:"h-4 w-4 md:h-5 md:w-5"}),(0,t.jsx)("span",{className:"text-xs leading-tight",children:e.label})]},s))})]})})}var K=a(9968),G=a(9409),R=a(7324);function Q(e){let{isOpen:s,onClose:a,slideshowPhotos:i=[],homepagePhotos:n=[],onAddToSlideshow:r,onRemoveFromSlideshow:c,isAddingToSlideshow:d=!1}=e,[o,m]=(0,l.useState)(""),[u,h]=(0,l.useState)("current");(0,l.useEffect)(()=>{let e=localStorage.getItem("slideshow-panel-state");if(e)try{let s=JSON.parse(e);m(s.searchQuery||""),h(s.activeTab||"current")}catch(e){console.error("Failed to load slideshow panel state:",e)}},[]),(0,l.useEffect)(()=>{localStorage.setItem("slideshow-panel-state",JSON.stringify({searchQuery:o,activeTab:u}))},[o,u]);let g=n.filter(e=>e.original_name.toLowerCase().includes(o.toLowerCase()));return(0,t.jsxs)(t.Fragment,{children:[s&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/20 z-40 transition-opacity",onClick:a}),(0,t.jsxs)("div",{className:(0,E.cn)("fixed top-0 right-0 h-full w-full md:w-[600px] bg-white shadow-2xl z-50 transform transition-transform duration-300 ease-in-out",s?"translate-x-0":"translate-x-full"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-blue-500 to-purple-600 text-white",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Kelola Hero Slideshow"}),(0,t.jsxs)("p",{className:"text-sm text-blue-100",children:[i.length," foto aktif • ",n.length," foto tersedia"]})]}),(0,t.jsx)(S.z,{variant:"ghost",size:"sm",onClick:a,className:"text-white hover:bg-white/20",children:(0,t.jsx)(N.Z,{className:"h-5 w-5"})})]}),(0,t.jsxs)("div",{className:"flex border-b border-gray-200",children:[(0,t.jsxs)("button",{onClick:()=>h("current"),className:(0,E.cn)("flex-1 px-4 py-3 text-sm font-medium transition-colors","current"===u?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-900"),children:[(0,t.jsx)(K.Z,{className:"w-4 h-4 inline mr-2"}),"Slideshow Aktif (",i.length,")"]}),(0,t.jsxs)("button",{onClick:()=>h("add"),className:(0,E.cn)("flex-1 px-4 py-3 text-sm font-medium transition-colors","add"===u?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-900"),children:[(0,t.jsx)(x.Z,{className:"w-4 h-4 inline mr-2"}),"Tambah Foto (",g.length,")"]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-4 max-h-[calc(100vh-200px)]",children:"current"===u?(0,t.jsx)("div",{className:"space-y-4",children:i.length>0?(0,t.jsx)("div",{className:"space-y-3",children:i.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border",children:[(0,t.jsx)("div",{className:"cursor-move text-gray-400",children:(0,t.jsx)(G.Z,{className:"w-4 h-4"})}),(0,t.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium",children:s+1}),(0,t.jsx)("img",{src:e.url,alt:e.original_name,className:"w-16 h-16 object-cover rounded-md"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"font-medium text-sm truncate",children:e.original_name}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["Urutan #",s+1]})]}),(0,t.jsx)(S.z,{size:"sm",variant:"outline",onClick:()=>c(e.id),className:"text-red-600 border-red-200 hover:bg-red-50",children:(0,t.jsx)(N.Z,{className:"w-4 h-4"})})]},e.id))}):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(K.Z,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Belum Ada Foto Slideshow"}),(0,t.jsx)("p",{className:"text-gray-500 mb-4",children:"Tambahkan foto dari galeri homepage untuk memulai slideshow"}),(0,t.jsxs)(S.z,{onClick:()=>h("add"),children:[(0,t.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),"Tambah Foto Pertama"]})]})}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(w.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,t.jsx)(D.I,{placeholder:"Cari foto...",value:o,onChange:e=>m(e.target.value),className:"pl-10"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(A.C,{variant:"secondary",children:[g.length," foto tersedia"]}),(0,t.jsxs)(A.C,{variant:"outline",children:[g.filter(e=>!i.some(s=>s.id===e.id)).length," belum di slideshow"]})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-3",children:g.map(e=>{let s=i.some(s=>s.id===e.id);return(0,t.jsxs)("div",{className:(0,E.cn)("relative group border-2 rounded-lg transition-all",s?"border-green-500 bg-green-50":"border-gray-200 hover:border-blue-300"),children:[(0,t.jsx)("img",{src:e.url,alt:e.original_name,className:"w-full aspect-square object-cover rounded-md"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-all rounded-md"}),(0,t.jsx)("div",{className:"absolute top-2 left-2",children:s?(0,t.jsxs)(A.C,{className:"bg-green-500 text-white",children:[(0,t.jsx)(R.Z,{className:"w-3 h-3 mr-1"}),"Di Slideshow"]}):(0,t.jsx)(A.C,{variant:"secondary",className:"opacity-0 group-hover:opacity-100 transition-opacity",children:"Klik untuk tambah"})}),(0,t.jsx)("div",{className:"absolute bottom-3 right-3",children:s?(0,t.jsx)("div",{className:"bg-green-500 text-white rounded-full p-3 shadow-lg",children:(0,t.jsx)(R.Z,{className:"w-5 h-5"})}):(0,t.jsx)(S.z,{size:"lg",onClick:()=>r(e.id),disabled:d,className:"rounded-full p-3 bg-blue-500 hover:bg-blue-600 hover:scale-110 transition-all shadow-lg",children:d?(0,t.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,t.jsx)(x.Z,{className:"w-5 h-5"})})})]},e.id)})}),0===g.length&&(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(w.Z,{className:"w-8 h-8 mx-auto text-gray-300 mb-2"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Tidak ada foto yang cocok dengan pencarian"})]})]})}),(0,t.jsx)("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[(0,t.jsx)("span",{children:"Maksimal 10 foto slideshow"}),(0,t.jsxs)("span",{children:[i.length,"/10 foto"]})]})})]})]})}function Y(e){let{stats:s}=e;return(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[(0,t.jsxs)(P.Zb,{className:"hover:shadow-md transition-shadow duration-200",children:[(0,t.jsxs)(P.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2 px-4 sm:px-6",children:[(0,t.jsx)(P.ll,{className:"text-sm font-medium text-gray-700",children:"Total Event"}),(0,t.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,t.jsx)(u.Z,{className:"h-4 w-4 text-blue-600"})})]}),(0,t.jsxs)(P.aY,{className:"px-4 sm:px-6",children:[(0,t.jsx)("div",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:(null==s?void 0:s.totalEvents)||0}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Event aktif & selesai"})]})]}),(0,t.jsxs)(P.Zb,{className:"hover:shadow-md transition-shadow duration-200",children:[(0,t.jsxs)(P.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2 px-4 sm:px-6",children:[(0,t.jsx)(P.ll,{className:"text-sm font-medium text-gray-700",children:"Total Foto"}),(0,t.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,t.jsx)(F.Z,{className:"h-4 w-4 text-green-600"})})]}),(0,t.jsxs)(P.aY,{className:"px-4 sm:px-6",children:[(0,t.jsx)("div",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:(null==s?void 0:s.totalPhotos)||0}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Di semua galeri"})]})]}),(0,t.jsxs)(P.Zb,{className:"hover:shadow-md transition-shadow duration-200 sm:col-span-2 lg:col-span-1",children:[(0,t.jsxs)(P.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2 px-4 sm:px-6",children:[(0,t.jsx)(P.ll,{className:"text-sm font-medium text-gray-700",children:"Total Pesan"}),(0,t.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,t.jsx)(_.Z,{className:"h-4 w-4 text-purple-600"})})]}),(0,t.jsxs)(P.aY,{className:"px-4 sm:px-6",children:[(0,t.jsx)("div",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:(null==s?void 0:s.totalMessages)||0}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Dari pengunjung"})]})]})]})}var H=a(6168),J=a(7244),V=a(4120),W=a(5867),X=a(6077),$=a(9188);function ee(e){let{events:s}=e,a=s.reduce((e,s)=>{let a=s.status||"active";return e[a]=(e[a]||0)+1,e},{}),l=s.length,i=a.active||0,n=a.completed||0,r=s.filter(e=>new Date(e.date)>new Date).length,c=s.filter(e=>new Date(e.date)<new Date).length,d=s.filter(e=>new Date(e.date).toDateString()===new Date().toDateString()).length,o={draft:{icon:(0,t.jsx)(f.Z,{className:"w-4 h-4"}),label:"Draft",color:"bg-gray-500",description:"Dalam persiapan"},active:{icon:(0,t.jsx)(H.Z,{className:"w-4 h-4"}),label:"Aktif",color:"bg-green-500",description:"Sedang berlangsung"},paused:{icon:(0,t.jsx)(J.Z,{className:"w-4 h-4"}),label:"Dijeda",color:"bg-yellow-500",description:"Sementara dihentikan"},completed:{icon:(0,t.jsx)(R.Z,{className:"w-4 h-4"}),label:"Selesai",color:"bg-blue-500",description:"Telah berakhir"},cancelled:{icon:(0,t.jsx)(V.Z,{className:"w-4 h-4"}),label:"Dibatalkan",color:"bg-red-500",description:"Tidak jadi dilaksanakan"},archived:{icon:(0,t.jsx)(W.Z,{className:"w-4 h-4"}),label:"Diarsipkan",color:"bg-gray-400",description:"Disimpan untuk referensi"}};return(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[(0,t.jsxs)(P.Zb,{className:"border-wedding-gold/20",children:[(0,t.jsx)(P.Ol,{className:"pb-3",children:(0,t.jsxs)(P.ll,{className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(u.Z,{className:"w-4 h-4 text-wedding-gold"}),"Ringkasan Event"]})}),(0,t.jsxs)(P.aY,{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Total Event"}),(0,t.jsx)("span",{className:"font-semibold text-lg",children:l})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Event Aktif"}),(0,t.jsx)("span",{className:"font-semibold text-green-600",children:i})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Event Selesai"}),(0,t.jsx)("span",{className:"font-semibold text-blue-600",children:n})]})]})]}),(0,t.jsxs)(P.Zb,{className:"border-wedding-gold/20",children:[(0,t.jsx)(P.Ol,{className:"pb-3",children:(0,t.jsxs)(P.ll,{className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(X.Z,{className:"w-4 h-4 text-wedding-gold"}),"Timeline Event"]})}),(0,t.jsxs)(P.aY,{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Hari Ini"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[d>0&&(0,t.jsx)(p.Z,{className:"w-4 h-4 text-orange-500"}),(0,t.jsx)("span",{className:"font-semibold text-orange-600",children:d})]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Mendatang"}),(0,t.jsx)("span",{className:"font-semibold text-blue-600",children:r})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Sudah Lewat"}),(0,t.jsx)("span",{className:"font-semibold text-gray-600",children:c})]})]})]}),(0,t.jsxs)(P.Zb,{className:"border-wedding-gold/20",children:[(0,t.jsx)(P.Ol,{className:"pb-3",children:(0,t.jsxs)(P.ll,{className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)($.Z,{className:"w-4 h-4 text-wedding-gold"}),"Status Event"]})}),(0,t.jsxs)(P.aY,{className:"space-y-2",children:[Object.entries(o).map(e=>{let[s,l]=e,i=a[s]||0;return 0===i?null:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)(A.C,{variant:"outline",className:"".concat(l.color," text-white border-none"),children:[l.icon,l.label]})}),(0,t.jsx)("span",{className:"font-semibold",children:i})]},s)}),0===l&&(0,t.jsxs)("div",{className:"text-center text-gray-500 py-4",children:[(0,t.jsx)(u.Z,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),(0,t.jsx)("p",{className:"text-sm",children:"Belum ada event"})]})]})]})]})}var es=a(2828),ea=a(2436);function et(e){let{onRefresh:s}=e,{toast:a}=(0,o.pm)(),[i,n]=(0,l.useState)(!1),[r,d]=(0,l.useState)(null),[m,u]=(0,l.useState)([]),x=async()=>{n(!0);try{let e=await (0,c.N)("GET","/api/admin/events/auto-status?action=health-check"),t=await e.json();d(t);{let e=new CustomEvent("auto-status-completed",{detail:{type:"health-check",result:t,timestamp:new Date().toISOString()}});window.dispatchEvent(e)}a({title:"Health Check Completed! \uD83D\uDD0D",description:"Processed ".concat(t.summary.totalProcessed," events, ").concat(t.archiveSuggestions.length," suggestions")}),s&&s()}catch(e){a({title:"Health Check Failed",description:"Terjadi kesalahan saat menjalankan health check.",variant:"destructive"})}finally{n(!1)}},h=async()=>{n(!0);try{let e=await (0,c.N)("GET","/api/admin/events/auto-status?action=auto-complete"),t=await e.json();{let e=new CustomEvent("auto-status-completed",{detail:{type:"auto-complete",result:t,timestamp:new Date().toISOString()}});window.dispatchEvent(e)}a({title:"Auto-Complete Finished! ✅",description:"".concat(t.processed," expired events marked as completed")}),s&&s()}catch(e){a({title:"Auto-Complete Failed",description:"Gagal menjalankan auto-complete events.",variant:"destructive"})}finally{n(!1)}},g=async()=>{n(!0);try{let e=await (0,c.N)("GET","/api/admin/events/auto-status?action=auto-activate"),t=await e.json();a({title:"Auto-Activate Finished! \uD83D\uDE80",description:"".concat(t.processed," today events activated")}),s&&s()}catch(e){a({title:"Auto-Activate Failed",description:"Gagal menjalankan auto-activate events.",variant:"destructive"})}finally{n(!1)}},j=async()=>{n(!0);try{let e=await (0,c.N)("GET","/api/admin/events/auto-status?action=suggest-archive"),s=await e.json();u(s.suggestions),a({title:"Archive Suggestions Ready! \uD83D\uDCA1",description:"Found ".concat(s.suggestions.length," events ready for archive")})}catch(e){a({title:"Failed to Get Suggestions",description:"Gagal mendapatkan saran archive.",variant:"destructive"})}finally{n(!1)}},v=async e=>{n(!0);try{let t=await (0,c.N)("POST","/api/admin/events/auto-status",{action:"bulk-archive",eventIds:e}),l=await t.json();a({title:"Bulk Archive Completed! \uD83D\uDCE6",description:"".concat(l.summary.successful,"/").concat(l.summary.total," events archived successfully")}),u([]),s&&s()}catch(e){a({title:"Bulk Archive Failed",description:"Gagal menjalankan bulk archive.",variant:"destructive"})}finally{n(!1)}};return(0,t.jsxs)(P.Zb,{className:"border-wedding-gold/20",children:[(0,t.jsxs)(P.Ol,{children:[(0,t.jsxs)(P.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(es.Z,{className:"w-5 h-5 text-wedding-gold"}),"Auto Status Management"]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Otomatisasi pengelolaan status event berdasarkan tanggal dan aktivitas"})]}),(0,t.jsxs)(P.aY,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,t.jsxs)(S.z,{variant:"outline",size:"sm",onClick:x,disabled:i,className:"flex items-center gap-2",children:[(0,t.jsx)(ea.Z,{className:"w-4 h-4 ".concat(i?"animate-spin":"")}),"Health Check"]}),(0,t.jsxs)(S.z,{variant:"outline",size:"sm",onClick:h,disabled:i,className:"flex items-center gap-2",children:[(0,t.jsx)(R.Z,{className:"w-4 h-4"}),"Auto Complete"]}),(0,t.jsxs)(S.z,{variant:"outline",size:"sm",onClick:g,disabled:i,className:"flex items-center gap-2",children:[(0,t.jsx)(H.Z,{className:"w-4 h-4"}),"Auto Activate"]}),(0,t.jsxs)(S.z,{variant:"outline",size:"sm",onClick:j,disabled:i,className:"flex items-center gap-2",children:[(0,t.jsx)(W.Z,{className:"w-4 h-4"}),"Get Suggestions"]})]}),r&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h4",{className:"font-medium flex items-center gap-2",children:[(0,t.jsx)($.Z,{className:"w-4 h-4"}),"Last Health Check Results"]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[(0,t.jsxs)("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:[(0,t.jsx)("div",{className:"text-lg font-semibold text-green-600",children:r.autoComplete.processed}),(0,t.jsx)("div",{className:"text-sm text-green-800",children:"Auto Completed"})]}),(0,t.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[(0,t.jsx)("div",{className:"text-lg font-semibold text-blue-600",children:r.autoActivate.processed}),(0,t.jsx)("div",{className:"text-sm text-blue-800",children:"Auto Activated"})]}),(0,t.jsxs)("div",{className:"p-3 bg-orange-50 rounded-lg border border-orange-200",children:[(0,t.jsx)("div",{className:"text-lg font-semibold text-orange-600",children:r.archiveSuggestions.length}),(0,t.jsx)("div",{className:"text-sm text-orange-800",children:"Archive Suggestions"})]})]}),r.summary.errors.length>0&&(0,t.jsxs)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(p.Z,{className:"w-4 h-4 text-red-600"}),(0,t.jsx)("span",{className:"font-medium text-red-800",children:"Errors Found"})]}),(0,t.jsxs)("div",{className:"text-sm text-red-700",children:[r.summary.errors.length," events failed to process"]})]})]}),m.length>0&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("h4",{className:"font-medium flex items-center gap-2",children:[(0,t.jsx)(W.Z,{className:"w-4 h-4"}),"Archive Suggestions (",m.length,")"]}),(0,t.jsx)(S.z,{size:"sm",onClick:()=>v(m.map(e=>e.eventId)),disabled:i,className:"bg-wedding-gold hover:bg-wedding-gold/90 text-black",children:"Archive All"})]}),(0,t.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:m.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"font-medium",children:e.eventName}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:[e.daysSinceCompletion," days since completion"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(A.C,{variant:"outline",className:"bg-orange-100 text-orange-800",children:[(0,t.jsx)(X.Z,{className:"w-3 h-3 mr-1"}),e.daysSinceCompletion,"d"]}),(0,t.jsx)(S.z,{size:"sm",variant:"outline",onClick:()=>v([e.eventId]),disabled:i,children:"Archive"})]})]},e.eventId))})]}),(0,t.jsxs)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"\uD83D\uDCA1 Auto Status Rules:"}),(0,t.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Auto Complete"}),": Events aktif yang sudah lewat 24 jam"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Auto Activate"}),": Events draft yang tanggalnya hari ini"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Archive Suggestions"}),": Events selesai lebih dari 7 hari"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Health Check"}),": Jalankan semua rule sekaligus"]})]})]})]})]})}var el=a(445),ei=a(5914),en=a(3389),er=a(88),ec=a(362),ed=a(2238),eo=a(9938),em=a(3518);function eu(e){let{editingEvent:s,onSave:a,onCancel:i,isSaving:n,createdEvent:r}=e,{toast:c}=(0,o.pm)(),[d,m]=(0,l.useState)(""),[u,x]=(0,l.useState)(""),[h,g]=(0,l.useState)(""),[p,j]=(0,l.useState)(!1),[v,f]=(0,l.useState)(!1);(0,l.useEffect)(()=>{s?(m(s.name),x(new Date(s.date).toISOString().split("T")[0]),g(s.access_code||""),j(s.is_premium)):(m(""),x(""),g(""),j(!1)),f(!1)},[s]),(0,l.useEffect)(()=>{r&&!s&&(f(!0),m(""),x(""),g(""),j(!1))},[r,s]);let b=async(e,s)=>{await (0,en.Pm)(e,s,c)};return v&&r?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(P.Zb,{className:"border-green-200 bg-green-50",children:(0,t.jsx)(P.aY,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center",children:(0,t.jsx)(R.Z,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-green-800",children:"Event Berhasil Dibuat! \uD83C\uDF89"}),(0,t.jsxs)("p",{className:"text-green-700",children:['Event "',r.name,'" siap digunakan']})]})]})})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(P.Zb,{className:"border-wedding-gold/20",children:[(0,t.jsx)(P.Ol,{children:(0,t.jsxs)(P.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(ec.Z,{className:"w-5 h-5 text-wedding-gold"}),"QR Code Event"]})}),(0,t.jsx)(P.aY,{className:"text-center space-y-4",children:r.qr_code?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"bg-white p-4 rounded-lg border-2 border-dashed border-gray-300 inline-block",children:(0,t.jsx)(el.default,{src:r.qr_code,alt:"QR Code Event",width:192,height:192,className:"w-48 h-48 mx-auto"})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(S.z,{onClick:()=>(null==r?void 0:r.qr_code)&&window.open(r.qr_code,"_blank"),className:"w-full bg-wedding-gold hover:bg-wedding-gold/90 text-black",children:[(0,t.jsx)(ed.Z,{className:"w-4 h-4 mr-2"}),"Buka QR Code"]}),(0,t.jsxs)(S.z,{variant:"outline",onClick:()=>b(r.qr_code,"QR Code URL"),className:"w-full",children:[(0,t.jsx)(eo.Z,{className:"w-4 h-4 mr-2"}),"Copy QR Code URL"]})]})]}):(0,t.jsxs)("div",{className:"text-gray-500 py-8",children:[(0,t.jsx)(ec.Z,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,t.jsx)("p",{children:"QR Code sedang diproses..."})]})})]}),(0,t.jsxs)(P.Zb,{className:"border-wedding-gold/20",children:[(0,t.jsx)(P.Ol,{children:(0,t.jsxs)(P.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(em.Z,{className:"w-5 h-5 text-wedding-gold"}),"Informasi Event"]})}),(0,t.jsxs)(P.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(z._,{className:"text-sm font-medium text-gray-600",children:"Nama Event"}),(0,t.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg",children:(0,t.jsx)("p",{className:"font-semibold",children:r.name})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(z._,{className:"text-sm font-medium text-gray-600",children:"Tanggal Event"}),(0,t.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg",children:(0,t.jsx)("p",{children:new Date(r.date).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(z._,{className:"text-sm font-medium text-gray-600",children:"Kode Akses"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"flex-1 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,t.jsx)("code",{className:"text-lg font-bold text-yellow-800",children:r.access_code})}),(0,t.jsx)(S.z,{size:"sm",variant:"outline",onClick:()=>b(r.access_code,"Kode Akses"),children:(0,t.jsx)(eo.Z,{className:"w-4 h-4"})})]})]}),r.id&&r.access_code&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(S.z,{variant:"outline",onClick:()=>{let e=(0,er.Lp)(r.id,r.access_code);window.open(e,"_blank")},className:"w-full",children:[(0,t.jsx)(ed.Z,{className:"w-4 h-4 mr-2"}),"Buka Link Event"]}),(0,t.jsxs)(S.z,{variant:"outline",onClick:()=>{b((0,er.Lp)(r.id,r.access_code),"Link Event")},className:"w-full",children:[(0,t.jsx)(eo.Z,{className:"w-4 h-4 mr-2"}),"Copy Link Event"]})]}),r.is_premium&&(0,t.jsx)("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg",children:(0,t.jsx)("p",{className:"text-purple-800 font-medium",children:"✨ Event Premium"})})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,t.jsx)(S.z,{onClick:()=>{f(!1),m(""),x(""),g(""),j(!1)},className:"bg-wedding-gold hover:bg-wedding-gold/90 text-black",children:"➕ Buat Event Lain"}),(0,t.jsx)(S.z,{variant:"outline",onClick:i,children:"✅ Selesai"})]})]}):(0,t.jsxs)(P.Zb,{className:"mb-6 border-wedding-gold/20",children:[(0,t.jsx)(P.Ol,{children:(0,t.jsx)(P.ll,{className:"text-lg",children:s?"Edit Event":"Buat Event Baru"})}),(0,t.jsxs)(P.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(z._,{htmlFor:"eventName",children:"Nama Event"}),(0,t.jsx)(D.I,{id:"eventName",value:d,onChange:e=>m(e.target.value),placeholder:"Masukkan nama event"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(z._,{htmlFor:"eventDate",children:"Tanggal Event"}),(0,t.jsx)(D.I,{id:"eventDate",type:"date",value:u,onChange:e=>x(e.target.value)})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-end",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(z._,{htmlFor:"accessCode",children:"Kode Akses"}),(0,t.jsx)(D.I,{id:"accessCode",value:h,onChange:e=>g(e.target.value),placeholder:"Masukkan kode akses"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 pb-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"isPremium",checked:p,onChange:e=>j(e.target.checked),className:"h-4 w-4 rounded"}),(0,t.jsx)(z._,{htmlFor:"isPremium",children:"Event Premium"})]})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(S.z,{onClick:()=>{if(!d||!u||!h){c({title:"Data Tidak Lengkap",description:"Mohon isi semua field yang diperlukan.",variant:"destructive"});return}a({id:null==s?void 0:s.id,name:d,date:u,access_code:h,is_premium:p})},disabled:n,className:"bg-wedding-gold hover:bg-wedding-gold/90 text-white",children:n?(0,t.jsx)(ei.Z,{}):s?"Update Event":"Buat Event"}),(0,t.jsx)(S.z,{variant:"outline",onClick:i,children:"Batal"})]})]})]})}var ex=a(1935),eh=a(9053),eg=a(2469),ep=a(3559),ej=a(5477),ev=a(5546),ef=a(3011);function eb(e){var s;let{eventId:a,eventName:i,isArchived:n=!1,onBackupComplete:r,onArchiveComplete:c}=e,[d,o]=(0,l.useState)(!1),[m,u]=(0,l.useState)(!1),[x,h]=(0,l.useState)(null),[g,p]=(0,l.useState)(null),[j,v]=(0,l.useState)(null),[f,b]=(0,l.useState)(null);(0,l.useEffect)(()=>{N()},[a]),(0,l.useEffect)(()=>{let e;if(d&&(null==x?void 0:x.backupId)){let s=(()=>{if(!x)return 5e3;switch(x.status){case"initializing":return 1e3;case"backing_up":let e=x.totalPhotos>0?x.processedPhotos/x.totalPhotos:0;if(e<.1||e>.9)return 1500;return 2500;case"completed":case"failed":return 1e4;default:return 3e3}})();e=setInterval(()=>{y(x.backupId)},s),console.log("\uD83D\uDCCA Event Backup Manager polling: ".concat(s,"ms (Status: ").concat(null==x?void 0:x.status,", Progress: ").concat(x?Math.round(x.processedPhotos/x.totalPhotos*100):0,"%)"))}return()=>{e&&clearInterval(e)}},[d,null==x?void 0:x.backupId]);let N=async()=>{try{let e=await fetch("/api/admin/events/".concat(a,"/archive")),s=await e.json();s.success&&p(s.data)}catch(e){console.error("Failed to load archive status:",e)}},w=async()=>{o(!0),v(null),b(null);try{let e=await fetch("/api/admin/events/".concat(a,"/backup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({compressionQuality:.9,includeMetadata:!0})}),s=await e.json();if(s.success)h(s.data),b("Backup started successfully! Backup ID: ".concat(s.data.backupId)),y(s.data.backupId),r&&r(s.data);else throw Error(s.message||"Backup failed")}catch(e){v("Backup failed: ".concat(e.message)),o(!1)}},y=async e=>{try{let s=await fetch("/api/admin/events/".concat(a,"/backup?backupId=").concat(e)),t=await s.json();t.success&&(h(t.data),("completed"===t.data.status||"failed"===t.data.status)&&(o(!1),"completed"===t.data.status?b("Backup completed! ".concat(t.data.successfulUploads,"/").concat(t.data.totalPhotos," photos backed up successfully.")):v("Backup failed: ".concat(t.data.error||"Unknown error"))))}catch(e){console.error("Failed to poll backup status:",e)}},k=async()=>{if(!(null==x?void 0:x.backupId)){v("Cannot archive: No completed backup found");return}u(!0),v(null);try{let e=await fetch("/api/admin/events/".concat(a,"/archive"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({backupId:x.backupId})}),s=await e.json();if(s.success)p(s.data),b("Event archived successfully!"),c&&c(s.data);else throw Error(s.message||"Archive failed")}catch(e){v("Archive failed: ".concat(e.message))}finally{u(!1)}},Z=async()=>{u(!0),v(null);try{let e=await fetch("/api/admin/events/".concat(a,"/archive"),{method:"DELETE"}),s=await e.json();if(s.success)p({...g,isArchived:!1}),b("Event unarchived successfully!");else throw Error(s.message||"Unarchive failed")}catch(e){v("Unarchive failed: ".concat(e.message))}finally{u(!1)}},C=()=>x&&0!==x.totalPhotos?Math.round(x.processedPhotos/x.totalPhotos*100):0;return(0,t.jsxs)(P.Zb,{className:"w-full",children:[(0,t.jsxs)(P.Ol,{children:[(0,t.jsxs)(P.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(eh.Z,{className:"h-5 w-5"}),"Event Backup & Archive Manager"]}),(0,t.jsxs)(P.SZ,{children:["Backup event photos to Google Drive and manage archive status for: ",(0,t.jsx)("strong",{children:i})]})]}),(0,t.jsxs)(P.aY,{className:"space-y-6",children:[j&&(0,t.jsxs)(ej.bZ,{variant:"destructive",children:[(0,t.jsx)(ex.Z,{className:"h-4 w-4"}),(0,t.jsx)(ej.X,{children:j})]}),f&&(0,t.jsxs)(ej.bZ,{children:[(0,t.jsx)(R.Z,{className:"h-4 w-4"}),(0,t.jsx)(ej.X,{children:f})]}),g&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h4",{className:"font-semibold flex items-center gap-2",children:[(0,t.jsx)(W.Z,{className:"h-4 w-4"}),"Archive Status"]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(A.C,{variant:g.isArchived?"default":"outline",children:g.isArchived?"ARCHIVED":"ACTIVE"}),g.archivedAt&&(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:["Archived: ",new Date(g.archivedAt).toLocaleDateString()]})]}),g.googleDriveBackupUrl&&(0,t.jsxs)(S.z,{variant:"outline",size:"sm",onClick:()=>window.open(g.googleDriveBackupUrl,"_blank"),children:[(0,t.jsx)(ed.Z,{className:"h-4 w-4 mr-1"}),"View in Google Drive"]})]})]}),(0,t.jsx)(ev.Z,{}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h4",{className:"font-semibold flex items-center gap-2",children:[(0,t.jsx)(ef.Z,{className:"h-4 w-4"}),"Backup to Google Drive"]}),x&&(0,t.jsxs)("div",{className:"space-y-3 p-4 bg-blue-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"font-medium",children:"Backup Progress"}),(s=x.status,(0,t.jsxs)(A.C,{variant:{completed:"default",failed:"destructive",backing_up:"secondary",initializing:"secondary"}[s]||"outline",className:"flex items-center gap-1",children:[(e=>{switch(e){case"completed":return(0,t.jsx)(R.Z,{className:"h-4 w-4 text-green-500"});case"failed":return(0,t.jsx)(ex.Z,{className:"h-4 w-4 text-red-500"});case"backing_up":case"initializing":return(0,t.jsx)(ea.Z,{className:"h-4 w-4 text-blue-500 animate-spin"});default:return(0,t.jsx)(X.Z,{className:"h-4 w-4 text-gray-500"})}})(s),s.replace("_"," ").toUpperCase()]}))]}),"backing_up"===x.status&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(ep.E,{value:C(),className:"w-full"}),(0,t.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,t.jsxs)("span",{children:[x.processedPhotos," / ",x.totalPhotos," photos"]}),(0,t.jsxs)("span",{children:[C(),"% complete"]})]})]}),"completed"===x.status&&(0,t.jsxs)("div",{className:"text-sm space-y-1",children:[(0,t.jsx)("div",{className:"text-green-600 font-medium",children:"✅ Backup completed successfully!"}),(0,t.jsxs)("div",{children:["\uD83D\uDCCA ",x.successfulUploads," photos backed up"]}),x.failedUploads>0&&(0,t.jsxs)("div",{className:"text-orange-600",children:["⚠️ ",x.failedUploads," photos failed"]}),x.duration&&(0,t.jsxs)("div",{children:["⏱️ Duration: ",Math.round(x.duration/1e3),"s"]})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(S.z,{onClick:w,disabled:d||(null==g?void 0:g.isArchived),className:"flex items-center gap-2",children:[d?(0,t.jsx)(ea.Z,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(ef.Z,{className:"h-4 w-4"}),d?"Backing Up...":"Start Backup"]}),(null==x?void 0:x.status)==="completed"&&!(null==g?void 0:g.isArchived)&&(0,t.jsxs)(S.z,{variant:"outline",onClick:k,disabled:m,className:"flex items-center gap-2",children:[m?(0,t.jsx)(ea.Z,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(W.Z,{className:"h-4 w-4"}),m?"Archiving...":"Archive Event"]}),(null==g?void 0:g.isArchived)&&(0,t.jsxs)(S.z,{variant:"outline",onClick:Z,disabled:m,className:"flex items-center gap-2",children:[m?(0,t.jsx)(ea.Z,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(W.Z,{className:"h-4 w-4"}),m?"Unarchiving...":"Unarchive Event"]})]})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,t.jsx)("div",{children:"\uD83D\uDCBE Backup destination: Google Drive (15GB+ free storage)"}),(0,t.jsx)("div",{children:"\uD83D\uDD12 High-quality compression (90%) for archival purposes"}),(0,t.jsx)("div",{children:"\uD83D\uDCC1 Organized in event-specific folders"}),(0,t.jsx)("div",{children:"\uD83C\uDF10 Publicly accessible backup links"})]})]})]})}var eN=a(8353);function ew(e){let{event:s,onStatusChange:a,onRefresh:i}=e,{toast:n}=(0,o.pm)(),[r,c]=(0,l.useState)(!1),d=s.status||"draft",m=async e=>{if(e!==d){if("archived"===d&&"active"!==e){n({title:"Tidak Dapat Mengubah Status",description:"Event yang sudah diarsipkan hanya bisa diaktifkan kembali.",variant:"destructive"});return}if("cancelled"===d&&!["draft","active"].includes(e)){n({title:"Tidak Dapat Mengubah Status",description:"Event yang dibatalkan hanya bisa dikembalikan ke draft atau aktif.",variant:"destructive"});return}c(!0);try{await a(s.id,e),n({title:"Status Event Berhasil Diubah!",description:'Event "'.concat(s.name,'" sekarang berstatus ').concat(x(e),".")}),i&&i()}catch(e){n({title:"Gagal Mengubah Status",description:"Terjadi kesalahan saat mengubah status event.",variant:"destructive"})}finally{c(!1)}}},x=e=>({draft:"Draft",active:"Aktif",paused:"Dijeda",completed:"Selesai",cancelled:"Dibatalkan",archived:"Diarsipkan"})[e],h=new Date(s.date),g=h<new Date,j=h.toDateString()===new Date().toDateString();return(0,t.jsxs)(P.Zb,{className:"border-wedding-gold/20",children:[(0,t.jsx)(P.Ol,{children:(0,t.jsxs)(P.ll,{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.Z,{className:"w-5 h-5 text-wedding-gold"}),"Event Status Management"]}),(e=>{let s={draft:{variant:"secondary",icon:(0,t.jsx)(f.Z,{className:"w-3 h-3"}),label:"Draft",color:"bg-gray-500"},active:{variant:"default",icon:(0,t.jsx)(H.Z,{className:"w-3 h-3"}),label:"Aktif",color:"bg-green-500"},paused:{variant:"secondary",icon:(0,t.jsx)(J.Z,{className:"w-3 h-3"}),label:"Dijeda",color:"bg-yellow-500"},completed:{variant:"default",icon:(0,t.jsx)(R.Z,{className:"w-3 h-3"}),label:"Selesai",color:"bg-blue-500"},cancelled:{variant:"destructive",icon:(0,t.jsx)(V.Z,{className:"w-3 h-3"}),label:"Dibatalkan",color:"bg-red-500"},archived:{variant:"outline",icon:(0,t.jsx)(eN.Z,{className:"w-3 h-3"}),label:"Diarsipkan",color:"bg-gray-400"}}[e];return(0,t.jsxs)(A.C,{variant:s.variant,className:"".concat(s.color," text-white flex items-center gap-1"),children:[s.icon,s.label]})})(d)]})}),(0,t.jsxs)(P.aY,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[(0,t.jsx)(L.Z,{className:"w-5 h-5 mx-auto mb-1 text-blue-600"}),(0,t.jsx)("div",{className:"text-lg font-semibold",children:s.participant_count||0}),(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"Partisipan"})]}),(0,t.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[(0,t.jsx)(F.Z,{className:"w-5 h-5 mx-auto mb-1 text-green-600"}),(0,t.jsx)("div",{className:"text-lg font-semibold",children:s.photo_count||0}),(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"Foto"})]}),(0,t.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[(0,t.jsx)(_.Z,{className:"w-5 h-5 mx-auto mb-1 text-purple-600"}),(0,t.jsx)("div",{className:"text-lg font-semibold",children:s.message_count||0}),(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"Pesan"})]}),(0,t.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[(0,t.jsx)(X.Z,{className:"w-5 h-5 mx-auto mb-1 text-orange-600"}),(0,t.jsx)("div",{className:"text-xs font-semibold",children:s.last_activity?new Date(s.last_activity).toLocaleDateString("id-ID"):"Tidak ada"}),(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"Aktivitas Terakhir"})]})]}),j&&(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,t.jsx)(p.Z,{className:"w-5 h-5 text-yellow-600"}),(0,t.jsx)("span",{className:"text-sm text-yellow-800",children:"Event berlangsung hari ini! Pastikan status sudah sesuai."})]}),g&&"active"===d&&(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,t.jsx)(X.Z,{className:"w-5 h-5 text-blue-600"}),(0,t.jsx)("span",{className:"text-sm text-blue-800",children:"Event sudah berlalu. Pertimbangkan untuk menyelesaikan atau mengarsipkan event."})]}),(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("h4",{className:"font-medium mb-2",children:["Status Saat Ini: ",x(d)]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:{draft:"Event masih dalam tahap persiapan dan belum dapat diakses oleh tamu.",active:"Event sedang berlangsung dan dapat diakses oleh tamu untuk upload foto dan kirim pesan.",paused:"Event dijeda sementara. Tamu tidak dapat upload foto atau kirim pesan baru.",completed:"Event telah selesai. Data masih dapat diakses tetapi tidak ada aktivitas baru.",cancelled:"Event dibatalkan. Semua aktivitas dihentikan.",archived:"Event diarsipkan untuk penyimpanan jangka panjang. Akses terbatas."}[d]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h4",{className:"font-medium",children:"Aksi yang Tersedia:"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:(({draft:[{status:"active",label:"Aktifkan Event",icon:(0,t.jsx)(H.Z,{className:"w-4 h-4"}),variant:"default"},{status:"cancelled",label:"Batalkan",icon:(0,t.jsx)(V.Z,{className:"w-4 h-4"}),variant:"destructive"}],active:[{status:"paused",label:"Jeda Event",icon:(0,t.jsx)(J.Z,{className:"w-4 h-4"}),variant:"secondary"},{status:"completed",label:"Selesaikan",icon:(0,t.jsx)(R.Z,{className:"w-4 h-4"}),variant:"default"},{status:"cancelled",label:"Batalkan",icon:(0,t.jsx)(V.Z,{className:"w-4 h-4"}),variant:"destructive"}],paused:[{status:"active",label:"Lanjutkan",icon:(0,t.jsx)(H.Z,{className:"w-4 h-4"}),variant:"default"},{status:"completed",label:"Selesaikan",icon:(0,t.jsx)(R.Z,{className:"w-4 h-4"}),variant:"default"},{status:"cancelled",label:"Batalkan",icon:(0,t.jsx)(V.Z,{className:"w-4 h-4"}),variant:"destructive"}],completed:[{status:"archived",label:"Arsipkan",icon:(0,t.jsx)(eN.Z,{className:"w-4 h-4"}),variant:"outline"},{status:"active",label:"Aktifkan Kembali",icon:(0,t.jsx)(H.Z,{className:"w-4 h-4"}),variant:"secondary"}],cancelled:[{status:"draft",label:"Kembalikan ke Draft",icon:(0,t.jsx)(f.Z,{className:"w-4 h-4"}),variant:"secondary"},{status:"active",label:"Aktifkan Kembali",icon:(0,t.jsx)(H.Z,{className:"w-4 h-4"}),variant:"default"}],archived:[{status:"active",label:"Aktifkan Kembali",icon:(0,t.jsx)(H.Z,{className:"w-4 h-4"}),variant:"default"}]})[d]||[]).map(e=>(0,t.jsxs)(S.z,{variant:e.variant,size:"sm",onClick:()=>m(e.status),disabled:r,className:"flex items-center gap-2",children:[e.icon,e.label]},e.status))})]}),r&&(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),(0,t.jsx)("span",{className:"text-sm text-blue-800",children:"Mengubah status event..."})]})]})]})}function ey(e){let{events:s,onEdit:a,onDelete:i,onBackupComplete:n,onArchiveComplete:r,onStatusChange:c,onRefresh:d}=e,{toast:m}=(0,o.pm)(),[x,h]=(0,l.useState)(null),[g,p]=(0,l.useState)({}),j=async(e,s)=>{await (0,en.Pm)(e,s,m)},v=e=>{h(x===e?null:e)},b=e=>{if(e.is_archived)return(0,t.jsxs)(A.C,{variant:"default",className:"bg-green-600 text-white flex items-center gap-1",children:[(0,t.jsx)(W.Z,{className:"w-3 h-3"}),"Archived"]});let s=g[e.id];if(s){if("backing_up"===s.status||"initializing"===s.status)return(0,t.jsxs)(A.C,{variant:"secondary",className:"flex items-center gap-1",children:[(0,t.jsx)(ea.Z,{className:"w-3 h-3 animate-spin"}),"Backing up..."]});if("completed"===s.status)return(0,t.jsxs)(A.C,{variant:"default",className:"bg-blue-600 text-white flex items-center gap-1",children:[(0,t.jsx)(R.Z,{className:"w-3 h-3"}),"Backup Ready"]});if("failed"===s.status)return(0,t.jsxs)(A.C,{variant:"destructive",className:"flex items-center gap-1",children:[(0,t.jsx)(ex.Z,{className:"w-3 h-3"}),"Backup Failed"]})}return(0,t.jsxs)(A.C,{variant:"outline",className:"flex items-center gap-1",children:[(0,t.jsx)(eh.Z,{className:"w-3 h-3"}),"No Backup"]})},N=(e,s)=>{p(a=>({...a,[e]:s})),n&&n(e,s),m({title:"Backup Completed!",description:"Event backup completed successfully."})},w=(e,s)=>{r&&r(e,s),m({title:"Event Archived!",description:"Event has been archived successfully."})};return 0===s.length?(0,t.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,t.jsx)(u.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,t.jsx)("p",{children:"Belum ada event yang dibuat. Buat event pertama Anda!"})]}):(0,t.jsx)("div",{className:"space-y-4",children:s.map(e=>(0,t.jsx)(P.Zb,{className:"border-wedding-gold/20",children:(0,t.jsx)(P.aY,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between space-y-4 md:space-y-0",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:e.name}),e.is_premium&&(0,t.jsx)(A.C,{className:"bg-wedding-gold text-white",children:"Premium"}),b(e)]}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground mb-2",children:["Tanggal: ",new Date(e.date).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})]}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground mb-3",children:["Kode Akses: ",(0,t.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded",children:e.access_code})]}),e.is_archived&&e.google_drive_backup_url&&(0,t.jsx)("div",{className:"mb-3 p-2 bg-green-50 border border-green-200 rounded-lg",children:(0,t.jsxs)("p",{className:"text-sm text-green-800 flex items-center gap-2",children:[(0,t.jsx)(W.Z,{className:"w-4 h-4"}),"Archived on ",e.archived_at?new Date(e.archived_at).toLocaleDateString("id-ID"):"Unknown",(0,t.jsxs)(S.z,{size:"sm",variant:"outline",onClick:()=>window.open(e.google_drive_backup_url,"_blank"),className:"ml-auto",children:[(0,t.jsx)(ed.Z,{className:"w-3 h-3 mr-1"}),"View Backup"]})]})}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsxs)(S.z,{size:"sm",variant:"outline",onClick:()=>{j((0,er.Lp)(e.id,e.access_code),"Link Share")},children:[(0,t.jsx)(em.Z,{className:"w-3 h-3 mr-1"})," Copy Link"]}),(0,t.jsxs)(S.z,{size:"sm",variant:"outline",onClick:()=>e.qr_code&&window.open(e.qr_code,"_blank"),children:[(0,t.jsx)(ec.Z,{className:"w-3 h-3 mr-1"})," QR Code"]}),(0,t.jsxs)(S.z,{size:"sm",variant:"outline",onClick:()=>window.open("/event/".concat(e.id),"_blank"),children:[(0,t.jsx)(ed.Z,{className:"w-3 h-3 mr-1"})," Lihat Event"]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[(0,t.jsxs)(S.z,{size:"sm",variant:"outline",onClick:()=>v(e.id),className:"flex items-center gap-2",children:[(0,t.jsx)(f.Z,{className:"w-4 h-4"}),x===e.id?"Hide Management":"Manage Event"]}),(0,t.jsxs)(S.z,{size:"sm",variant:"outline",onClick:()=>a(e),className:"min-h-[44px] min-w-[44px]",children:[(0,t.jsx)(eg.Z,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Edit Event"})]}),(0,t.jsxs)(S.z,{size:"sm",variant:"destructive",onClick:()=>{confirm("Yakin ingin menghapus event ini? Semua foto dan pesan akan ikut terhapus.")&&i(e.id)},className:"min-h-[44px] min-w-[44px]",children:[(0,t.jsx)(B.Z,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Hapus Event"})]})]})]}),x===e.id&&(0,t.jsxs)("div",{className:"border-t pt-4 space-y-6",children:[c&&(0,t.jsx)(ew,{event:e,onStatusChange:c,onRefresh:d}),(0,t.jsx)(eb,{eventId:e.id,eventName:e.name,isArchived:e.is_archived,onBackupComplete:s=>N(e.id,s),onArchiveComplete:s=>w(e.id,s)})]})]})})},e.id))})}var ek=a(2233);(0,ek.default)(()=>Promise.all([a.e(9458),a.e(603),a.e(582),a.e(5075)]).then(a.bind(a,5075)),{loadableGenerated:{webpack:()=>[5075]},ssr:!1});let eZ=(0,ek.default)(()=>Promise.all([a.e(9458),a.e(603),a.e(582),a.e(8435),a.e(3541)]).then(a.bind(a,7052)),{loadableGenerated:{webpack:()=>[7052]},ssr:!1}),eC=(0,ek.default)(()=>Promise.all([a.e(603),a.e(4161)]).then(a.bind(a,4348)).then(e=>({default:e.BackupStatusMonitor})),{loadableGenerated:{webpack:()=>[4348]},ssr:!1}),eE=(0,ek.default)(()=>Promise.all([a.e(7589),a.e(4269)]).then(a.bind(a,4269)).then(e=>({default:e.SmartNotificationManager})),{loadableGenerated:{webpack:()=>[4269]},ssr:!1}),eS=(0,ek.default)(()=>Promise.all([a.e(5678),a.e(9149),a.e(2523),a.e(8334),a.e(7031)]).then(a.bind(a,8921)).then(e=>e.ColorPaletteSwitcher),{loadableGenerated:{webpack:()=>[8921]},ssr:!1}),eD=(0,ek.default)(()=>Promise.all([a.e(5678),a.e(1563),a.e(1508)]).then(a.bind(a,1508)).then(e=>({default:e.AlertDashboard})),{loadableGenerated:{webpack:()=>[1508]},ssr:!1}),eA=(0,ek.default)(()=>Promise.all([a.e(5678),a.e(367),a.e(4898)]).then(a.bind(a,4898)).then(e=>({default:e.RealTimeMonitor})),{loadableGenerated:{webpack:()=>[4898]},ssr:!1});function eT(e){let{stats:s,events:a=[]}=e;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl p-4 md:p-6 text-white",children:[(0,t.jsx)("h1",{className:"text-lg md:text-2xl font-bold mb-2",children:"Selamat Datang di Admin Dashboard"}),(0,t.jsx)("p",{className:"text-sm md:text-base text-blue-100",children:"Kelola event dan galeri foto HafiPortrait Photography"})]}),(0,t.jsxs)(O,{columns:{mobile:1,tablet:2,desktop:4},children:[(0,t.jsx)(q,{title:"Total Event",value:(null==s?void 0:s.totalEvents)||0,icon:(0,t.jsx)(u.Z,{className:"h-5 w-5"}),subtitle:"Event aktif & selesai",trend:"+12%"}),(0,t.jsx)(q,{title:"Total Foto",value:(null==s?void 0:s.totalPhotos)||0,icon:(0,t.jsx)(F.Z,{className:"h-5 w-5"}),subtitle:"Semua galeri",trend:"+8%"}),(0,t.jsx)(q,{title:"Total Pesan",value:(null==s?void 0:s.totalMessages)||0,icon:(0,t.jsx)(_.Z,{className:"h-5 w-5"}),subtitle:"Dari pengunjung",trend:"+15%"}),(0,t.jsx)(q,{title:"Pengunjung",value:"2.4K",icon:(0,t.jsx)(L.Z,{className:"h-5 w-5"}),subtitle:"Bulan ini",trend:"+23%"})]}),(0,t.jsxs)(O,{columns:{mobile:2,tablet:4,desktop:4},children:[(0,t.jsx)(P.Zb,{className:"bg-green-50 border-green-200",children:(0,t.jsxs)(P.aY,{className:"p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:a.filter(e=>"active"===e.status).length}),(0,t.jsx)("div",{className:"text-sm text-green-700",children:"Event Aktif"})]})}),(0,t.jsx)(P.Zb,{className:"bg-blue-50 border-blue-200",children:(0,t.jsxs)(P.aY,{className:"p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:a.filter(e=>"completed"===e.status).length}),(0,t.jsx)("div",{className:"text-sm text-blue-700",children:"Event Selesai"})]})}),(0,t.jsx)(P.Zb,{className:"bg-yellow-50 border-yellow-200",children:(0,t.jsxs)(P.aY,{className:"p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:a.filter(e=>"draft"===e.status).length}),(0,t.jsx)("div",{className:"text-sm text-yellow-700",children:"Draft"})]})}),(0,t.jsx)(P.Zb,{className:"bg-purple-50 border-purple-200",children:(0,t.jsxs)(P.aY,{className:"p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:a.filter(e=>e.is_archived).length}),(0,t.jsx)("div",{className:"text-sm text-purple-700",children:"Diarsip"})]})})]}),(0,t.jsx)(M,{onCreateEvent:()=>{},onUploadPhoto:()=>{},onViewAnalytics:()=>{},onSystemCheck:()=>{}}),(0,t.jsxs)(P.Zb,{children:[(0,t.jsx)(P.Ol,{children:(0,t.jsx)(P.ll,{children:"Event Terbaru"})}),(0,t.jsx)(P.aY,{children:(0,t.jsx)("div",{className:"space-y-3",children:a.slice(0,5).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full ".concat("active"===e.status?"bg-green-500":"completed"===e.status?"bg-blue-500":"bg-gray-400")}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:new Date(e.date).toLocaleDateString("id-ID")})]})]}),(0,t.jsx)(A.C,{variant:"active"===e.status?"default":"secondary",children:e.status})]},e.id))})})]})]})}function eP(e){let{events:s=[],onCreateEvent:a,onEditEvent:l,onDeleteEvent:i,onShowQRCode:n,onUpdateEventStatus:r,onRefresh:c}=e;return console.log("EventsListSection props:",{onCreateEvent:a,events:s.length}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,t.jsx)("h1",{className:"text-xl md:text-2xl font-bold",children:"Daftar Event"}),(0,t.jsxs)(S.z,{onClick:()=>null==a?void 0:a(),className:"w-full sm:w-auto",children:[(0,t.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Event Baru"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Buat Event"})]})]}),(0,t.jsx)(Y,{stats:{totalEvents:s.length}}),(0,t.jsx)(ee,{events:s}),(0,t.jsx)(ey,{events:s,onEdit:l||(()=>{}),onDelete:i||(()=>{}),onBackupComplete:(e,s)=>{console.log("Backup completed for event:",e,s)},onArchiveComplete:(e,s)=>{console.log("Archive completed for event:",e,s)},onStatusChange:(e,s)=>{r&&r(e,s)},onRefresh:()=>{c&&c()}})]})}function ez(e){let{homepagePhotos:s=[],isLoading:a=!1,onUpload:i,onDelete:n,onPhotoClick:r}=e,[c,d]=(0,l.useState)(!1);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,t.jsx)("h1",{className:"text-xl md:text-2xl font-bold",children:"Galeri Homepage"}),(0,t.jsxs)(S.z,{onClick:()=>d(!0),className:"w-full sm:w-auto",children:[(0,t.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Upload Foto"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Upload"})]})]}),c&&(0,t.jsxs)(P.Zb,{className:"border-blue-200",children:[(0,t.jsx)(P.Ol,{children:(0,t.jsxs)(P.ll,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(x.Z,{className:"w-5 h-5 text-blue-600"}),"Upload Foto Homepage"]})}),(0,t.jsxs)(P.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(z._,{htmlFor:"homepage-photo-input",children:"Pilih Foto"}),(0,t.jsx)(D.I,{id:"homepage-photo-input",type:"file",multiple:!0,accept:"image/*",onChange:e=>{let s=e.target.files;s&&i&&(i(s),d(!1))},className:"mt-1"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Ukuran maksimal 10MB per file. Format: JPG, PNG, GIF"})]}),(0,t.jsx)("div",{className:"flex flex-col sm:flex-row gap-2",children:(0,t.jsx)(S.z,{onClick:()=>d(!1),variant:"outline",className:"w-full sm:w-auto",children:"Batal"})})]})]}),(0,t.jsx)(P.Zb,{children:(0,t.jsx)(P.aY,{className:"p-6",children:a?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,t.jsx)("p",{className:"mt-2 text-gray-500",children:"Memuat foto..."})]}):s.length>0?(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:s.map((e,s)=>(0,t.jsxs)("div",{className:"relative group cursor-pointer",onClick:()=>null==r?void 0:r(s),children:[(0,t.jsx)("img",{src:e.url,alt:e.original_name,className:"w-full h-32 object-cover rounded-lg"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/50 transition-all rounded-lg flex items-center justify-center",children:(0,t.jsx)(S.z,{size:"sm",variant:"destructive",className:"opacity-0 group-hover:opacity-100 h-8 w-8 p-0",onClick:s=>{s.stopPropagation(),confirm("Yakin ingin menghapus foto ini?")&&(null==n||n(e.id))},children:(0,t.jsx)(B.Z,{className:"w-3 h-3"})})})]},e.id))}):(0,t.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,t.jsx)(g.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,t.jsx)("p",{children:"Belum ada foto di galeri homepage. Upload foto pertama Anda!"})]})})})]})}function eF(e){let{slideshowPhotos:s=[],homepagePhotos:a=[],isLoading:l=!1,onAddToSlideshow:i,onRemoveFromSlideshow:n,isAddingToSlideshow:r=!1,isPanelOpen:c=!1,onPanelToggle:d}=e;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h1",{className:"text-xl md:text-2xl font-bold",children:"Hero Slideshow"}),(0,t.jsx)("p",{className:"text-sm md:text-base text-gray-600",children:"Kelola foto untuk slideshow di homepage"})]}),(0,t.jsxs)(S.z,{onClick:()=>null==d?void 0:d(!0),className:"bg-blue-500 hover:bg-blue-600 w-full sm:w-auto",children:[(0,t.jsx)(f.Z,{className:"w-4 h-4 mr-2"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Kelola Slideshow"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Kelola"})]})]}),(0,t.jsxs)(P.Zb,{children:[(0,t.jsx)(P.Ol,{children:(0,t.jsx)(P.ll,{children:"Foto Slideshow Aktif"})}),(0,t.jsx)(P.aY,{children:l?(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:Array.from({length:4}).map((e,s)=>(0,t.jsx)("div",{className:"aspect-square bg-gray-200 rounded-lg animate-pulse"},s))}):s.length>0?(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:s.map((e,s)=>(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)("img",{src:e.url,alt:e.original_name,className:"w-full aspect-square object-cover rounded-lg"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center",children:(0,t.jsx)(S.z,{size:"sm",variant:"destructive",onClick:()=>null==n?void 0:n(e.id),className:"h-8 w-8 p-0",children:(0,t.jsx)(B.Z,{className:"w-3 h-3"})})}),(0,t.jsxs)("div",{className:"absolute top-2 left-2 bg-black/70 text-white text-xs px-2 py-1 rounded",children:["#",s+1]})]},e.id))}):(0,t.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,t.jsx)(I.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Belum ada foto slideshow"}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:"Pilih foto dari galeri homepage di bawah"})]})})]}),(0,t.jsx)(P.Zb,{className:"bg-blue-50 border-blue-200",children:(0,t.jsx)(P.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)(h.Z,{className:"h-5 w-5 text-blue-600 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-blue-900",children:"Tentang Hero Slideshow"}),(0,t.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:"Foto-foto ini akan ditampilkan sebagai slideshow di halaman utama website. Urutan foto akan sesuai dengan urutan yang ditampilkan di atas."})]})]})})}),(0,t.jsx)(Q,{isOpen:c,onClose:()=>null==d?void 0:d(!1),slideshowPhotos:s,homepagePhotos:a,onAddToSlideshow:i,onRemoveFromSlideshow:n,isAddingToSlideshow:r})]})}function e_(e){var s;let{events:a=[],eventPhotos:i=[],selectedEventForPhotos:n="",isLoading:r=!1,onEventSelect:c,onPhotoUpload:d,onPhotoClick:o,onPhotoDelete:m}=e,[u,h]=(0,l.useState)("Official"),[g,p]=(0,l.useState)(!1),[j,v]=(0,l.useState)({}),[f,b]=(0,l.useState)(!1),N=async e=>{let s=Array.from(e.target.files||[]);if(0===s.length)return;let a=s.filter(e=>e.size>10485760);a.length>0&&alert("".concat(a.length," file(s) melebihi ukuran maksimal 10MB dan akan dilewati."));let t=s.filter(e=>e.size<=10485760);if(0===t.length){alert("Tidak ada file yang valid untuk diupload.");return}b(!0);for(let e=0;e<t.length;e++){let s=t[e],a="".concat(s.name,"-").concat(e);try{v(e=>({...e,[a]:0}));let l=setInterval(()=>{v(e=>({...e,[a]:Math.min((e[a]||0)+20,90)}))},200);await (null==d?void 0:d(s,u)),clearInterval(l),v(e=>({...e,[a]:100})),e<t.length-1&&await new Promise(e=>setTimeout(e,500))}catch(e){console.error("Failed to upload ".concat(s.name,":"),e),v(e=>({...e,[a]:-1}))}}setTimeout(()=>{v({}),b(!1),p(!1)},1500)};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-4",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h1",{className:"text-xl md:text-2xl font-bold",children:"Foto Event"}),(0,t.jsx)("p",{className:"text-sm md:text-base text-gray-600",children:"Upload dan kelola foto untuk event tertentu"})]})}),(0,t.jsxs)(P.Zb,{children:[(0,t.jsx)(P.Ol,{children:(0,t.jsx)(P.ll,{children:"Pilih Event"})}),(0,t.jsx)(P.aY,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)(z._,{htmlFor:"event-select",children:"Event"}),(0,t.jsxs)("select",{id:"event-select",value:n,onChange:e=>null==c?void 0:c(e.target.value),className:"w-full px-3 py-2 border rounded-md",children:[(0,t.jsx)("option",{value:"",children:"Pilih Event"}),a.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name," - ",new Date(e.date).toLocaleDateString("id-ID")]},e.id))]})]}),n&&(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsxs)(S.z,{onClick:()=>p(!0),className:"w-full sm:w-auto",children:[(0,t.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Upload Foto"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Upload"})]})})]})})]}),g&&n&&(0,t.jsxs)(P.Zb,{className:"border-blue-200",children:[(0,t.jsx)(P.Ol,{children:(0,t.jsxs)(P.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(x.Z,{className:"w-5 h-5 text-blue-600"}),"Upload Foto Event"]})}),(0,t.jsxs)(P.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(z._,{htmlFor:"album-select",children:"Album"}),(0,t.jsxs)("select",{id:"album-select",value:u,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border rounded-md mt-1",children:[(0,t.jsx)("option",{value:"Official",children:"Official"}),(0,t.jsx)("option",{value:"Tamu",children:"Tamu"}),(0,t.jsx)("option",{value:"Bridesmaid",children:"Bridesmaid"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(z._,{htmlFor:"event-photo-input",children:"Pilih Foto"}),(0,t.jsx)(D.I,{id:"event-photo-input",type:"file",multiple:!0,accept:"image/*",onChange:N,className:"mt-1",disabled:f}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Ukuran maksimal 10MB per file. Format: JPG, PNG, GIF. Bisa pilih multiple files."})]}),Object.keys(j).length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(z._,{children:"Progress Upload:"}),(0,t.jsx)("div",{className:"max-h-32 overflow-y-auto space-y-2",children:Object.entries(j).map(e=>{let[s,a]=e,l=s.split("-").slice(0,-1).join("-");return(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"truncate font-medium",children:l}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(-1===a?"bg-red-500":100===a?"bg-green-500":"bg-blue-500"),style:{width:"".concat(Math.max(0,a),"%")}})})]}),(0,t.jsx)("div",{className:"text-xs text-gray-500 min-w-0",children:-1===a?"Error":100===a?"Done":"".concat(a,"%")})]},s)})})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,t.jsx)(S.z,{onClick:()=>p(!1),variant:"outline",disabled:f,className:"w-full sm:w-auto",children:f?"Uploading...":"Batal"}),f&&(0,t.jsxs)("div",{className:"flex items-center justify-center sm:justify-start gap-2 text-sm text-blue-600",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),"Mengupload foto..."]})]})]})]}),(0,t.jsxs)(P.Zb,{children:[(0,t.jsx)(P.Ol,{children:(0,t.jsx)(P.ll,{children:n?"Foto Event: ".concat((null===(s=a.find(e=>e.id===n))||void 0===s?void 0:s.name)||"Unknown"):"Foto Event"})}),(0,t.jsx)(P.aY,{children:n?r?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,t.jsx)("p",{className:"mt-2 text-gray-500",children:"Memuat foto..."})]}):i.length>0?(0,t.jsx)("div",{className:"space-y-6",children:["Official","Tamu","Bridesmaid"].map(e=>{let s=i.filter(s=>s.album_name===e);return 0===s.length?null:(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"text-lg font-semibold mb-4 text-blue-600 flex items-center gap-2",children:[(0,t.jsx)(F.Z,{className:"w-5 h-5"}),"Album ",e," (",s.length," foto)"]}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:s.map((e,a)=>(0,t.jsxs)("div",{className:"relative group cursor-pointer border rounded-lg overflow-hidden hover:shadow-lg transition-shadow",onClick:()=>null==o?void 0:o(a,s),children:[(0,t.jsx)("img",{src:e.url,alt:e.original_name,className:"w-full aspect-square object-cover"}),(0,t.jsxs)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/50 transition-all",children:[(0,t.jsx)("div",{className:"absolute bottom-2 left-2 right-2",children:(0,t.jsx)("div",{className:"bg-black/70 text-white text-xs px-2 py-1 rounded truncate",children:e.uploader_name||"Admin"})}),(0,t.jsx)("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,t.jsx)(S.z,{size:"sm",variant:"destructive",className:"h-8 w-8 p-0",onClick:s=>{s.stopPropagation(),confirm("Yakin ingin menghapus foto ini secara permanen?")&&(null==m||m(e.id))},children:(0,t.jsx)(B.Z,{className:"w-3 h-3"})})})]})]},e.id))})]},e)})}):(0,t.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,t.jsx)(F.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,t.jsx)("p",{children:"Belum ada foto di event ini"}),(0,t.jsxs)(S.z,{onClick:()=>p(!0),className:"mt-4 w-full sm:w-auto",variant:"outline",children:[(0,t.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Upload Foto Pertama"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Upload"})]})]}):(0,t.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,t.jsx)(F.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,t.jsx)("p",{children:"Pilih event untuk melihat dan mengelola foto-fotonya"})]})})]})]})}function eL(){return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl md:text-2xl font-bold",children:"System Monitor"}),(0,t.jsx)("p",{className:"text-sm md:text-base text-gray-600",children:"Comprehensive system monitoring with real-time metrics, health checks, performance analysis, DSLR status, and security monitoring"})]}),(0,t.jsx)(eA,{})]})}function eB(){return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl md:text-2xl font-bold",children:"Alert Management"}),(0,t.jsx)("p",{className:"text-sm md:text-base text-gray-600",children:"Kelola alerts dan notifikasi sistem"})]}),(0,t.jsx)(eD,{})]})}function eI(){let[e,s]=(0,l.useState)("realtime");return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h1",{className:"text-xl md:text-2xl font-bold",children:"Advanced Monitoring"}),(0,t.jsx)("p",{className:"text-sm md:text-base text-gray-600",children:"Monitoring sistem lengkap dengan real-time metrics dan alert management"})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[(0,t.jsxs)(S.z,{variant:"realtime"===e?"default":"outline",size:"sm",onClick:()=>s("realtime"),className:"w-full sm:w-auto",children:[(0,t.jsx)(I.Z,{className:"h-4 w-4 mr-2"}),"Real-time"]}),(0,t.jsxs)(S.z,{variant:"alerts"===e?"default":"outline",size:"sm",onClick:()=>s("alerts"),className:"w-full sm:w-auto",children:[(0,t.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Alerts"]})]})]}),"realtime"===e&&(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)(P.Zb,{children:[(0,t.jsx)(P.Ol,{children:(0,t.jsxs)(P.ll,{className:"flex items-center space-x-2",children:[(0,t.jsx)(I.Z,{className:"h-5 w-5 text-blue-500"}),(0,t.jsx)("span",{children:"Real-time System Metrics"})]})}),(0,t.jsx)(P.aY,{children:(0,t.jsx)(eA,{})})]})}),"alerts"===e&&(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)(P.Zb,{children:[(0,t.jsx)(P.Ol,{children:(0,t.jsxs)(P.ll,{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.Z,{className:"h-5 w-5 text-red-500"}),(0,t.jsx)("span",{children:"Alert Dashboard"})]})}),(0,t.jsx)(P.aY,{children:(0,t.jsx)(eD,{})})]})})]})}function eO(){return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h1",{className:"text-xl md:text-2xl font-bold",children:"DSLR Monitor"}),(0,t.jsx)(eZ,{})]})}function eq(){return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h1",{className:"text-xl md:text-2xl font-bold",children:"Backup Status"}),(0,t.jsx)(eC,{})]})}function eU(e){let{events:s=[]}=e;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h1",{className:"text-xl md:text-2xl font-bold",children:"Notifications"}),(0,t.jsx)(eE,{events:s})]})}function eM(){return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h1",{className:"text-xl md:text-2xl font-bold",children:"Tema & Tampilan"}),(0,t.jsxs)(P.Zb,{children:[(0,t.jsx)(P.Ol,{children:(0,t.jsx)(P.ll,{children:"Pengaturan Tema"})}),(0,t.jsx)(P.aY,{children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-medium",children:"Pilih Tema Warna"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Ubah skema warna website"})]}),(0,t.jsx)("div",{className:"w-full sm:w-auto",children:(0,t.jsx)(eS,{})})]})})]})]})}function eK(e){let{user:s}=e;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h1",{className:"text-xl md:text-2xl font-bold",children:"Profile Settings"}),(0,t.jsxs)(P.Zb,{children:[(0,t.jsx)(P.Ol,{children:(0,t.jsx)(P.ll,{children:"Informasi Profile"})}),(0,t.jsx)(P.aY,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Nama Lengkap"}),(0,t.jsx)("p",{className:"text-gray-600",children:(null==s?void 0:s.full_name)||"Admin"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Email"}),(0,t.jsx)("p",{className:"text-gray-600",children:(null==s?void 0:s.email)||"admin@hafiportrait.com"})]})]})})]})]})}function eG(e){let{onCreateEvent:s,onEventSubmit:a,isCreating:l=!1,onCancel:i}=e;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h1",{className:"text-xl md:text-2xl font-bold",children:"Buat Event Baru"}),(0,t.jsx)("p",{className:"text-sm md:text-base text-gray-600",children:"Tambahkan event photography baru"})]}),(0,t.jsxs)(S.z,{onClick:()=>null==i?void 0:i(),variant:"outline",className:"w-full sm:w-auto",children:[(0,t.jsx)("span",{className:"hidden sm:inline",children:"Kembali ke Daftar"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Kembali"})]})]}),(0,t.jsxs)(P.Zb,{children:[(0,t.jsx)(P.Ol,{children:(0,t.jsx)(P.ll,{children:"Form Event Baru"})}),(0,t.jsx)(P.aY,{className:"p-6",children:(0,t.jsx)(eu,{editingEvent:null,createdEvent:null,isSaving:l,onSave:e=>null==a?void 0:a(e),onCancel:()=>null==i?void 0:i()})})]})]})}function eR(e){let{events:s=[]}=e;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h1",{className:"text-xl md:text-2xl font-bold",children:"Status Manager"}),(0,t.jsx)(ee,{events:s}),(0,t.jsx)(et,{events:s})]})}var eQ=a(509);function eY(e){let{qrCodeUrl:s,shareableLink:a,eventName:i}=e,[n,r]=(0,l.useState)(!1);(0,l.useEffect)(()=>{if(n){let e=setTimeout(()=>r(!1),2e3);return()=>clearTimeout(e)}},[n]);let c=async()=>{a&&await (0,en.vQ)(a)&&r(!0)};return s?(0,t.jsx)(P.Zb,{className:"w-full max-w-sm mx-auto",children:(0,t.jsx)(P.aY,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("div",{className:"relative w-full aspect-square mb-4",children:(0,t.jsx)("img",{src:s,alt:"QR Code untuk ".concat(i),className:"w-full h-full object-contain"})}),(0,t.jsxs)("div",{className:"w-full flex flex-col gap-2",children:[(0,t.jsxs)(S.z,{onClick:c,variant:"outline",className:"w-full flex items-center justify-center gap-2",children:[(0,t.jsx)(em.Z,{className:"w-4 h-4"}),n?"Link Tersalin!":"Salin Link"]}),(0,t.jsxs)(S.z,{onClick:()=>{if(s){let e=document.createElement("a");e.href=s,e.download="".concat(i.replace(/\s+/g,"-"),"-qrcode.png"),document.body.appendChild(e),e.click(),document.body.removeChild(e)}},variant:"outline",className:"w-full flex items-center justify-center gap-2",children:[(0,t.jsx)(ef.Z,{className:"w-4 h-4"}),"Unduh QR Code"]})]})]})})}):(0,t.jsx)(P.Zb,{className:"w-full max-w-sm mx-auto",children:(0,t.jsx)(P.aY,{className:"p-6 text-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-48 bg-gray-100 rounded-lg",children:[(0,t.jsx)(ec.Z,{className:"w-12 h-12 text-gray-400 mb-2"}),(0,t.jsx)("p",{className:"text-gray-500",children:"QR Code tidak tersedia"})]})})})}function eH(e){let{event:s,isOpen:a,onClose:l}=e;return s?(0,t.jsx)(eQ.Vq,{open:a,onOpenChange:l,children:(0,t.jsxs)(eQ.cZ,{className:"sm:max-w-md",children:[(0,t.jsx)(eQ.fK,{children:(0,t.jsxs)(eQ.$N,{children:["QR Code untuk ",s.name]})}),(0,t.jsx)("div",{className:"py-4",children:(0,t.jsx)(eY,{qrCodeUrl:s.qr_code,shareableLink:s.shareable_link,eventName:s.name})})]})}):null}var eJ=a(3499),eV=a(753);function eW(){let e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/admin/login",s=function(){let[e,s]=(0,l.useState)({user:null,isLoading:!0,isAuthenticated:!1,error:null}),a=(0,d.useRouter)(),t=(0,l.useCallback)(()=>window.location&&window.location.origin?window.location.origin:"http://147.251.255.227:3002",[]),i=(0,l.useCallback)(async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,l=t();for(let t=0;t<=a;t++)try{let a=new AbortController,t=setTimeout(()=>a.abort(),1e4),i=await fetch("".concat(l).concat(e),{...s,credentials:"include",headers:{"Content-Type":"application/json",...s.headers},signal:a.signal});return clearTimeout(t),i}catch(e){if(console.warn("API request attempt ".concat(t+1," failed:"),e),t===a)throw e;await new Promise(e=>setTimeout(e,500*Math.pow(2,t)))}throw Error("All retry attempts failed")},[t]),n=(0,l.useCallback)(async()=>{try{console.log("\uD83D\uDD0D checkAuth: Starting auth check..."),s(e=>({...e,isLoading:!0,error:null}));let e=await i("/api/auth/me",{method:"GET"});if(console.log("\uD83D\uDD0D checkAuth: Response status:",e.status),fetch("/api/admin/session/events",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({session_id:"current",user_id:0,event_type:"auth_check",metadata:{timestamp:new Date().toISOString()}})}).catch(()=>{}),e.ok){let a=await e.json();if(a.success&&a.user)s(e=>({...e,user:a.user,isAuthenticated:!0,isLoading:!1}));else throw Error("Invalid response structure")}else if(401===e.status)s(e=>({...e,user:null,isAuthenticated:!1,isLoading:!1,error:null}));else throw Error("HTTP ".concat(e.status))}catch(e){console.warn("Auth check failed:",e),s(e=>({...e,user:null,isAuthenticated:!1,isLoading:!1,error:null}))}},[i]),r=(0,l.useCallback)(async(e,a)=>{if(!(null==e?void 0:e.trim())||!(null==a?void 0:a.trim()))return s(e=>({...e,error:"Username and password are required",isLoading:!1})),!1;try{s(e=>({...e,isLoading:!0,error:null}));let t=await i("/api/auth/login",{method:"POST",body:JSON.stringify({username:e.trim(),password:a.trim()})}),l=await t.json();if(t.ok&&l.success)return s(e=>({...e,user:l.user,isAuthenticated:!0,isLoading:!1,error:null})),!0;{let e=l.error||"Login failed (".concat(t.status,")");return s(s=>({...s,user:null,isAuthenticated:!1,error:e,isLoading:!1})),!1}}catch(a){console.error("Login error:",a);let e=a instanceof Error&&"AbortError"===a.name?"Login timeout. Please check your connection.":"Network error. Please try again.";return s(s=>({...s,user:null,isAuthenticated:!1,error:e,isLoading:!1})),!1}},[i]),c=(0,l.useCallback)(async()=>{try{s(e=>({...e,isLoading:!0,error:null}));try{await i("/api/auth/logout",{method:"POST"},1)}catch(e){console.warn("Logout API call failed, proceeding with local logout:",e)}s({user:null,isAuthenticated:!1,isLoading:!1,error:null}),localStorage.removeItem("auth_cache"),sessionStorage.removeItem("auth_cache"),a.push("/admin/login")}catch(e){console.error("Logout error:",e),s({user:null,isAuthenticated:!1,isLoading:!1,error:null}),a.push("/admin/login")}},[a,i]),o=(0,l.useCallback)(()=>{s(e=>({...e,error:null}))},[]);return(0,l.useEffect)(()=>{n()},[]),(0,l.useEffect)(()=>{let a=setTimeout(()=>{e.isLoading&&(console.warn("Auth check timeout, setting loading to false"),s(e=>({...e,isLoading:!1,isAuthenticated:!1,error:null})))},5e3);return()=>clearTimeout(a)},[e.isLoading]),{...e,login:r,logout:c,checkAuth:n,clearError:o}}(),a=(0,d.useRouter)();return(0,l.useEffect)(()=>{if(!s.isLoading&&!s.isAuthenticated){let s=window.location&&window.location.pathname?window.location.pathname:"";if(s===e)return;let t=s&&s!==e?"".concat(e,"?redirect=").concat(encodeURIComponent(s)):e;console.log("useRequireAuth: Redirecting to login, current path:",s),a.push(t)}},[s.isLoading,s.isAuthenticated,a,e]),s}(),{toast:s}=(0,o.pm)(),a=(0,i.NL)(),[m,u]=(0,l.useState)("dashboard"),[x,h]=(0,l.useState)(!1),[g,p]=(0,l.useState)(null),[j,v]=(0,l.useState)(null),[f,b]=(0,l.useState)(!1),[N,w]=(0,l.useState)(null),[y,k]=(0,l.useState)(!1),[Z,C]=(0,l.useState)(null),[E,S]=(0,l.useState)(!1),[D,A]=(0,l.useState)(!1),[P,z]=(0,l.useState)(null),[F,_]=(0,l.useState)([]),{data:L,isLoading:B}=(0,n.a)({queryKey:["/api/admin/stats"],queryFn:async()=>(await (0,c.N)("GET","/api/admin/stats")).json(),staleTime:3e5,refetchOnWindowFocus:!1}),{data:I=[],isLoading:O}=(0,n.a)({queryKey:["/api/admin/events"],queryFn:async()=>(await (0,c.N)("GET","/api/admin/events")).json(),staleTime:18e4,refetchOnWindowFocus:!1}),{data:q=[],isLoading:U}=(0,n.a)({queryKey:["/api/admin/photos/homepage"],queryFn:async()=>(await (0,c.N)("GET","/api/admin/photos/homepage")).json()}),{data:M=[],isLoading:K}=(0,n.a)({queryKey:["/api/admin/slideshow"],queryFn:async()=>(await (0,c.N)("GET","/api/admin/slideshow")).json(),staleTime:3e5}),[G,R]=(0,l.useState)(""),{data:Q=[],isLoading:Y}=(0,n.a)({queryKey:["/api/admin/photos/event",G],queryFn:async()=>G?(await (0,c.N)("GET","/api/events/".concat(G,"/photos"))).json():[],enabled:!!G}),H=(0,r.D)({mutationFn:async e=>{let s=await (0,c.N)("POST","/api/admin/events",e);if(!s.ok)throw Error("Failed to create event");return s.json()},onSuccess:e=>{a.invalidateQueries({queryKey:["/api/admin/events"]}),a.invalidateQueries({queryKey:["/api/admin/stats"]}),v(e),h(!1),s({title:"✅ Event Berhasil Dibuat!",description:'Event "'.concat(e.name,'" telah ditambahkan.')}),w(e),b(!0),u("events-list")}}),J=(0,r.D)({mutationFn:async e=>{let{eventId:s,eventData:a}=e,t=await (0,c.N)("PUT","/api/admin/events/".concat(s),a);if(!t.ok)throw Error("Failed to update event");return t.json()},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/events"]}),a.invalidateQueries({queryKey:["/api/admin/stats"]}),h(!1),p(null),s({title:"✅ Event Berhasil Diupdate!",description:"Perubahan telah disimpan."})}}),V=(0,r.D)({mutationFn:async e=>{let s=await (0,c.N)("DELETE","/api/admin/events/".concat(e));if(!s.ok)throw Error("Failed to delete event");return s.json()},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/events"]}),a.invalidateQueries({queryKey:["/api/admin/stats"]}),s({title:"✅ Event Berhasil Dihapus!",description:"Event telah dihapus dari sistem."})}}),W=(0,r.D)({mutationFn:async e=>{let{eventId:s,status:a}=e,t=await (0,c.N)("PUT","/api/admin/events/".concat(s,"/status"),{status:a});if(!t.ok)throw Error("Failed to update event status");return t.json()},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/events"]}),s({title:"✅ Status Event Diupdate!",description:"Status event berhasil diubah."})}}),X=(0,r.D)({mutationFn:async e=>{let s=new FormData;return s.append("file",e),(await (0,c.N)("POST","/api/admin/photos/homepage",s)).json()},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/photos/homepage"]}),a.invalidateQueries({queryKey:["/api/admin/stats"]}),s({title:"✅ Foto Berhasil Diupload!",description:"Foto telah ditambahkan ke galeri homepage."})},onError:()=>{s({title:"❌ Gagal Upload Foto",description:"Terjadi kesalahan saat mengupload foto.",variant:"destructive"})}}),$=(0,r.D)({mutationFn:async e=>{let s=await (0,c.N)("DELETE","/api/admin/photos/".concat(e));if(!s.ok)throw Error((await s.json().catch(()=>({}))).message||"Failed to delete photo");return s.json()},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/photos/homepage"]}),a.invalidateQueries({queryKey:["/api/admin/stats"]}),s({title:"✅ Foto Berhasil Dihapus!",description:"Foto telah dihapus dari sistem."})},onError:()=>{s({title:"❌ Gagal Menghapus Foto",description:"Terjadi kesalahan saat menghapus foto.",variant:"destructive"})}}),ee=(0,r.D)({mutationFn:async e=>{console.log("Adding photo to slideshow:",e);let s=await (0,c.N)("POST","/api/admin/slideshow",{photoId:e});if(console.log("Response status:",s.status),!s.ok){let e=await s.json().catch(()=>({error:"Unknown error"}));throw console.error("Error response:",e),Error(e.error||"Failed to add photo to slideshow")}let a=await s.json();return console.log("Success response:",a),a},onSuccess:e=>{console.log("Successfully added to slideshow:",e),a.invalidateQueries({queryKey:["/api/admin/slideshow"]}),a.invalidateQueries({queryKey:["/api/admin/photos/homepage"]}),s({title:"✅ Berhasil!",description:"Foto berhasil ditambahkan ke slideshow"})},onError:e=>{console.error("Error adding to slideshow:",e),s({title:"❌ Gagal",description:e.message||"Gagal menambahkan foto ke slideshow",variant:"destructive"})}}),es=(0,r.D)({mutationFn:async e=>(await (0,c.N)("DELETE","/api/admin/slideshow?photoId=".concat(e))).json(),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/slideshow"]}),s({title:"✅ Berhasil!",description:"Foto berhasil dihapus dari slideshow"})},onError:e=>{s({title:"❌ Gagal",description:e.message||"Gagal menghapus foto dari slideshow",variant:"destructive"})}}),ea=(0,r.D)({mutationFn:async e=>{let s=await (0,c.N)("DELETE","/api/admin/photos/event/".concat(e));if(!s.ok)throw Error((await s.json().catch(()=>({message:"Delete failed"}))).message||"Delete failed");return s.json()},onSuccess:(e,t)=>{a.invalidateQueries({queryKey:["/api/admin/photos/event",G]}),a.invalidateQueries({queryKey:["/api/admin/stats"]}),a.invalidateQueries({queryKey:["/api/events",G,"photos"]}),a.invalidateQueries({queryKey:["/api/events",G]}),a.refetchQueries({queryKey:["/api/events",G,"photos"]}),window.dispatchEvent(new CustomEvent("photoDeleted",{detail:{eventId:G,photoId:t}})),s({title:"✅ Foto Event Berhasil Dihapus!",description:"Foto telah dihapus dari galeri event."})},onError:(e,t)=>{a.refetchQueries({queryKey:["/api/admin/photos/event",G]}),s({title:"❌ Gagal Menghapus Foto Event",description:"Gagal menghapus foto: ".concat(e.message),variant:"destructive"})}}),et=(0,r.D)({mutationFn:async e=>{let{file:s,albumName:a}=e,t=new FormData;t.append("file",s),t.append("uploaderName","Admin"),t.append("albumName",a);let l=await (0,c.N)("POST","/api/events/".concat(G,"/photos"),t);if(!l.ok)throw Error((await l.json().catch(()=>({message:"Upload failed"}))).message||"Upload failed");return l.json()},onSuccess:(e,t)=>{a.invalidateQueries({queryKey:["/api/admin/photos/event",G]}),a.invalidateQueries({queryKey:["/api/admin/stats"]}),a.invalidateQueries({queryKey:["/api/events",G,"photos"]}),a.invalidateQueries({queryKey:["/api/events",G]}),a.refetchQueries({queryKey:["/api/events",G,"photos"]}),window.dispatchEvent(new CustomEvent("photoUploaded",{detail:{eventId:G,fileName:t.file.name}})),s({title:"✅ Foto Event Berhasil Diupload!",description:'Foto "'.concat(t.file.name,'" telah ditambahkan ke album ').concat(t.albumName,".")})},onError:(e,a)=>{s({title:"❌ Gagal Upload Foto Event",description:'Gagal mengupload "'.concat(a.file.name,'": ').concat(e.message),variant:"destructive"})}}),el=async()=>{try{await (0,c.N)("POST","/api/auth/logout"),a.clear(),window.location.href="/admin/login"}catch(e){console.error("Logout error:",e)}},ei=async e=>{g?J.mutate({eventId:g.id,eventData:e}):H.mutate(e)},en={stats:L,events:I,onCreateEvent:()=>{u("events-create")},onEditEvent:e=>{p(e),v(null),h(!0)},onDeleteEvent:e=>{let s=I.find(s=>s.id===e);confirm('Yakin ingin menghapus event "'.concat(null==s?void 0:s.name,'"? Semua foto dan pesan akan ikut terhapus.'))&&V.mutate(e)},onShowQRCode:e=>{w(e),b(!0)},onUpdateEventStatus:(e,s)=>W.mutate({eventId:e,status:s}),onEventSubmit:ei,isCreating:H.isPending,onCancel:()=>u("events-list"),onRefresh:()=>{a.invalidateQueries({queryKey:["/api/admin/events"]}),a.invalidateQueries({queryKey:["/api/admin/stats"]})}},er={homepagePhotos:q,isLoading:U,onUpload:e=>{Array.from(e).forEach(e=>{if(e.size>10485760){s({title:"File Terlalu Besar",description:"Ukuran file maksimal 10MB.",variant:"destructive"});return}X.mutate(e)})},onDelete:e=>$.mutate(e),onPhotoClick:e=>{C(e),k(!0)}},ec={slideshowPhotos:M,homepagePhotos:q,isLoading:K,onAddToSlideshow:e=>ee.mutate(e),onRemoveFromSlideshow:e=>es.mutate(e),isAddingToSlideshow:ee.isPending,isPanelOpen:E,onPanelToggle:S},ed={events:I,eventPhotos:Q,selectedEventForPhotos:G,isLoading:Y,onEventSelect:R,onPhotoUpload:(e,s)=>et.mutate({file:e,albumName:s}),onPhotoClick:(e,s)=>{if(!s||0===s.length||e<0||e>=s.length){console.warn("Invalid photo data for lightbox:",{index:e,albumPhotosLength:null==s?void 0:s.length});return}let a=s.filter(e=>e&&e.id&&e.url);if(0===a.length){console.warn("No valid photos found for lightbox");return}let t=Math.min(e,a.length-1);_(a),z(t),A(!0)},onPhotoDelete:e=>ea.mutate(e)};return e.isLoading?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading dashboard..."})]})}):e.isAuthenticated?e.user?(0,t.jsxs)(eJ.VW,{children:[(0,t.jsx)(T,{activeSection:m,onSectionChange:u,user:e.user,onLogout:el,stats:L,children:(()=>{switch(m){case"dashboard":default:return(0,t.jsx)(eT,{...en});case"events-list":return(0,t.jsx)(eP,{...en});case"events-create":return(0,t.jsx)(eG,{...en});case"events-status":return(0,t.jsx)(eR,{...en});case"media-homepage":return(0,t.jsx)(ez,{...er});case"media-slideshow":return(0,t.jsx)(eF,{...ec});case"media-events":return(0,t.jsx)(e_,{...ed});case"system-monitor":return(0,t.jsx)(eL,{});case"system-alerts":return(0,t.jsx)(eB,{});case"system-advanced":return(0,t.jsx)(eI,{});case"system-dslr":return(0,t.jsx)(eO,{});case"system-backup":return(0,t.jsx)(eq,{});case"system-notifications":return(0,t.jsx)(eU,{...en});case"settings-theme":return(0,t.jsx)(eM,{});case"settings-profile":return(0,t.jsx)(eK,{user:e.user})}})()}),x&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,t.jsxs)("div",{className:"flex items-center justify-center min-h-screen p-4",children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50",onClick:()=>h(!1)}),(0,t.jsx)("div",{className:"relative bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:(0,t.jsx)(eu,{editingEvent:g,createdEvent:j,isSaving:H.isPending||J.isPending,onSave:ei,onCancel:()=>{h(!1),p(null),v(null)}})})]})}),y&&null!==Z&&(0,t.jsx)(eV.Z,{photos:q,currentIndex:Z,onClose:()=>k(!1),onDelete:e=>{confirm("Yakin ingin menghapus foto ini secara permanen?")&&$.mutate(e,{onSuccess:()=>{k(!1)}})},onLike:e=>{console.log("Like photo:",e)},onUnlike:e=>{console.log("Unlike photo:",e)}}),D&&null!==P&&F.length>0&&P<F.length&&F[P]&&(0,t.jsx)("div",{children:(0,t.jsx)(eV.Z,{photos:F.filter(e=>e&&e.id),currentIndex:Math.min(P,F.length-1),onClose:()=>{setTimeout(()=>{A(!1),z(null),_([])},0)},onDelete:e=>{if(confirm("Yakin ingin menghapus foto event ini secara permanen?")){let s=[...F],a=s.findIndex(s=>(null==s?void 0:s.id)===e);if(-1!==a){let t=s.filter(s=>(null==s?void 0:s.id)!==e);if(_(t),0===t.length)A(!1),z(null),_([]);else{let e=P||0;e>=t.length?z(t.length-1):a<=e&&e>0&&z(e-1)}}ea.mutate(e)}},onLike:e=>{console.log("Like event photo:",e)},onUnlike:e=>{console.log("Unlike event photo:",e)}})},"lightbox-".concat(F.length,"-").concat(P)),(0,t.jsx)(eH,{event:N,isOpen:f,onClose:()=>{b(!1),w(null)}})]}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("p",{className:"text-gray-600",children:"Redirecting to login..."})})})}},5477:function(e,s,a){"use strict";a.d(s,{X:function(){return d},bZ:function(){return c}});var t=a(881),l=a(4149),i=a(9326),n=a(6756);let r=(0,i.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=l.forwardRef((e,s)=>{let{className:a,variant:l,...i}=e;return(0,t.jsx)("div",{ref:s,role:"alert",className:(0,n.cn)(r({variant:l}),a),...i})});c.displayName="Alert",l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("h5",{ref:s,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",a),...l})}).displayName="AlertTitle";let d=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",a),...l})});d.displayName="AlertDescription"},2571:function(e,s,a){"use strict";a.d(s,{_:function(){return d}});var t=a(881),l=a(4149),i=a(8927),n=a(9326),r=a(6756);let c=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(i.f,{ref:s,className:(0,r.cn)(c(),a),...l})});d.displayName=i.f.displayName},3559:function(e,s,a){"use strict";a.d(s,{E:function(){return r}});var t=a(881),l=a(4149),i=a(1964),n=a(6756);let r=l.forwardRef((e,s)=>{let{className:a,value:l,...r}=e;return(0,t.jsx)(i.fC,{ref:s,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...r,children:(0,t.jsx)(i.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(l||0),"%)")}})})});r.displayName=i.fC.displayName},5546:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(881),l=a(4149),i=a(5256),n=a(6756);let r=l.forwardRef((e,s)=>{let{className:a,orientation:l="horizontal",decorative:r=!0,...c}=e;return(0,t.jsx)(i.f,{ref:s,decorative:r,orientation:l,className:(0,n.cn)("shrink-0 bg-border","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",a),...c})});r.displayName=i.f.displayName},3499:function(e,s,a){"use strict";a.d(s,{Am:function(){return v},VW:function(){return g}});var t=a(881),l=a(4149),i=a(7324),n=a(4120),r=a(1935),c=a(9975),d=a(9581),o=a(7791),m=a(3377),u=a(5313);let x=(0,l.createContext)(void 0);function h(){let e=(0,l.useContext)(x);if(!e)throw Error("useToast must be used within a ToastProvider");return e}function g(e){let{children:s}=e,[a,i]=(0,l.useState)([]),n=e=>{i(s=>s.filter(s=>s.id!==e))};return(0,t.jsxs)(x.Provider,{value:{toasts:a,addToast:e=>{let s=Math.random().toString(36).substr(2,9),a={id:s,duration:5e3,...e};i(e=>[...e,a]),!a.persistent&&a.duration&&setTimeout(()=>{n(s)},a.duration)},removeToast:n,clearAllToasts:()=>{i([])}},children:[s,(0,t.jsx)(p,{})]})}function p(){let{toasts:e}=h();return(0,t.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-sm w-full",children:e.map(e=>(0,t.jsx)(j,{toast:e},e.id))})}function j(e){let{toast:s}=e,{removeToast:a}=h(),[x,g]=(0,l.useState)(!1),[p,j]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{setTimeout(()=>g(!0),10)},[]),(0,t.jsxs)("div",{className:"\n        relative overflow-hidden rounded-lg border shadow-lg backdrop-blur-sm\n        transform transition-all duration-200 ease-out\n        ".concat(x&&!p?"translate-x-0 opacity-100":"translate-x-full opacity-0","\n        ").concat((()=>{switch(s.type){case"success":return"bg-green-50 border-green-200";case"error":return"bg-red-50 border-red-200";case"warning":return"bg-yellow-50 border-yellow-200";case"info":return"bg-blue-50 border-blue-200";case"upload":return"bg-purple-50 border-purple-200";case"camera":return"bg-indigo-50 border-indigo-200";default:return"bg-white border-gray-200"}})(),"\n        touch-feedback\n      "),style:{animation:x&&!p?"slideInRight 0.2s ease-out":void 0},children:[(0,t.jsx)("div",{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(()=>{switch(s.type){case"success":return(0,t.jsx)(i.Z,{className:"h-5 w-5 text-green-500"});case"error":return(0,t.jsx)(n.Z,{className:"h-5 w-5 text-red-500"});case"warning":return(0,t.jsx)(r.Z,{className:"h-5 w-5 text-yellow-500"});case"info":return(0,t.jsx)(c.Z,{className:"h-5 w-5 text-blue-500"});case"upload":return(0,t.jsx)(d.Z,{className:"h-5 w-5 text-purple-500"});case"camera":return(0,t.jsx)(o.Z,{className:"h-5 w-5 text-indigo-500"});default:return(0,t.jsx)(m.Z,{className:"h-5 w-5 text-gray-500"})}})()}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:s.title}),s.message&&(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:s.message}),s.action&&(0,t.jsx)("button",{onClick:s.action.onClick,className:"mt-2 text-sm font-medium text-blue-600 hover:text-blue-500 touch-feedback",children:s.action.label})]}),(0,t.jsx)("button",{onClick:()=>{j(!0),setTimeout(()=>{a(s.id)},200)},className:"flex-shrink-0 p-1 rounded-md hover:bg-gray-100 touch-feedback",children:(0,t.jsx)(u.Z,{className:"h-4 w-4 text-gray-400"})})]})}),!s.persistent&&s.duration&&(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gray-200",children:(0,t.jsx)("div",{className:"h-full bg-current opacity-30",style:{animation:"shrink ".concat(s.duration,"ms linear forwards")}})})]})}let v={success:(e,s,a)=>({type:"success",title:e,message:s,...a}),error:(e,s,a)=>({type:"error",title:e,message:s,...a}),warning:(e,s,a)=>({type:"warning",title:e,message:s,...a}),info:(e,s,a)=>({type:"info",title:e,message:s,...a}),upload:(e,s,a)=>({type:"upload",title:e,message:s,...a}),camera:(e,s,a)=>({type:"camera",title:e,message:s,...a})}}},function(e){e.O(0,[7788,6291,8492,6594,9515,1923,8475,8985,5330,1744],function(){return e(e.s=4339)}),_N_E=e.O()}]);