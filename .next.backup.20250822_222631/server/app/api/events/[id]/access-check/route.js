"use strict";(()=>{var e={};e.id=3557,e.ids=[3557],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},57441:e=>{e.exports=require("sharp")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},68621:e=>{e.exports=require("punycode")},76162:e=>{e.exports=require("stream")},17360:e=>{e.exports=require("url")},71568:e=>{e.exports=require("zlib")},95139:(e,a,t)=>{t.r(a),t.d(a,{originalPathname:()=>v,patchFetch:()=>g,requestAsyncStorage:()=>p,routeModule:()=>u,serverHooks:()=>m,staticGenerationAsyncStorage:()=>h});var r={};t.r(r),t.d(r,{GET:()=>l});var s=t(30633),n=t(86488),i=t(13342),c=t(90223),d=t(68620);async function o(e,a){try{let e=await d.F.getEventById(a);if(!e)return{allowed:!1,message:"Event tidak ditemukan",redirect:"/404"};let t=e.status||"active";switch(e.date,t){case"draft":return{allowed:!1,message:"Event masih dalam tahap persiapan. Silakan coba lagi nanti.",redirect:"/event-not-ready"};case"paused":return{allowed:!1,message:"Event sedang dijeda sementara. Silakan coba lagi nanti.",redirect:"/event-paused"};case"cancelled":return{allowed:!1,message:"Event telah dibatalkan.",redirect:"/event-cancelled"};case"archived":return{allowed:!1,message:"Event telah diarsipkan dan tidak dapat diakses lagi.",redirect:"/event-archived"};case"completed":return{allowed:!0,message:"Event telah selesai. Anda hanya dapat melihat foto dan pesan."};default:return{allowed:!0}}}catch(e){return console.error("Event access control error:",e),{allowed:!1,message:"Terjadi kesalahan sistem. Silakan coba lagi.",redirect:"/error"}}}async function l(e,{params:a}){try{let{id:t}=await a,r=await o(e,t),s={allowed:r.allowed,message:r.message,isReadOnly:r.message?.includes("selesai")||!1};return c.NextResponse.json(s)}catch(e){return console.error("Access check error:",e),c.NextResponse.json({allowed:!1,message:"Terjadi kesalahan saat memeriksa akses event."},{status:500})}}let u=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/events/[id]/access-check/route",pathname:"/api/events/[id]/access-check",filename:"route",bundlePath:"app/api/events/[id]/access-check/route"},resolvedPagePath:"/home/ubuntu/stable/src/app/api/events/[id]/access-check/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:p,staticGenerationAsyncStorage:h,serverHooks:m}=u,v="/api/events/[id]/access-check/route";function g(){return(0,i.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:h})}}};var a=require("../../../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[2782,606,3716,8620],()=>t(95139));module.exports=r})();