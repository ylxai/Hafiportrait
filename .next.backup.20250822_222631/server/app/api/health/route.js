"use strict";(()=>{var e={};e.id=8829,e.ids=[8829],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},68621:e=>{e.exports=require("punycode")},76162:e=>{e.exports=require("stream")},17360:e=>{e.exports=require("url")},71568:e=>{e.exports=require("zlib")},76055:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>y,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>f,staticGenerationAsyncStorage:()=>d});var n={};r.r(n),r.d(n,{GET:()=>p,OPTIONS:()=>u});var s=r(30633),a=r(86488),o=r(13342),i=r(33716),h=r(35872);async function u(e){let t=e.headers.get("origin")||e.headers.get("referer")||void 0;return(0,h.A6)(t)}async function p(e){let t=e.headers.get("origin")||e.headers.get("referer")||void 0;try{let e={status:"healthy",timestamp:new Date().toISOString(),environment:"production",version:"1.0.0",checks:{database:"unknown",environment:"unknown",api:"healthy",security:"unknown"}},r=["NEXT_PUBLIC_SUPABASE_URL","SUPABASE_SERVICE_ROLE_KEY","JWT_SECRET"].filter(e=>{let t=process.env[e];return!t||"hafiportrait-secret-key-change-in-production"===t});if(r.length>0)return e.checks.environment="unhealthy",e.checks.database="unknown",e.checks.security="unhealthy",e.status="unhealthy",(0,h.VM)({...e,error:`Missing environment variables: ${r.join(", ")}`},500,t);e.checks.environment="healthy";let n=process.env.JWT_SECRET;if(!n||"hafiportrait-secret-key-change-in-production"===n)return e.checks.security="unhealthy",e.status="unhealthy",(0,h.VM)({...e,error:"JWT_SECRET is not properly configured"},500,t);e.checks.security="healthy";try{let r=process.env.SUPABASE_SERVICE_ROLE_KEY,n=(0,i.eI)("https://azspktldiblhrwebzmwq.supabase.co",r,{auth:{autoRefreshToken:!1,persistSession:!1}}),{data:s,error:a}=await n.from("admin_users").select("id").limit(1);if(a)return e.checks.database="unhealthy",e.status="unhealthy",(0,h.VM)({...e,error:`Database connection failed: ${a.message}`},500,t);e.checks.database="healthy"}catch(r){return e.checks.database="unhealthy",e.status="unhealthy",(0,h.VM)({...e,error:`Database error: ${r instanceof Error?r.message:"Unknown error"}`},500,t)}return(0,h.VM)(e,200,t)}catch(e){return console.error("Health check error:",e),(0,h.VM)({status:"unhealthy",timestamp:new Date().toISOString(),environment:"production",version:"1.0.0",error:"Health check failed",checks:{database:"unknown",environment:"unknown",api:"unhealthy",security:"unknown"}},500,t)}}let c=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/health/route",pathname:"/api/health",filename:"route",bundlePath:"app/api/health/route"},resolvedPagePath:"/home/ubuntu/stable/src/app/api/health/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:f}=c,m="/api/health/route";function y(){return(0,o.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:d})}},35872:(e,t,r)=>{r.d(t,{A6:()=>u,No:()=>o,VM:()=>i,eN:()=>a,qb:()=>h});var n=r(90223);function s(){let e=["https://hafiportrait.photography","https://www.hafiportrait.photography","https://hafiportrait.vercel.app","https://hafiportrait-git-main.vercel.app","https://hafiportrait-git-develop.vercel.app","https://*.vercel.app","https://*.vercel.app/*","https://hafiportrait.com","https://www.hafiportrait.com"];if(e.push("http://147.251.255.227:3002"),process.env.ALLOWED_ORIGINS){let t=process.env.ALLOWED_ORIGINS.split(",").map(e=>e.trim());e.push(...t)}return e}function a(e){let t={"Access-Control-Allow-Methods":"GET, POST, PUT, DELETE, OPTIONS, PATCH","Access-Control-Allow-Headers":"Content-Type, Authorization, X-Requested-With, X-API-Key, X-User-ID, X-User-Username, X-User-Role","Access-Control-Allow-Credentials":"true","Access-Control-Max-Age":"86400"};if(!e||function(e){let t=s();return!!("https://hafiportrait.photography"===e||"https://www.hafiportrait.photography"===e||!e||e.includes("localhost")||e.includes("127.0.0.1"))||!!t.includes(e)||t.some(t=>{if(t.includes("*")){let r=t.replace(/\*/g,".*");return RegExp(`^${r}$`).test(e)}return!1})}(e))t["Access-Control-Allow-Origin"]=e||"*";else{let e=s();t["Access-Control-Allow-Origin"]=e[0]||"*"}return t}function o(e,t){return Object.entries(a(t)).forEach(([t,r])=>{e.headers.set(t,r)}),e}function i(e,t=200,r){return o(n.NextResponse.json(e,{status:t}),r)}function h(e,t=500,r){return o(n.NextResponse.json({error:e,timestamp:new Date().toISOString(),path:"/api/auth/login"},{status:t}),r)}function u(e){return o(new n.NextResponse(null,{status:200}),e)}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[2782,606,3716],()=>r(76055));module.exports=n})();