(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9744],{5731:function(e,a,t){Promise.resolve().then(t.bind(t,4039))},4039:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return J}});var s=t(881),n=t(7525),i=t(4149),r=t(1756),o=t(9667),l=t(753),c=t(6756);function d(){let[e,a]=(0,i.useState)(null),[t,s]=(0,i.useState)({animationDuration:2e3,shimmerEnabled:!0,itemCount:8,complexityLevel:"high",preloadDelay:0});(0,i.useEffect)(()=>{if("connection"in navigator){let e=navigator.connection,t=()=>{a({effectiveType:e.effectiveType,downlink:e.downlink,rtt:e.rtt,saveData:e.saveData})};return t(),e.addEventListener("change",t),()=>{e.removeEventListener("change",t)}}n()},[]),(0,i.useEffect)(()=>{e&&s(r(e))},[e]);let n=async()=>{try{let e=performance.now(),t=new Image;t.onload=()=>{let t=performance.now()-e,s="4g";t>1e3?s="2g":t>500?s="3g":t>200&&(s="slow-2g"),a({effectiveType:s,downlink:t>500?.5:2,rtt:t,saveData:!1})},t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"}catch(e){a({effectiveType:"3g",downlink:1,rtt:300,saveData:!1})}},r=e=>{let{effectiveType:a,downlink:t,rtt:s,saveData:n}=e,i={animationDuration:2e3,shimmerEnabled:!0,itemCount:8,complexityLevel:"high",preloadDelay:0};switch(a){case"slow-2g":case"2g":i={animationDuration:3e3,shimmerEnabled:!1,itemCount:4,complexityLevel:"low",preloadDelay:100};break;case"3g":i={animationDuration:2500,shimmerEnabled:t>.5,itemCount:6,complexityLevel:"medium",preloadDelay:50};break;case"4g":i={animationDuration:2e3,shimmerEnabled:!0,itemCount:8,complexityLevel:"high",preloadDelay:0}}return n&&(i.shimmerEnabled=!1,i.itemCount=Math.min(i.itemCount,4),i.complexityLevel="low"),s>500&&(i.preloadDelay=Math.min(i.preloadDelay+100,300),i.animationDuration=Math.min(i.animationDuration+500,4e3)),i};return{networkInfo:e,skeletonConfig:t,getSkeletonClassName:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=[e];switch(t.shimmerEnabled?a.push("shimmer-animation"):a.push("animate-pulse"),t.complexityLevel){case"low":a.push("skeleton-simple");break;case"medium":a.push("skeleton-medium");break;case"high":a.push("skeleton-complex")}return a.filter(Boolean).join(" ")},shouldShowSkeleton:a=>a>((null==e?void 0:e.effectiveType)==="4g"?500:200),isSlowNetwork:(null==e?void 0:e.effectiveType)==="2g"||(null==e?void 0:e.effectiveType)==="slow-2g",isSaveDataMode:(null==e?void 0:e.saveData)||!1}}let m=(0,i.memo)(function(e){let{className:a,shimmer:t,variant:n,adaptive:r=!0,estimatedLoadTime:l=1e3,...m}=e,u=(0,o.dD)(),{skeletonConfig:h,getSkeletonClassName:p,shouldShowSkeleton:x,isSlowNetwork:g,isSaveDataMode:f}=d(),v=(0,i.useMemo)(()=>!r||x(l),[r,l,x]),b=(0,i.useMemo)(()=>{let e=["rounded-md","bg-gray-200"];if(r)g||f?(e.push("skeleton-slow-network"),u&&e.push("skeleton-mobile-optimized")):(e.push("skeleton-fast-network"),h.shimmerEnabled?e.push("shimmer-animation"):e.push("animate-pulse")),e.push("skeleton-".concat(h.complexityLevel)),f&&e.push("skeleton-save-data"),g||f||e.push("skeleton-gpu-accelerated");else{let a=n||"medium";e.push("skeleton-".concat(a)),!1===t||f?e.push("animate-pulse"):e.push("shimmer-animation")}return(0,c.cn)(e,a)},[r,g,f,u,h,n,t,a]);return v?(0,s.jsx)("div",{className:b,style:{animationDuration:r?"".concat(h.animationDuration,"ms"):void 0},...m}):null}),u=(0,i.memo)(function(e){let{count:a,adaptive:t=!0}=e,n=(0,o.dD)(),{skeletonConfig:r,isSlowNetwork:l}=d(),c=(0,i.useMemo)(()=>t?l?n?4:6:a||r.itemCount:a||8,[t,a,l,n,r.itemCount]);return(0,s.jsx)("div",{className:"photo-grid ".concat(n?"grid-cols-2 gap-3":"grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"),children:Array.from({length:c}).map((e,a)=>(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m,{className:"w-full ".concat(n?"h-40":"h-48"," rounded-xl"),adaptive:t,estimatedLoadTime:2e3}),(0,s.jsxs)("div",{className:"flex items-center justify-between px-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(m,{className:"h-4 w-4 rounded-full",adaptive:t,estimatedLoadTime:500}),(0,s.jsx)(m,{className:"h-3 w-6",adaptive:t,estimatedLoadTime:500})]}),!n&&(0,s.jsx)(m,{className:"h-3 w-16",adaptive:t,estimatedLoadTime:500})]})]},a))})}),h=(0,i.memo)(function(){let e=(0,o.dD)(),{isSlowNetwork:a}=d();return(0,s.jsxs)("div",{className:"min-h-screen bg-wedding-ivory",children:[(0,s.jsx)("header",{className:"sticky top-0 z-50 bg-white/95 backdrop-blur-md border-b border-gray-200 shadow-sm",children:(0,s.jsx)("div",{className:"mobile-container",children:(0,s.jsxs)("div",{className:"flex items-center justify-between ".concat(e?"py-3":"py-4"),children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0 space-y-2",children:[(0,s.jsx)(m,{className:"".concat(e?"h-6 w-48":"h-8 w-64"),adaptive:!0,estimatedLoadTime:1500}),(0,s.jsx)(m,{className:"".concat(e?"h-3 w-32":"h-4 w-40"),adaptive:!0,estimatedLoadTime:1e3})]}),(0,s.jsxs)("div",{className:"flex items-center ".concat(e?"gap-2":"gap-3"),children:[(0,s.jsx)(m,{className:"".concat(e?"h-8 w-8":"h-10 w-20"," rounded-md"),adaptive:!0,estimatedLoadTime:500}),(0,s.jsx)(m,{className:"".concat(e?"h-8 w-8":"h-10 w-16"," rounded-md"),adaptive:!0,estimatedLoadTime:500})]})]})})}),(0,s.jsx)("div",{className:"mobile-container mobile-spacing",children:(0,s.jsxs)("div",{className:"w-full space-y-6",children:[(0,s.jsx)("div",{className:"".concat(e?"grid grid-cols-4 h-auto p-1 gap-1":"grid grid-cols-4 gap-2"," bg-gray-100 rounded-lg p-1"),children:["Official","Tamu","Bridesmaid","Guestbook"].map(a=>(0,s.jsx)(m,{className:"".concat(e?"h-10":"h-12"," rounded-md"),adaptive:!0,estimatedLoadTime:300},a))}),(0,s.jsxs)("div",{className:e?"space-y-4":"space-y-6",children:[(0,s.jsxs)("div",{className:"text-center space-y-2",children:[(0,s.jsx)(m,{className:"mx-auto ".concat(e?"h-6 w-32":"h-8 w-40"),adaptive:!0,estimatedLoadTime:800}),(0,s.jsx)(m,{className:"mx-auto ".concat(e?"h-4 w-48":"h-5 w-56"),adaptive:!0,estimatedLoadTime:600})]}),(0,s.jsx)(u,{adaptive:!0})]})]})})]})});function p(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t={trackLayoutShifts:!0,trackAnimationFrames:!1,reportToAnalytics:!1,debugMode:!1,...a},[s,n]=(0,i.useState)({skeletonStartTime:null,skeletonEndTime:null,skeletonDuration:null,contentLoadTime:null,layoutShifts:[],performanceScore:null}),r=(0,i.useRef)(null),o=(0,i.useRef)(null),l=(0,i.useRef)(null),c=(0,i.useRef)(performance.now()),d=(0,i.useCallback)(()=>{o.current&&o.current.disconnect(),o.current=new MutationObserver(a=>{a.forEach(a=>{a.addedNodes.forEach(a=>{if(1===a.nodeType){var i,r,o;if(((null===(i=a.classList)||void 0===i?void 0:i.contains("animate-pulse"))||(null===(r=a.classList)||void 0===r?void 0:r.contains("shimmer-animation"))||(null===(o=a.querySelector)||void 0===o?void 0:o.call(a,'[class*="skeleton"]')))&&!s.skeletonStartTime){let a=performance.now();n(e=>({...e,skeletonStartTime:a})),t.debugMode&&console.log("\uD83E\uDDB4 [".concat(e,"] Skeleton appeared at:"),a)}}}),a.removedNodes.forEach(a=>{if(1===a.nodeType){var i,r;if(((null===(i=a.classList)||void 0===i?void 0:i.contains("animate-pulse"))||(null===(r=a.classList)||void 0===r?void 0:r.contains("shimmer-animation")))&&!s.skeletonEndTime&&s.skeletonStartTime){let a=performance.now(),i=a-s.skeletonStartTime;n(e=>({...e,skeletonEndTime:a,skeletonDuration:i,contentLoadTime:a-c.current})),t.debugMode&&(console.log("✅ [".concat(e,"] Skeleton removed at:"),a),console.log("⏱️ [".concat(e,"] Skeleton duration:"),i.toFixed(2),"ms"))}}})})}),o.current.observe(document.body,{childList:!0,subtree:!0})},[e,s.skeletonStartTime,s.skeletonEndTime,t.debugMode]),m=(0,i.useCallback)(()=>{t.trackLayoutShifts&&(r.current&&r.current.disconnect(),r.current=new PerformanceObserver(a=>{let s=[];for(let e of a.getEntries())if("layout-shift"===e.entryType&&!e.hadRecentInput){var i;let a={value:e.value,time:e.startTime,sources:(null===(i=e.sources)||void 0===i?void 0:i.map(e=>{var a;return(null===(a=e.node)||void 0===a?void 0:a.tagName)||"unknown"}))||[]};s.push(a)}s.length>0&&(n(e=>({...e,layoutShifts:[...e.layoutShifts,...s]})),t.debugMode&&s.forEach(a=>{console.log("\uD83D\uDCD0 [".concat(e,"] Layout shift:"),a.value.toFixed(4),"at",a.time.toFixed(2),"ms")}))}),r.current.observe({entryTypes:["layout-shift"]}))},[e,t.trackLayoutShifts,t.debugMode]),u=(0,i.useCallback)(()=>{if(!t.trackAnimationFrames)return;let a=0,s=performance.now(),i=[],r=o=>{let c=o-s;if(i.push(c),a++,i.length>60&&i.shift(),s=o,document.querySelector('[class*="skeleton"], [class*="animate-pulse"], [class*="shimmer"]')&&a<300)l.current=requestAnimationFrame(r);else{let s=1e3/(i.reduce((e,a)=>e+a,0)/i.length),r=Math.min(100,s/60*100);n(e=>({...e,performanceScore:r})),t.debugMode&&console.log("\uD83C\uDFAC [".concat(e,"] Animation performance:"),{averageFPS:s.toFixed(1),performanceScore:r.toFixed(1),frameCount:a})}};l.current=requestAnimationFrame(r)},[e,t.trackAnimationFrames,t.debugMode]),h=(0,i.useCallback)(()=>{let{skeletonDuration:e,layoutShifts:a,performanceScore:t}=s;if(!e)return null;let n=100;e>3e3?n-=20:e>2e3?n-=10:e>1e3&&(n-=5);let i=a.reduce((e,a)=>e+a.value,0);return i>.25?n-=30:i>.1?n-=15:i>.05&&(n-=5),null!==t&&(n=(n+t)/2),Math.max(0,Math.min(100,n))},[s]),p=(0,i.useCallback)(()=>{var a;if(!t.reportToAnalytics)return;let n=h(),i={component:e,skeletonDuration:s.skeletonDuration,contentLoadTime:s.contentLoadTime,layoutShifts:s.layoutShifts.length,totalCLS:s.layoutShifts.reduce((e,a)=>e+a.value,0),animationPerformance:s.performanceScore,overallScore:n,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,connection:(null===(a=navigator.connection)||void 0===a?void 0:a.effectiveType)||"unknown"};window.gtag&&window.gtag("event","skeleton_performance",{event_category:"Performance",event_label:e,value:Math.round(n||0),custom_parameters:i}),fetch("/api/analytics/skeleton-performance",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).catch(e=>{console.warn("Failed to report skeleton performance:",e)}),t.debugMode&&console.log("\uD83D\uDCCA [".concat(e,"] Performance report:"),i)},[e,s,t.reportToAnalytics,t.debugMode,h]);(0,i.useEffect)(()=>(c.current=performance.now(),d(),m(),u(),()=>{r.current&&r.current.disconnect(),o.current&&o.current.disconnect(),l.current&&cancelAnimationFrame(l.current)}),[d,m,u]),(0,i.useEffect)(()=>{if(null!==s.skeletonDuration&&null!==s.contentLoadTime){let e=setTimeout(p,1e3);return()=>clearTimeout(e)}},[s.skeletonDuration,s.contentLoadTime,p]);let x=(0,i.useCallback)(()=>{let e=s.layoutShifts.reduce((e,a)=>e+a.value,0),a=h();return{skeletonDuration:s.skeletonDuration,contentLoadTime:s.contentLoadTime,cumulativeLayoutShift:e,animationPerformance:s.performanceScore,overallPerformanceScore:a,layoutShiftCount:s.layoutShifts.length,isGoodPerformance:a?a>=80:null,recommendations:g()}},[s,h]),g=(0,i.useCallback)(()=>{let e=[],{skeletonDuration:a,layoutShifts:t,performanceScore:n}=s;return a&&a>3e3&&e.push("Consider optimizing data loading to reduce skeleton duration"),t.reduce((e,a)=>e+a.value,0)>.1&&e.push("Improve skeleton-to-content transition to reduce layout shift"),n&&n<60&&e.push("Optimize skeleton animations for better performance"),t.length>5&&e.push("Reduce the number of layout changes during loading"),e},[s]);return{metrics:s,getMetricsSummary:x,isTracking:null!==s.skeletonStartTime&&null===s.skeletonEndTime,hasCompleted:null!==s.skeletonEndTime}}var x=t(8731),g=t(1084),f=t(9477),v=t(3433),b=t(979),y=t(3389),j=t(88),w=t(5949),N=t(3518),k=t(362);function D(e){let{event:a,onShare:t,onShowQR:n}=e,i=(0,o.dD)();return(0,s.jsx)("header",{className:"sticky top-0 z-50 bg-white/95 backdrop-blur-md border-b border-wedding-gold/20 shadow-sm",children:(0,s.jsx)("div",{className:"mobile-container",children:(0,s.jsxs)("div",{className:"flex items-center justify-between ".concat(i?"py-3":"py-4"),children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h1",{className:"font-bold text-gray-800 truncate ".concat(i?"text-xl leading-tight":"text-3xl"),children:a.name}),(0,s.jsx)("p",{className:"text-gray-600 truncate ".concat(i?"text-xs mt-1":"text-sm"),children:new Date(a.date).toLocaleDateString("id-ID",{weekday:i?"short":"long",year:"numeric",month:i?"short":"long",day:"numeric"})})]}),(0,s.jsxs)("div",{className:"flex items-center ".concat(i?"gap-2":"gap-3"),children:[(0,s.jsxs)(w.z,{variant:"outline",size:i?"sm":"default",onClick:t,className:"mobile-button ".concat(i?"px-3 py-2":""),children:[(0,s.jsx)(N.Z,{className:"".concat(i?"h-4 w-4":"h-5 w-5")}),!i&&(0,s.jsx)("span",{className:"ml-2",children:"Share"})]}),(0,s.jsxs)(w.z,{variant:"outline",size:i?"sm":"default",onClick:n,className:"mobile-button ".concat(i?"px-3 py-2":""),children:[(0,s.jsx)(k.Z,{className:"".concat(i?"h-4 w-4":"h-5 w-5")}),!i&&(0,s.jsx)("span",{className:"ml-2",children:"QR"})]})]})]})})})}var S=t(6222),E=t(3575),C=t(4052),T=t(2146);function A(e){let{selectedAlbum:a,verifyCodeMutation:t}=e,n=(0,o.dD)(),[r,l]=(0,i.useState)("");return(0,s.jsxs)(E.Zb,{className:"mb-6 mx-auto ".concat(n?"mobile-card":"max-w-md"),children:[(0,s.jsx)(E.Ol,{className:n?"mobile-card-header":"",children:(0,s.jsxs)(E.ll,{className:"flex items-center gap-2 ".concat(n?"mobile-card-title text-lg":""),children:[(0,s.jsx)(C.Z,{className:"".concat(n?"h-5 w-5":"h-6 w-6")}),"Masukkan Kode Akses"]})}),(0,s.jsxs)(E.aY,{className:"space-y-4 ".concat(n?"mobile-card-content":""),children:[(0,s.jsxs)("p",{className:"text-gray-600 ".concat(n?"text-sm leading-relaxed":"text-sm"),children:['Album "',a,'" memerlukan kode akses untuk mengupload foto. Dapatkan kode dari penyelenggara acara.']}),(0,s.jsxs)("div",{className:"flex ".concat(n?"gap-3":"gap-2"),children:[(0,s.jsx)(S.I,{type:"text",placeholder:"Masukkan kode akses",value:r,onChange:e=>l(e.target.value.toUpperCase()),className:"uppercase ".concat(n?"mobile-input text-lg":"")}),(0,s.jsx)(w.z,{onClick:()=>{t.mutate(r)},disabled:!r.trim()||t.isPending,className:n?"mobile-button px-4":"",children:(0,s.jsx)(T.Z,{className:"".concat(n?"h-5 w-5":"h-4 w-4")})})]})]})]})}var L=t(7791),P=t(9581);function R(e){let{eventId:a,albumName:t,disabled:n=!1}=e,{toast:r}=(0,b.pm)(),l=(0,x.NL)(),c=(0,o.dD)(),[d,m]=(0,i.useState)(""),[u,h]=(0,i.useState)(null),[p,g]=(0,i.useState)(null),y=(0,f.D)({mutationFn:async e=>{if(!e.type.startsWith("image/"))throw Error("Hanya file gambar yang diperbolehkan");if(e.size>15728640)throw Error("Ukuran file maksimal 15MB");let s=new FormData;s.append("file",e),s.append("uploaderName",d.trim()||"Anonim"),s.append("albumName",t);let n=await (0,v.N)("POST","/api/events/".concat(a,"/photos"),s);if(!n.ok)throw Error((await n.json().catch(()=>({}))).message||"Upload gagal");return n.json()},onSuccess:()=>{l.invalidateQueries({queryKey:["/api/events",a,"photos"]});let e=d.trim()||"Anonim";r({title:"Foto Berhasil Diupload!",description:"Foto berhasil ditambahkan ke album ".concat(t," oleh ").concat(e,".")}),j()},onError:e=>{r({title:"Upload Gagal",description:e instanceof Error?e.message:"Terjadi kesalahan saat upload",variant:"destructive"})}}),j=()=>{h(null),p&&(URL.revokeObjectURL(p),g(null));let e=document.querySelector('input[type="file"]');e&&(e.value="")};return(0,s.jsxs)("div",{className:"space-y-4 ".concat(n?"opacity-50 pointer-events-none":""),children:[(0,s.jsxs)("div",{className:"flex ".concat("gap-2"),children:[(0,s.jsx)(S.I,{type:"text",placeholder:"Nama Anda (opsional)",value:d,onChange:e=>m(e.target.value),className:"flex-1 ".concat(c?"h-10 px-3 text-base":"text-base"),disabled:y.isPending||n}),d.trim()&&(0,s.jsx)(w.z,{type:"button",variant:"outline",size:"sm",onClick:()=>m(""),disabled:y.isPending||n,className:"px-3 h-10",children:"✕"})]}),(0,s.jsxs)("label",{className:"\n        block w-full border-2 border-dashed rounded-lg cursor-pointer transition-all duration-200\n        ".concat(y.isPending||n?"border-gray-200 bg-gray-50 cursor-not-allowed":"border-gray-300 bg-gray-50 hover:bg-gray-100","\n        ").concat(c?"h-24":"h-20","\n      "),children:[(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center text-center ".concat(c?"px-4 py-4":"pt-3 pb-3"),children:[(0,s.jsx)(L.Z,{className:"mb-2 transition-colors ".concat(c?"w-6 h-6":"w-5 h-5"," ").concat(y.isPending||n?"text-gray-400":"Tamu"===t?"text-wedding-rose":"text-wedding-sage")}),(0,s.jsx)("p",{className:"font-medium ".concat(c?"text-sm":"text-xs"," ").concat(y.isPending||n?"text-gray-400":"text-gray-700"),children:"Pilih Foto"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"JPG, PNG, WEBP, HEIC, RAW (maks. 15MB)"})]}),(0,s.jsx)("input",{type:"file",accept:"image/*,.nef,.cr2,.arw,.dng,.raf",onChange:e=>{var a;let t=null===(a=e.target.files)||void 0===a?void 0:a[0];if(t){if(!["image/jpeg","image/jpg","image/png","image/webp","image/heic","image/heif","image/gif","image/bmp","image/x-nikon-nef","image/x-canon-cr2","image/x-sony-arw","image/x-adobe-dng","image/x-fuji-raf"].includes(t.type)&&!t.name.toLowerCase().match(/\.(nef|cr2|arw|dng|raf)$/)){r({title:"Format File Tidak Didukung",description:"Gunakan format: JPG, PNG, WEBP, HEIC, HEIF, GIF, BMP, NEF, CR2, ARW, DNG, RAF",variant:"destructive"});return}if(t.size>15728640){r({title:"File Terlalu Besar",description:"Ukuran file maksimal 15MB.",variant:"destructive"});return}h(t),t.type.startsWith("image/")&&g(URL.createObjectURL(t)),r({title:"Foto Dipilih",description:"".concat(t.name," siap untuk diupload")})}},className:"hidden",disabled:y.isPending||n})]}),u&&(0,s.jsxs)("div",{className:"border rounded-lg p-3 bg-white ".concat(c?"space-y-3":"space-y-2"),children:[(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[p&&(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("img",{src:p,alt:"Preview",className:"rounded object-cover ".concat(c?"w-16 h-16":"w-12 h-12")})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"font-medium text-gray-800 truncate ".concat(c?"text-sm":"text-xs"),children:u.name}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[(u.size/1048576).toFixed(1)," MB"]})]}),(0,s.jsx)(w.z,{type:"button",variant:"ghost",size:"sm",onClick:j,disabled:y.isPending,className:"flex-shrink-0 h-8 w-8 p-0 text-gray-400 hover:text-gray-600",children:"✕"})]}),(0,s.jsx)(w.z,{onClick:()=>{u&&y.mutate(u)},disabled:y.isPending,className:"w-full ".concat("Tamu"===t?"bg-wedding-rose hover:bg-wedding-rose/90":"bg-wedding-sage hover:bg-wedding-sage/90"," text-white ").concat(c?"h-11":"h-10"),children:y.isPending?(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,s.jsx)("span",{children:"Mengupload..."})]}):(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(P.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Upload Foto"})]})})]})]})}var I=t(1429);function M(e){let{photos:a,albumName:t,isLoading:n,onPhotoClick:i}=e,r=(0,o.dD)(),l=a.filter(e=>e.album_name===t),{getMetricsSummary:c}=p("PhotoGallery-".concat(t),{trackLayoutShifts:!0,debugMode:!1});return n?(0,s.jsx)(u,{count:8,adaptive:!0}):0===l.length?(0,s.jsx)("div",{className:"text-center text-gray-500 ".concat(r?"py-16 px-6":"py-12"),children:(0,s.jsxs)("div",{className:"".concat(r?"bg-gray-50 rounded-2xl p-8":""),children:[(0,s.jsx)(L.Z,{className:"mx-auto mb-4 text-gray-300 ".concat(r?"h-16 w-16":"h-12 w-12")}),(0,s.jsxs)("p",{className:"".concat(r?"text-base font-medium mb-2":"text-sm"),children:["Belum ada foto di album ",t]}),r&&("Tamu"===t||"Bridesmaid"===t)&&(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"Jadilah yang pertama upload foto!"})]})}):(0,s.jsx)("div",{className:"photo-grid ".concat(r?"grid-cols-2 gap-3":"grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"),children:l.map((e,a)=>(0,s.jsxs)("div",{className:"relative group cursor-pointer touch-feedback ".concat(r?"rounded-xl overflow-hidden":"rounded-lg overflow-hidden"),onClick:()=>i(a),children:[(0,s.jsx)("img",{src:e.url,alt:e.original_name,className:"w-full object-cover transition-transform duration-200 ".concat(r?"h-40 group-active:scale-95":"h-48 group-hover:scale-105"),loading:"lazy"}),(0,s.jsx)("div",{className:"absolute inset-0 transition-all duration-200 flex items-end ".concat(r?"bg-gradient-to-t from-black/60 via-transparent to-transparent":"bg-black/0 group-hover:bg-black/30"),children:(0,s.jsx)("div",{className:"transition-opacity duration-200 text-white ".concat(r?"opacity-100 p-3 w-full":"opacity-0 group-hover:opacity-100 flex items-center justify-center w-full h-full"),children:(0,s.jsxs)("div",{className:"flex items-center ".concat(r?"justify-between w-full":"space-x-2"),children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(I.Z,{className:"".concat("h-4 w-4")}),(0,s.jsx)("span",{className:"".concat(r?"text-sm font-medium":"text-sm"),children:e.likes||0})]}),r&&e.uploader_name&&(0,s.jsx)("span",{className:"text-xs opacity-80 truncate max-w-20",children:e.uploader_name})]})})}),r&&(0,s.jsx)("div",{className:"absolute top-2 right-2 bg-black/20 rounded-full p-1",children:(0,s.jsx)("div",{className:"w-2 h-2 bg-white/80 rounded-full"})})]},e.id))})}var F=t(8435);function z(e){let{className:a,shimmer:t=!0,...n}=e;return(0,s.jsx)("div",{className:(0,c.cn)("rounded-md bg-gray-200 relative overflow-hidden",t&&"before:absolute before:inset-0 before:-translate-x-full before:animate-[shimmer_2s_infinite] before:bg-gradient-to-r before:from-transparent before:via-white/60 before:to-transparent",a),...n})}function O(e){let{count:a=8}=e,t=(0,o.dD)();return(0,s.jsx)("div",{className:"photo-grid ".concat(t?"grid-cols-2 gap-3":"grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"),children:Array.from({length:a}).map((e,a)=>(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(z,{className:"w-full ".concat(t?"h-40":"h-48"," rounded-xl")}),(0,s.jsxs)("div",{className:"flex items-center justify-between px-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(z,{className:"h-4 w-4 rounded-full"}),(0,s.jsx)(z,{className:"h-3 w-6"})]}),!t&&(0,s.jsx)(z,{className:"h-3 w-16"})]})]},a))})}function _(){return(0,s.jsxs)("div",{className:"p-4 border rounded-lg bg-white space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)(z,{className:"h-4 w-24"}),(0,s.jsx)(z,{className:"h-4 w-full"}),(0,s.jsx)(z,{className:"h-4 w-3/4"}),(0,s.jsx)(z,{className:"h-3 w-32"})]}),(0,s.jsx)(z,{className:"h-8 w-12 rounded-md"})]}),(0,s.jsxs)("div",{className:"border-t pt-3 space-y-3",children:[(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:Array.from({length:3}).map((e,a)=>(0,s.jsx)(z,{className:"h-6 w-12 rounded-full"},a))}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:Array.from({length:5}).map((e,a)=>(0,s.jsx)(z,{className:"h-8 w-8 rounded-md"},a))})]})]})}function B(){let e=(0,o.dD)();return(0,s.jsxs)("div",{className:"border rounded-lg bg-white ".concat(e?"p-4":"p-6"," space-y-4"),children:[(0,s.jsxs)("div",{className:"text-center space-y-2",children:[(0,s.jsx)(z,{className:"mx-auto h-12 w-12 rounded-full"}),(0,s.jsx)(z,{className:"mx-auto h-5 w-32"}),(0,s.jsx)(z,{className:"mx-auto h-4 w-48"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(z,{className:"w-full h-32 rounded-lg border-2 border-dashed"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(z,{className:"flex-1 h-10"}),(0,s.jsx)(z,{className:"h-10 w-24"})]})]})]})}function G(e){let{albumName:a,eventId:t,photos:n,isLoading:i,needsAccessCode:r,onPhotoClick:l,showUploadForm:c=!0}=e,d=(0,o.dD)();return i?(0,s.jsxs)("div",{className:d?"space-y-4":"space-y-6",children:[(0,s.jsxs)("div",{className:"text-center space-y-2",children:[(0,s.jsx)("div",{className:"mx-auto bg-gray-200 rounded animate-pulse ".concat(d?"h-6 w-32":"h-8 w-40")}),(0,s.jsx)("div",{className:"mx-auto bg-gray-200 rounded animate-pulse ".concat(d?"h-4 w-48":"h-5 w-56")})]}),c&&("Tamu"===a||"Bridesmaid"===a)&&!r&&(0,s.jsx)(B,{}),(0,s.jsx)(O,{count:8})]}):(0,s.jsxs)("div",{className:d?"space-y-4":"space-y-6",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("h2",{className:"font-bold mb-2 ".concat(d?"text-lg":"text-2xl"),children:["Foto ",a]}),(0,s.jsx)("p",{className:"text-gray-600 mb-4 ".concat(d?"text-sm":"mb-6"),children:(e=>{switch(e){case"Official":return"Foto resmi dari fotografer acara";case"Tamu":return"Upload dan lihat foto dari para tamu";case"Bridesmaid":return"Album khusus untuk para bridesmaid";default:return""}})(a)})]}),c&&("Tamu"===a||"Bridesmaid"===a)&&!r&&(0,s.jsx)(F.BK,{albumName:a,children:(0,s.jsx)(E.Zb,{className:"".concat(d?"mobile-card mobile-padding":"p-4 sm:p-6"),children:(0,s.jsx)(R,{eventId:t,albumName:a,disabled:!1})})}),(0,s.jsx)(F.Eu,{albumName:a,children:(0,s.jsx)(M,{photos:n,albumName:a,isLoading:!1,onPhotoClick:l})})]})}function q(e){let{albumName:a,eventId:t,photos:n,isLoading:i,needsAccessCode:r,onPhotoClick:o}=e;return(0,s.jsx)(G,{albumName:a,eventId:t,photos:n,isLoading:i,needsAccessCode:r,onPhotoClick:o})}var Z=t(113),U=t(151),Q=t(5914);function K(e){let{messages:a,isLoading:t,addMessageMutation:n,likeMessageMutation:r,addReactionMutation:l,onLikeMessage:c,onAddReaction:d}=e,m=(0,o.dD)(),[u,h]=(0,i.useState)(""),[p,x]=(0,i.useState)(""),g={love:"\uD83D\uDE0D",laugh:"\uD83D\uDE02",wow:"\uD83D\uDE2E",sad:"\uD83D\uDE22",angry:"\uD83D\uDE20"};return(0,s.jsx)(F.v2,{children:(0,s.jsxs)("div",{className:m?"space-y-4":"space-y-6",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h2",{className:"font-bold mb-2 ".concat(m?"text-lg":"text-2xl"),children:"Buku Tamu Digital"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4 ".concat(m?"text-sm":"mb-6"),children:"Tinggalkan pesan dan ucapan untuk pengantin"})]}),(0,s.jsx)(E.Zb,{className:"".concat(m?"p-4":"p-6"),children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(S.I,{type:"text",placeholder:"Nama Anda",value:u,onChange:e=>h(e.target.value),className:m?"h-10 text-base":"",disabled:n.isPending}),(0,s.jsx)(Z.g,{placeholder:"Tulis pesan atau ucapan Anda...",value:p,onChange:e=>x(e.target.value),rows:3,className:m?"text-base resize-none":"",disabled:n.isPending}),(0,s.jsx)(w.z,{onClick:()=>{u.trim()&&p.trim()&&n.mutate({guestName:u.trim(),message:p.trim()},{onSuccess:()=>{h(""),x("")}})},disabled:n.isPending||!u.trim()||!p.trim(),className:"w-full bg-wedding-gold text-black hover:bg-wedding-gold/90 ".concat(m?"h-11":""),children:n.isPending?(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(Q.Z,{}),(0,s.jsx)("span",{children:"Mengirim..."})]}):(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(U.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Kirim Pesan"})]})})]})}),t?(0,s.jsx)("div",{className:"space-y-4",children:Array.from({length:3}).map((e,a)=>(0,s.jsx)(_,{},a))}):a.length>0?(0,s.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,s.jsx)(E.Zb,{className:"p-4",children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-800",children:e.guest_name||e.sender_name}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:e.message||e.content}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:new Date(e.created_at||e.sent_at||new Date).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,s.jsxs)(w.z,{variant:"ghost",size:"sm",onClick:()=>c(e.id),disabled:r.isPending,className:"flex items-center space-x-1 text-wedding-rose hover:bg-wedding-rose/10 transition-all duration-200 ".concat(r.isPending?"opacity-50":"hover:scale-105"),children:[(0,s.jsx)(I.Z,{className:"h-4 w-4 ".concat(r.isPending?"animate-pulse":"")}),(0,s.jsx)("span",{className:"font-medium",children:e.hearts||0})]})]}),(0,s.jsxs)("div",{className:"border-t pt-3",children:[e.reactions&&Object.values(e.reactions).some(e=>e>0)&&(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mb-3",children:Object.entries(e.reactions).map(e=>{let[a,t]=e;return 0===t?null:(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 rounded-full text-sm",children:[(0,s.jsx)("span",{children:g[a]}),(0,s.jsx)("span",{className:"font-medium",children:t})]},a)})}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:["love","laugh","wow","sad","angry"].map(a=>(0,s.jsx)(w.z,{variant:"ghost",size:"sm",onClick:()=>d(e.id,a),disabled:l.isPending,className:"p-2 h-8 w-8 hover:scale-110 transition-all duration-200 ".concat(l.isPending?"opacity-50":""),title:"React with ".concat(a),children:(0,s.jsx)("span",{className:"text-lg",children:g[a]})},a))})]})]})},e.id))}):(0,s.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,s.jsx)(U.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,s.jsx)("p",{children:"Belum ada pesan. Jadilah yang pertama menulis ucapan!"})]})]})})}var W=t(2238),H=t(9938);function V(e){let{event:a,isOpen:t,onClose:n,onCopyLink:i}=e;return t?(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg max-w-sm w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"QR Code Event"}),(0,s.jsx)(w.z,{variant:"ghost",size:"sm",onClick:n,className:"h-8 w-8 p-0",children:"✕"})]}),(0,s.jsx)("div",{className:"p-6 text-center space-y-4",children:a.qr_code?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"bg-white p-4 rounded-lg border-2 border-dashed border-gray-300 inline-block",children:(0,s.jsx)("img",{src:a.qr_code,alt:"QR Code Event",className:"w-64 h-64 mx-auto"})}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Scan QR code ini untuk mengakses event"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(w.z,{onClick:()=>a.qr_code&&window.open(a.qr_code,"_blank"),className:"w-full bg-wedding-gold hover:bg-wedding-gold/90 text-black",children:[(0,s.jsx)(W.Z,{className:"w-4 h-4 mr-2"}),"Buka QR Code"]}),(0,s.jsxs)(w.z,{variant:"outline",onClick:()=>a.qr_code&&i(a.qr_code),className:"w-full",children:[(0,s.jsx)(H.Z,{className:"w-4 h-4 mr-2"}),"Copy QR Code URL"]}),(0,s.jsxs)(w.z,{variant:"outline",onClick:()=>a.shareable_link&&i(a.shareable_link),className:"w-full",children:[(0,s.jsx)(N.Z,{className:"w-4 h-4 mr-2"}),"Copy Link Event"]})]})]})]}):(0,s.jsxs)("div",{className:"text-gray-500 py-8",children:[(0,s.jsx)(k.Z,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,s.jsx)("p",{children:"QR Code tidak tersedia"})]})})]})}):null}function J(){let e=(0,n.useParams)(),a=null==e?void 0:e.id,t=(0,o.dD)(),{metrics:c,getMetricsSummary:d,isTracking:m}=p("EventPage",{trackLayoutShifts:!0,trackAnimationFrames:!0,reportToAnalytics:!0,debugMode:!1}),[u,w]=(0,i.useState)(!1),[N,k]=(0,i.useState)("Official"),[S,E]=(0,i.useState)(!1),[C,T]=(0,i.useState)(null),[L,P]=(0,i.useState)(!1),{event:R,photos:I,messages:M,eventLoading:z,photosLoading:O,messagesLoading:_,verifyCodeMutation:B}=function(e){let{toast:a}=(0,b.pm)(),t=(0,x.NL)(),{data:s,isLoading:n}=(0,g.a)({queryKey:["/api/events",e],queryFn:async()=>(await (0,v.N)("GET","/api/events/".concat(e))).json(),enabled:!!e}),{data:r=[],isLoading:o}=(0,g.a)({queryKey:["/api/events",e,"photos"],queryFn:async()=>(await (0,v.N)("GET","/api/events/".concat(e,"/photos"))).json(),enabled:!!e,staleTime:2e3,refetchInterval:5e3,refetchOnWindowFocus:!0,refetchOnReconnect:!0,refetchIntervalInBackground:!0}),{data:l=[],isLoading:c}=(0,g.a)({queryKey:["/api/events",e,"messages"],queryFn:async()=>(await (0,v.N)("GET","/api/events/".concat(e,"/messages"))).json(),enabled:!!e,staleTime:5e3,refetchInterval:1e4,refetchOnWindowFocus:!0,refetchOnReconnect:!0,refetchIntervalInBackground:!0}),d=(0,f.D)({mutationFn:async a=>(await (0,v.N)("POST","/api/events/".concat(e,"/verify-code"),{accessCode:a})).json(),onSuccess:()=>{a({title:"Kode Akses Benar!",description:"Anda sekarang dapat mengupload foto."})},onError:()=>{a({title:"Kode Salah",description:"Silakan periksa kembali kode akses Anda.",variant:"destructive"})}});return(0,i.useEffect)(()=>{let a=a=>{a.detail.eventId===e&&(console.log("\uD83D\uDCE1 Received photo deleted broadcast, refreshing..."),t.refetchQueries({queryKey:["/api/events",e,"photos"]}))},s=a=>{a.detail.eventId===e&&(console.log("\uD83D\uDCE1 Received photo uploaded broadcast, refreshing..."),t.refetchQueries({queryKey:["/api/events",e,"photos"]}))};return window.addEventListener("photoDeleted",a),window.addEventListener("photoUploaded",s),()=>{window.removeEventListener("photoDeleted",a),window.removeEventListener("photoUploaded",s)}},[e,t]),{event:s,photos:r,messages:l,eventLoading:n,photosLoading:o,messagesLoading:c,verifyCodeMutation:d,queryClient:t,refreshPhotos:()=>{t.invalidateQueries({queryKey:["/api/events",e,"photos"]})},refreshMessages:()=>{t.invalidateQueries({queryKey:["/api/events",e,"messages"]})},refreshAll:()=>{t.invalidateQueries({queryKey:["/api/events",e]}),t.invalidateQueries({queryKey:["/api/events",e,"photos"]}),t.invalidateQueries({queryKey:["/api/events",e,"messages"]})}}}(a),{addMessageMutation:G,likeMessageMutation:Z,likePhotoMutation:U,addReactionMutation:Q,copyToClipboard:W}=function(e){let{toast:a}=(0,b.pm)(),t=(0,x.NL)(),s=(0,f.D)({mutationFn:async a=>(await (0,v.N)("POST","/api/events/".concat(e,"/messages"),a)).json(),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/events",e,"messages"]}),a({title:"Pesan Berhasil Dikirim!",description:"Pesan Anda telah ditambahkan ke buku tamu."})},onError:()=>{a({title:"Gagal",description:"Gagal mengirim pesan.",variant:"destructive"})}}),n=(0,f.D)({mutationFn:async e=>(await (0,v.N)("POST","/api/messages/".concat(e,"/hearts"))).json(),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/events",e,"messages"]}),a({title:"❤️ Liked!",description:"Anda menyukai pesan ini."})},onError:()=>{a({title:"Gagal",description:"Gagal memberikan like.",variant:"destructive"})}});return{addMessageMutation:s,likeMessageMutation:n,likePhotoMutation:(0,f.D)({mutationFn:async e=>{let{photoId:a,currentLikes:t}=e;return(await (0,v.N)("PATCH","/api/photos/".concat(a,"/likes"),{likes:t+1})).json()},onSuccess:()=>{t.invalidateQueries({queryKey:["/api/events",e,"photos"]}),a({title:"❤️ Liked!",description:"Anda menyukai foto ini."})},onError:()=>{a({title:"Gagal",description:"Gagal memberikan like pada foto.",variant:"destructive"})}}),addReactionMutation:(0,f.D)({mutationFn:async e=>{let{messageId:a,reactionType:t}=e;return(await (0,v.N)("POST","/api/messages/".concat(a,"/reactions"),{reactionType:t})).json()},onSuccess:(s,n)=>{t.invalidateQueries({queryKey:["/api/events",e,"messages"]}),a({title:"".concat({love:"\uD83D\uDE0D",laugh:"\uD83D\uDE02",wow:"\uD83D\uDE2E",sad:"\uD83D\uDE22",angry:"\uD83D\uDE20"}[n.reactionType]," Reaction Added!"),description:"Anda memberikan reaksi ".concat(n.reactionType,".")})},onError:()=>{a({title:"Gagal",description:"Gagal memberikan reaksi.",variant:"destructive"})}}),copyToClipboard:async e=>{await (0,y.Pm)(e,"Link",a)},downloadPhoto:async(e,t)=>{try{let s=await fetch(e),n=await s.blob(),i=window.URL.createObjectURL(n),r=document.createElement("a");r.href=i,r.download=t,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(i),document.body.removeChild(r),a({title:"Download Berhasil!",description:"Foto ".concat(t," telah didownload.")})}catch(e){a({title:"Download Gagal",description:"Tidak dapat mendownload foto.",variant:"destructive"})}}}}(a),H=(0,i.useMemo)(()=>I.filter(e=>e.album_name===N),[I,N]),J=e=>{T(e),E(!0)},Y={...B,mutate:e=>{B.mutate(e,{onSuccess:()=>{w(!0)}})}};if(z)return(0,s.jsx)(h,{});if(!R)return(0,s.jsx)("div",{className:"min-h-screen bg-wedding-ivory flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Acara Tidak Ditemukan"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Acara yang Anda cari tidak ada atau telah dihapus."})]})});let $=("Tamu"===N||"Bridesmaid"===N)&&!u;return(0,s.jsx)(F.E7,{eventId:a,children:(0,s.jsxs)("div",{className:"min-h-screen bg-wedding-ivory",children:[(0,s.jsx)(D,{event:R,onShare:()=>{(null==R?void 0:R.id)&&(null==R?void 0:R.access_code)&&W((0,j.Lp)(R.id,R.access_code))},onShowQR:()=>{P(!0)}}),(0,s.jsxs)("div",{className:"mobile-container mobile-spacing",children:[$&&(0,s.jsx)(A,{selectedAlbum:N,verifyCodeMutation:Y}),(0,s.jsxs)(r.mQ,{value:N,onValueChange:k,className:"w-full",children:[(0,s.jsx)("div",{className:t?"mobile-tabs-container":"",children:(0,s.jsx)(r.dr,{className:"".concat(t?"mobile-tabs-list grid grid-cols-4 h-auto p-1":"grid w-full grid-cols-4"),children:["Official","Tamu","Bridesmaid","Guestbook"].map(e=>(0,s.jsx)(r.SP,{value:e,className:t?"mobile-tab text-xs py-3":"",children:e},e))})}),["Official","Tamu","Bridesmaid"].map(e=>(0,s.jsx)(r.nU,{value:e,children:(0,s.jsx)(q,{albumName:e,eventId:a,photos:I,isLoading:O,needsAccessCode:$,onPhotoClick:J})},e)),(0,s.jsx)(r.nU,{value:"Guestbook",children:(0,s.jsx)(K,{messages:M,isLoading:_,addMessageMutation:G,likeMessageMutation:Z,addReactionMutation:Q,onLikeMessage:e=>{Z.mutate(e)},onAddReaction:(e,a)=>{Q.mutate({messageId:e,reactionType:a})}})})]}),S&&null!==C&&(0,s.jsx)(l.Z,{photos:H,currentIndex:C,onClose:()=>E(!1),onDelete:e=>{console.log("Delete photo:",e)},onLike:e=>{let a=I.find(a=>a.id===e);a&&U.mutate({photoId:e,currentLikes:a.likes||0})},onUnlike:()=>{}}),(0,s.jsx)(V,{event:R,isOpen:L,onClose:()=>P(!1),onCopyLink:W})]})]})})}},2503:function(e,a,t){"use strict";var s=t(881),n=t(4149),i=t(3575),r=t(5949),o=t(3939),l=t(5876),c=t(2436),d=t(2502),m=t(1664),u=t(7926);class h extends n.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e,errorId:"admin_error_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}}componentDidCatch(e,a){this.setState({error:e,errorInfo:a}),console.error("\uD83D\uDEA8 Admin Error Boundary caught an error:",{error:e.message,stack:e.stack,componentStack:a.componentStack,errorId:this.state.errorId,componentName:this.props.componentName,timestamp:new Date().toISOString()}),this.reportError(e,a)}render(){if(this.state.hasError){var e,a;if(this.props.fallback)return this.props.fallback;let t=this.getErrorSeverity(this.state.error),n=this.state.retryCount<this.maxRetries;return(0,s.jsx)("div",{className:"min-h-[400px] flex items-center justify-center p-4",children:(0,s.jsxs)(i.Zb,{className:"w-full max-w-2xl",children:[(0,s.jsx)(i.Ol,{children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg bg-red-100 text-red-600",children:(0,s.jsx)(l.Z,{className:"h-6 w-6"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)(i.ll,{className:"text-red-900",children:[this.props.componentName||"Admin Component"," Error"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,s.jsxs)(o.C,{className:"text-xs ".concat(this.getSeverityColor(t)),children:[t.toUpperCase()," SEVERITY"]}),(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:["Error ID: ",this.state.errorId]})]})]})]})}),(0,s.jsxs)(i.aY,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,s.jsx)("h4",{className:"font-medium text-red-900 mb-2",children:"Error Details:"}),(0,s.jsx)("p",{className:"text-sm text-red-800 font-mono",children:(null===(e=this.state.error)||void 0===e?void 0:e.message)||"Unknown error occurred"})]}),this.state.retryCount>0&&(0,s.jsx)("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,s.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,s.jsx)("strong",{children:"Retry Attempt:"})," ",this.state.retryCount," of ",this.maxRetries]})}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900",children:"Suggested Actions:"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n&&(0,s.jsxs)(r.z,{onClick:this.handleRetry,variant:"default",className:"flex items-center gap-2",children:[(0,s.jsx)(c.Z,{className:"h-4 w-4"}),"Retry (",this.maxRetries-this.state.retryCount," left)"]}),(0,s.jsxs)(r.z,{onClick:this.handleReload,variant:"outline",className:"flex items-center gap-2",children:[(0,s.jsx)(c.Z,{className:"h-4 w-4"}),"Reload Page"]}),(0,s.jsxs)(r.z,{onClick:this.handleGoHome,variant:"outline",className:"flex items-center gap-2",children:[(0,s.jsx)(d.Z,{className:"h-4 w-4"}),"Go to Dashboard"]}),(0,s.jsxs)(r.z,{onClick:()=>window.location.href="/admin/system-monitor",variant:"outline",className:"flex items-center gap-2",children:[(0,s.jsx)(m.Z,{className:"h-4 w-4"}),"System Monitor"]})]})]}),this.props.showDetails&&this.state.errorInfo&&(0,s.jsxs)("details",{className:"mt-4",children:[(0,s.jsxs)("summary",{className:"cursor-pointer text-sm font-medium text-gray-700 hover:text-gray-900",children:[(0,s.jsx)(u.Z,{className:"inline h-4 w-4 mr-1"}),"Technical Details (for developers)"]}),(0,s.jsx)("div",{className:"mt-2 p-4 bg-gray-50 border rounded-lg",children:(0,s.jsxs)("div",{className:"space-y-3 text-xs font-mono",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Error Stack:"}),(0,s.jsx)("pre",{className:"mt-1 whitespace-pre-wrap text-red-600",children:null===(a=this.state.error)||void 0===a?void 0:a.stack})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Component Stack:"}),(0,s.jsx)("pre",{className:"mt-1 whitespace-pre-wrap text-blue-600",children:this.state.errorInfo.componentStack})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Timestamp:"}),(0,s.jsx)("span",{className:"ml-2",children:new Date().toISOString()})]})]})})]}),(0,s.jsxs)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,s.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"Need Help?"}),(0,s.jsxs)("p",{className:"text-sm text-blue-800",children:["If this error persists, please contact support with Error ID:",(0,s.jsx)("code",{className:"ml-1 px-1 bg-blue-200 rounded text-xs",children:this.state.errorId})]})]})]})]})})}return this.props.children}constructor(e){super(e),this.maxRetries=3,this.reportError=(e,a)=>{try{window.dispatchEvent(new CustomEvent("admin-error",{detail:{error:e.message,stack:e.stack,componentStack:a.componentStack,errorId:this.state.errorId,componentName:this.props.componentName,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href}}))}catch(e){console.error("Failed to report error:",e)}},this.handleRetry=()=>{this.state.retryCount<this.maxRetries?this.setState(e=>({hasError:!1,error:null,errorInfo:null,retryCount:e.retryCount+1})):window.location.reload()},this.handleReload=()=>{window.location.reload()},this.handleGoHome=()=>{window.location.href="/admin"},this.getErrorSeverity=e=>{let a=e.message.toLowerCase();return a.includes("network")||a.includes("fetch")?"medium":a.includes("chunk")||a.includes("loading")?"low":a.includes("permission")||a.includes("auth")?"high":a.includes("memory")||a.includes("stack")?"critical":"medium"},this.getSeverityColor=e=>{switch(e){case"low":return"bg-blue-100 text-blue-800 border-blue-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"critical":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},this.state={hasError:!1,error:null,errorInfo:null,errorId:"",retryCount:0}}}a.Z=h},1756:function(e,a,t){"use strict";t.d(a,{SP:function(){return c},dr:function(){return l},mQ:function(){return o},nU:function(){return d}});var s=t(881),n=t(4149),i=t(1340),r=t(6756);let o=i.fC,l=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(i.aV,{ref:a,className:(0,r.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...n})});l.displayName=i.aV.displayName;let c=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(i.xz,{ref:a,className:(0,r.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...n})});c.displayName=i.xz.displayName;let d=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(i.VY,{ref:a,className:(0,r.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...n})});d.displayName=i.VY.displayName},113:function(e,a,t){"use strict";t.d(a,{g:function(){return r}});var s=t(881),n=t(4149),i=t(6756);let r=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...n})});r.displayName="Textarea"},9667:function(e,a,t){"use strict";t.d(a,{Gc:function(){return i},dD:function(){return n}});var s=t(4149);function n(){let[e,a]=s.useState(void 0);return s.useEffect(()=>{let e=window.matchMedia("(max-width: ".concat(767,"px)")),t=()=>{a(window.innerWidth<768)};return e.addEventListener("change",t),a(window.innerWidth<768),()=>e.removeEventListener("change",t)},[]),!!e}function i(){let[e,a]=s.useState("desktop");return s.useEffect(()=>{let e=()=>{let e=window.innerWidth;e<768?a("mobile"):e<1024?a("tablet"):a("desktop")};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e}}},function(e){e.O(0,[5678,7788,6291,8492,6594,9515,742,8475,8435,8985,5330,1744],function(){return e(e.s=5731)}),_N_E=e.O()}]);