"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[582],{2503:function(e,t,o){var n=o(881),s=o(4149),r=o(3575),i=o(5949),a=o(3939),c=o(5876),l=o(2436),d=o(2502),u=o(1664),h=o(7926);class m extends s.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e,errorId:"admin_error_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t}),console.error("\uD83D\uDEA8 Admin Error Boundary caught an error:",{error:e.message,stack:e.stack,componentStack:t.componentStack,errorId:this.state.errorId,componentName:this.props.componentName,timestamp:new Date().toISOString()}),this.reportError(e,t)}render(){if(this.state.hasError){var e,t;if(this.props.fallback)return this.props.fallback;let o=this.getErrorSeverity(this.state.error),s=this.state.retryCount<this.maxRetries;return(0,n.jsx)("div",{className:"min-h-[400px] flex items-center justify-center p-4",children:(0,n.jsxs)(r.Zb,{className:"w-full max-w-2xl",children:[(0,n.jsx)(r.Ol,{children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"p-2 rounded-lg bg-red-100 text-red-600",children:(0,n.jsx)(c.Z,{className:"h-6 w-6"})}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)(r.ll,{className:"text-red-900",children:[this.props.componentName||"Admin Component"," Error"]}),(0,n.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,n.jsxs)(a.C,{className:"text-xs ".concat(this.getSeverityColor(o)),children:[o.toUpperCase()," SEVERITY"]}),(0,n.jsxs)("span",{className:"text-xs text-gray-500",children:["Error ID: ",this.state.errorId]})]})]})]})}),(0,n.jsxs)(r.aY,{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,n.jsx)("h4",{className:"font-medium text-red-900 mb-2",children:"Error Details:"}),(0,n.jsx)("p",{className:"text-sm text-red-800 font-mono",children:(null===(e=this.state.error)||void 0===e?void 0:e.message)||"Unknown error occurred"})]}),this.state.retryCount>0&&(0,n.jsx)("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,n.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,n.jsx)("strong",{children:"Retry Attempt:"})," ",this.state.retryCount," of ",this.maxRetries]})}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("h4",{className:"font-medium text-gray-900",children:"Suggested Actions:"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s&&(0,n.jsxs)(i.z,{onClick:this.handleRetry,variant:"default",className:"flex items-center gap-2",children:[(0,n.jsx)(l.Z,{className:"h-4 w-4"}),"Retry (",this.maxRetries-this.state.retryCount," left)"]}),(0,n.jsxs)(i.z,{onClick:this.handleReload,variant:"outline",className:"flex items-center gap-2",children:[(0,n.jsx)(l.Z,{className:"h-4 w-4"}),"Reload Page"]}),(0,n.jsxs)(i.z,{onClick:this.handleGoHome,variant:"outline",className:"flex items-center gap-2",children:[(0,n.jsx)(d.Z,{className:"h-4 w-4"}),"Go to Dashboard"]}),(0,n.jsxs)(i.z,{onClick:()=>window.location.href="/admin/system-monitor",variant:"outline",className:"flex items-center gap-2",children:[(0,n.jsx)(u.Z,{className:"h-4 w-4"}),"System Monitor"]})]})]}),this.props.showDetails&&this.state.errorInfo&&(0,n.jsxs)("details",{className:"mt-4",children:[(0,n.jsxs)("summary",{className:"cursor-pointer text-sm font-medium text-gray-700 hover:text-gray-900",children:[(0,n.jsx)(h.Z,{className:"inline h-4 w-4 mr-1"}),"Technical Details (for developers)"]}),(0,n.jsx)("div",{className:"mt-2 p-4 bg-gray-50 border rounded-lg",children:(0,n.jsxs)("div",{className:"space-y-3 text-xs font-mono",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Error Stack:"}),(0,n.jsx)("pre",{className:"mt-1 whitespace-pre-wrap text-red-600",children:null===(t=this.state.error)||void 0===t?void 0:t.stack})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Component Stack:"}),(0,n.jsx)("pre",{className:"mt-1 whitespace-pre-wrap text-blue-600",children:this.state.errorInfo.componentStack})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Timestamp:"}),(0,n.jsx)("span",{className:"ml-2",children:new Date().toISOString()})]})]})})]}),(0,n.jsxs)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,n.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"Need Help?"}),(0,n.jsxs)("p",{className:"text-sm text-blue-800",children:["If this error persists, please contact support with Error ID:",(0,n.jsx)("code",{className:"ml-1 px-1 bg-blue-200 rounded text-xs",children:this.state.errorId})]})]})]})]})})}return this.props.children}constructor(e){super(e),this.maxRetries=3,this.reportError=(e,t)=>{try{window.dispatchEvent(new CustomEvent("admin-error",{detail:{error:e.message,stack:e.stack,componentStack:t.componentStack,errorId:this.state.errorId,componentName:this.props.componentName,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href}}))}catch(e){console.error("Failed to report error:",e)}},this.handleRetry=()=>{this.state.retryCount<this.maxRetries?this.setState(e=>({hasError:!1,error:null,errorInfo:null,retryCount:e.retryCount+1})):window.location.reload()},this.handleReload=()=>{window.location.reload()},this.handleGoHome=()=>{window.location.href="/admin"},this.getErrorSeverity=e=>{let t=e.message.toLowerCase();return t.includes("network")||t.includes("fetch")?"medium":t.includes("chunk")||t.includes("loading")?"low":t.includes("permission")||t.includes("auth")?"high":t.includes("memory")||t.includes("stack")?"critical":"medium"},this.getSeverityColor=e=>{switch(e){case"low":return"bg-blue-100 text-blue-800 border-blue-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"critical":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},this.state={hasError:!1,error:null,errorInfo:null,errorId:"",retryCount:0}}}t.Z=m},6542:function(e,t,o){o.d(t,{Uj:function(){return u},kd:function(){return m},BC:function(){return h}});var n=o(7825),s=o(4149),r=o(705),i=o(3499);class a{detectMobile(){if(this.isMobile=/Mobile|Android|iPhone|iPad/.test(navigator.userAgent),"connection"in navigator){let e=navigator.connection;this.networkType=(null==e?void 0:e.effectiveType)||"unknown"}}setupNetworkDetection(){if(window.addEventListener("online",()=>{console.log("\uD83D\uDCF6 Network back online, reconnecting..."),this.handleNetworkChange("online")}),window.addEventListener("offline",()=>{console.log("\uD83D\uDCF5 Network offline detected"),this.handleNetworkChange("offline")}),"connection"in navigator){let e=navigator.connection;null==e||e.addEventListener("change",()=>{let t=e.effectiveType;t!==this.networkType&&(console.log("\uD83D\uDCF6 Network type changed: ".concat(this.networkType," → ").concat(t)),this.networkType=t,this.handleNetworkChange("type-change"))})}}setupVisibilityHandling(){"undefined"!=typeof document&&document.addEventListener("visibilitychange",()=>{let e=this.isBackground;this.isBackground=document.hidden,e&&!this.isBackground?(console.log("\uD83D\uDCF1 App returned to foreground, checking connection..."),this.handleAppForeground()):!e&&this.isBackground&&(console.log("\uD83D\uDCF1 App went to background"),this.handleAppBackground())})}handleNetworkChange(e){switch(e){case"online":var t;(null===(t=this.socket)||void 0===t?void 0:t.connected)||this.reconnect();break;case"offline":this.emit("network-offline",{timestamp:new Date().toISOString()});break;case"type-change":this.optimizeForNetwork()}}handleAppForeground(){var e;(null===(e=this.socket)||void 0===e?void 0:e.connected)?this.sendHeartbeat():this.reconnect()}handleAppBackground(){this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.startHeartbeat(6e4))}optimizeForNetwork(){if(!this.socket)return;let e={};switch(this.networkType){case"slow-2g":case"2g":e.timeout=3e4,e.forceNew=!1;break;case"3g":e.timeout=2e4;break;default:e.timeout=1e4}console.log("\uD83D\uDCF6 Optimizing for ".concat(this.networkType," network"))}connect(){if(!this.isConnecting&&(!this.socket||!this.socket.connected)){this.isConnecting=!0,console.log("\uD83D\uDD0C Connecting to Socket.IO server...");try{let e={transports:["websocket","polling"],upgrade:!0,rememberUpgrade:!0,timeout:this.getTimeoutForNetwork(),reconnection:!0,reconnectionAttempts:this.maxReconnectAttempts,reconnectionDelay:1e3,reconnectionDelayMax:5e3,maxReconnectionAttempts:this.maxReconnectAttempts,forceNew:!1,auth:this.getAuthToken(),query:{clientType:this.isMobile?"mobile":"desktop",networkType:this.networkType,userAgent:"undefined"!=typeof navigator?navigator.userAgent:"unknown"}};this.socket=(0,r.io)(this.url,e),this.setupSocketEventListeners()}catch(e){console.error("❌ Socket.IO connection error:",e),this.handleReconnect()}}}getTimeoutForNetwork(){switch(this.networkType){case"slow-2g":return 3e4;case"2g":return 25e3;case"3g":return 2e4;case"4g":return 1e4;default:return 15e3}}getAuthToken(){{let e=localStorage.getItem("auth-token");return e?{token:e}:{}}}setupSocketEventListeners(){this.socket&&(this.socket.on("connect",()=>{var e,t;console.log("✅ Socket.IO connected via ".concat(null===(e=this.socket)||void 0===e?void 0:e.io.engine.transport.name)),this.isConnecting=!1,this.reconnectAttempts=0,this.startHeartbeat(),this.rejoinRooms(),this.sendQueuedMessages(),this.emit("connected",{transport:null===(t=this.socket)||void 0===t?void 0:t.io.engine.transport.name,timestamp:new Date().toISOString()})}),this.socket.on("connected",e=>{this.connectionInfo=e,console.log("\uD83D\uDCE1 Server connection info:",e),this.emit("server-info",e)}),this.socket.io.on("upgrade",e=>{console.log("\uD83D\uDD04 Transport upgraded to: ".concat(e.name)),this.emit("transport-upgrade",{transport:e.name})}),this.socket.on("message",e=>{this.handleMessage("message",e)}),this.socket.on("room-joined",e=>{console.log("\uD83D\uDCCD Joined room: ".concat(e.room)),this.emit("room-joined",e)}),this.socket.on("room-left",e=>{console.log("\uD83D\uDCCD Left room: ".concat(e.room)),this.emit("room-left",e)}),this.socket.on("dslr_status",e=>{this.handleMessage("dslr_status",e)}),this.socket.on("backup_status",e=>{this.handleMessage("backup_status",e)}),this.socket.on("notification",e=>{this.handleNotification(e)}),this.socket.on("upload_progress",e=>{this.handleUploadProgress(e)}),this.socket.on("camera_status",e=>{this.handleCameraStatus(e)}),this.socket.on("system_status",e=>{this.handleSystemStatus(e)}),this.socket.on("heartbeat-response",e=>{this.emit("heartbeat-response",e)}),this.socket.on("connect_error",e=>{console.error("❌ Socket.IO connection error:",e.message),this.emit("connect_error",{error:e.message,timestamp:new Date().toISOString()})}),this.socket.on("disconnect",(e,t)=>{console.log("\uD83D\uDD0C Socket.IO disconnected:",e),this.isConnecting=!1,this.stopHeartbeat(),this.emit("disconnected",{reason:e,details:t,timestamp:new Date().toISOString()}),"io server disconnect"===e&&this.handleReconnect()}),this.socket.on("error",e=>{console.error("❌ Socket.IO error:",e),this.emit("error",{error:e,timestamp:new Date().toISOString()})}))}handleMessage(e,t){console.log("\uD83D\uDCE8 Socket.IO message received: ".concat(e),t),this.emit(e,t)}handleNotification(e){let{type:t,title:o,message:n,priority:s,showToast:r=!0,persistent:a=!1}=e;if(r){let e={persistent:a||"critical"===s,duration:"critical"===s?0:"high"===s?8e3:5e3};switch(t){case"upload_success":i.Am.upload(o,n,e);break;case"upload_failed":i.Am.error(o,n,e);break;case"camera_disconnected":i.Am.camera(o,n,e);break;case"storage_warning":i.Am.warning(o,n,e);break;case"event_milestone":i.Am.success(o,n,e);break;default:i.Am.info(o,n,e)}}("critical"===s||"high"===s)&&this.playNotificationSound(),this.isMobile&&"vibrator"in navigator&&("critical"===s||"high"===s)&&navigator.vibrate([200,100,200]),this.emit("notification",e)}handleUploadProgress(e){let{fileName:t,progress:o,total:n,status:s}=e;"completed"===s?i.Am.success("Upload Complete","".concat(t," uploaded successfully")):"failed"===s&&i.Am.error("Upload Failed","Failed to upload ".concat(t)),this.emit("upload_progress",e)}handleCameraStatus(e){let{status:t,cameraModel:o,message:n}=e;"connected"===t?i.Am.camera("Camera Connected","".concat(o," is ready for shooting")):"disconnected"===t&&i.Am.camera("Camera Disconnected",n||"Please check USB connection",{persistent:!0}),this.emit("camera_status",e)}handleSystemStatus(e){let{status:t,message:o,data:n}=e;"storage_warning"===t?i.Am.warning("Storage Warning","".concat(n.percentage,"% storage remaining"),{persistent:!0}):"backup_complete"===t&&i.Am.success("Backup Complete",o),this.emit("system_status",e)}joinRoom(e){var t;(null===(t=this.socket)||void 0===t?void 0:t.connected)?(this.socket.emit("join-room",e),this.subscribedRooms.add(e),console.log("\uD83D\uDCCD Joining room: ".concat(e))):console.warn("⚠️ Cannot join room ".concat(e,": not connected"))}leaveRoom(e){var t;(null===(t=this.socket)||void 0===t?void 0:t.connected)&&(this.socket.emit("leave-room",e),this.subscribedRooms.delete(e),console.log("\uD83D\uDCCD Leaving room: ".concat(e)))}rejoinRooms(){this.subscribedRooms.forEach(e=>{var t;(null===(t=this.socket)||void 0===t?void 0:t.connected)&&(this.socket.emit("join-room",e),console.log("\uD83D\uDCCD Re-joining room: ".concat(e)))})}send(e,t,o){var n;let s={type:e,payload:t,timestamp:new Date().toISOString(),id:"msg_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),room:o};(null===(n=this.socket)||void 0===n?void 0:n.connected)?(this.socket.emit("message",s),console.log("\uD83D\uDCE4 Socket.IO message sent:",s)):(this.messageQueue.push(s),console.log("\uD83D\uDCE6 Message queued (Socket.IO not ready):",s))}sendQueuedMessages(){for(;this.messageQueue.length>0;){var e;let t=this.messageQueue.shift();t&&(null===(e=this.socket)||void 0===e?void 0:e.connected)&&(this.socket.emit("message",t),console.log("\uD83D\uDCE4 Queued message sent:",t))}}sendHeartbeat(){var e;(null===(e=this.socket)||void 0===e?void 0:e.connected)&&this.socket.emit("heartbeat",{timestamp:new Date().toISOString(),clientTime:Date.now(),networkType:this.networkType,isBackground:this.isBackground})}startHeartbeat(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e4;this.stopHeartbeat(),this.heartbeatInterval=setInterval(()=>{this.sendHeartbeat()},e)}stopHeartbeat(){this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null)}handleReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("❌ Max reconnection attempts reached"),this.emit("max_reconnect_attempts",{attempts:this.reconnectAttempts});return}this.reconnectAttempts++,console.log("\uD83D\uDD04 Reconnecting... (attempt ".concat(this.reconnectAttempts,"/").concat(this.maxReconnectAttempts,")")),setTimeout(()=>{this.connect()},Math.min(1e3*Math.pow(2,this.reconnectAttempts)+1e3*Math.random(),3e4))}on(e,t){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t)}off(e,t){let o=this.listeners.get(e);if(o){let e=o.indexOf(t);e>-1&&o.splice(e,1)}}emit(e,t){let o=this.listeners.get(e);o&&o.forEach(e=>{try{e(t)}catch(e){console.error("❌ Error in event listener:",e)}})}playNotificationSound(){try{let e=new(window.AudioContext||window.webkitAudioContext),t=e.createOscillator(),o=e.createGain();t.connect(o),o.connect(e.destination),t.frequency.value=800,t.type="sine",o.gain.value=.1,t.start(),t.stop(e.currentTime+.2)}catch(e){console.warn("⚠️ Could not play notification sound:",e)}}getStatus(){return this.socket&&this.socket.connected?"connected":"disconnected"}getConnectionInfo(){var e;return{status:this.getStatus(),transport:(null===(e=this.socket)||void 0===e?void 0:e.io.engine.transport.name)||"unknown",networkType:this.networkType,isMobile:this.isMobile,isBackground:this.isBackground,reconnectAttempts:this.reconnectAttempts,subscribedRooms:Array.from(this.subscribedRooms),connectionInfo:this.connectionInfo}}close(){this.stopHeartbeat(),this.socket&&(this.socket.disconnect(),this.socket=null),this.subscribedRooms.clear()}reconnect(){this.close(),this.reconnectAttempts=0,this.connect()}constructor(e="http://localhost:3000"){this.url=e,this.socket=null,this.reconnectAttempts=0,this.maxReconnectAttempts=10,this.isConnecting=!1,this.listeners=new Map,this.messageQueue=[],this.subscribedRooms=new Set,this.connectionInfo=null,this.heartbeatInterval=null,this.isMobile=!1,this.isBackground=!1,this.networkType="unknown",this.detectMobile(),this.setupNetworkDetection(),this.setupVisibilityHandling(),this.connect()}}let c=null;function l(){if(!c){let e="http://147.251.255.227:3003";console.log("\uD83D\uDD0C Socket.IO URL:",e),c=new a(e)}return c}let d=()=>{let e="true"===localStorage.getItem("use-socketio");return"true"===new URLSearchParams(window.location.search).get("socketio")||e||!0};function u(){let e=d(),t=function(){let[e,t]=(0,s.useState)(null),[o,n]=(0,s.useState)(!1),[r,i]=(0,s.useState)("unknown"),[a,c]=(0,s.useState)(null),[d,u]=(0,s.useState)(!0),[h,m]=(0,s.useState)([]),g=(0,s.useRef)(l()),p=(0,s.useRef)(null),k=(0,s.useRef)(!1),f=(0,s.useCallback)(async()=>{try{let e=await fetch("/api/dslr/status");if(e.ok){let o=await e.json();t(o),c(null)}else throw Error("HTTP ".concat(e.status))}catch(e){console.error("❌ DSLR polling error:",e),c(e instanceof Error?e.message:"Polling failed")}},[]),v=(0,s.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e4;p.current&&clearInterval(p.current),p.current=setInterval(f,e),console.log("\uD83D\uDD04 DSLR polling started (".concat(e,"ms interval)"))},[f]),w=(0,s.useCallback)(()=>{p.current&&(clearInterval(p.current),p.current=null,console.log("⏹️ DSLR polling stopped"))},[]);(0,s.useEffect)(()=>{let e=g.current,o=t=>{n(!0),i(t.transport||"unknown"),c(null),d&&!k.current&&(e.joinRoom("dslr-monitoring"),k.current=!0,w())},s=e=>{n(!1),c(e.reason||"Disconnected"),k.current=!1,d&&v(3e4)},r=e=>{t(e),c(null),console.log("\uD83D\uDCE1 DSLR status received via Socket.IO:",e)},a=e=>{t(t=>({...t,cameraStatus:e.status,cameraModel:e.cameraModel,lastCameraUpdate:e.timestamp}))},l=e=>{["upload_success","upload_failed","camera_disconnected"].includes(e.type)&&m(t=>[e,...t.slice(0,9)])},u=e=>{"dslr-monitoring"===e.room&&(console.log("\uD83D\uDCCD Joined DSLR monitoring room"),k.current=!0,w())},h=e=>{i(e.transport)};e.on("connected",o),e.on("disconnected",s),e.on("dslr_status",r),e.on("camera_status",a),e.on("notification",l),e.on("room-joined",u),e.on("transport-upgrade",h);let p=e.getStatus();return n("connected"===p),"connected"===p&&d?e.joinRoom("dslr-monitoring"):d&&v(3e4),()=>{e.off("connected",o),e.off("disconnected",s),e.off("dslr_status",r),e.off("camera_status",a),e.off("notification",l),e.off("room-joined",u),e.off("transport-upgrade",h),w(),k.current&&(e.leaveRoom("dslr-monitoring"),k.current=!1)}},[d,v,w]);let b=(0,s.useCallback)(e=>{u(e);let t=g.current;e?"connected"===t.getStatus()?(t.joinRoom("dslr-monitoring"),w()):v(3e4):(k.current&&(t.leaveRoom("dslr-monitoring"),k.current=!1),w())},[v,w]),D=(0,s.useCallback)(()=>{o&&k.current?g.current.send("request-dslr-status",{}):f()},[o,f]);return{dslrStatus:e,isConnected:o,transport:r,error:a,isRealTimeEnabled:d,notifications:h,toggleRealTime:b,refreshStatus:D,clearNotifications:(0,s.useCallback)(()=>{m([])},[]),connectionMode:o&&k.current?"realtime":"polling",cameraStatus:null,uploadProgress:null,subscribe:()=>{},unsubscribe:()=>{}}}(),o=(0,n.Uj)();return e?{...t,provider:"socket.io"}:{...o,provider:"websocket"}}function h(){let e=d(),t=function(){let[e,t]=(0,s.useState)([]),[o,n]=(0,s.useState)(!1),[r,i]=(0,s.useState)(0),a=(0,s.useRef)(l()),c=(0,s.useRef)(!1);return(0,s.useEffect)(()=>{let e=a.current,o=()=>{n(!0),c.current||(e.joinRoom("admin-notifications"),c.current=!0)},s=()=>{n(!1),c.current=!1},r=e=>{t(t=>[e,...t.slice(0,49)]),i(e=>e+1)},l=e=>{"admin-notifications"===e.room&&(console.log("\uD83D\uDCCD Joined admin notifications room"),c.current=!0)};return e.on("connected",o),e.on("disconnected",s),e.on("notification",r),e.on("room-joined",l),"connected"===e.getStatus()&&(n(!0),e.joinRoom("admin-notifications")),()=>{e.off("connected",o),e.off("disconnected",s),e.off("notification",r),e.off("room-joined",l),c.current&&(e.leaveRoom("admin-notifications"),c.current=!1)}},[]),{notifications:e,isConnected:o,unreadCount:r,markAsRead:(0,s.useCallback)(()=>{i(0)},[]),clearNotifications:(0,s.useCallback)(()=>{t([]),i(0)},[])}}(),o=(0,n.BC)();return e?{...t,provider:"socket.io"}:{...o,provider:"websocket"}}function m(){let e=d();return{provider:e?"socket.io":"websocket",isSocketIO:e,isWebSocket:!e,features:{rooms:e,compression:e,autoFallback:e,uploadProgress:e,mobileOptimized:e,rateLimiting:e}}}}}]);