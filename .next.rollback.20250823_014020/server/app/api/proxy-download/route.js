"use strict";(()=>{var e={};e.id=3999,e.ids=[3999],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},47973:(e,t,o)=>{o.r(t),o.d(t,{originalPathname:()=>w,patchFetch:()=>g,requestAsyncStorage:()=>d,routeModule:()=>u,serverHooks:()=>h,staticGenerationAsyncStorage:()=>c});var r={};o.r(r),o.d(r,{GET:()=>i,OPTIONS:()=>p});var n=o(30633),a=o(86488),s=o(13342),l=o(90223);async function i(e){try{let{searchParams:t}=new URL(e.url),o=t.get("url");if(!o)return l.NextResponse.json({error:"URL parameter is required"},{status:400});let r=new URL(o);if(!["147.251.255.227:3002","hafiportrait.photography","localhost","127.0.0.1"].some(e=>r.hostname===e||r.host===e))return l.NextResponse.json({error:"Domain not allowed"},{status:403});let n=await fetch(o,{headers:{"User-Agent":"HafiPortrait-Gallery/1.0",Accept:"image/*"}});if(!n.ok)throw Error(`Failed to fetch image: ${n.status}`);let a=await n.arrayBuffer(),s=n.headers.get("content-type")||"image/jpeg";return new l.NextResponse(a,{status:200,headers:{"Content-Type":s,"Content-Length":a.byteLength.toString(),"Cache-Control":"public, max-age=31536000","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET","Access-Control-Allow-Headers":"Content-Type"}})}catch(e){return console.error("Proxy download error:",e),l.NextResponse.json({error:"Failed to download image"},{status:500})}}async function p(){return new l.NextResponse(null,{status:200,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, OPTIONS","Access-Control-Allow-Headers":"Content-Type"}})}let u=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/proxy-download/route",pathname:"/api/proxy-download",filename:"route",bundlePath:"app/api/proxy-download/route"},resolvedPagePath:"/home/ubuntu/stable/src/app/api/proxy-download/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:d,staticGenerationAsyncStorage:c,serverHooks:h}=u,w="/api/proxy-download/route";function g(){return(0,s.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:c})}}};var t=require("../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),r=t.X(0,[2782,606],()=>o(47973));module.exports=r})();